/*
 Copyright 2011-2013 Abdulla Abdurakhmanov
 Original sources are available at https://code.google.com/p/x2js/

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
 */
function X2JS(e){"use strict";function n(){void 0===e.escapeMode&&(e.escapeMode=!0),e.attributePrefix=e.attributePrefix||"_",e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0),e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0),void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0),e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[]}function t(){function e(e){var n=String(e);return 1===n.length&&(n="0"+n),n}"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|^\n+|(\s|\n)+$/g,"")}),"function"!=typeof Date.prototype.toISOString&&(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"})}function r(e){var n=e.localName;return null==n&&(n=e.baseName),null!=n&&""!=n||(n=e.nodeName),n}function i(e){return e.prefix}function a(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):e}function o(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}function s(n,t,r){switch(e.arrayAccessForm){case"property":n[t]instanceof Array?n[t+"_asArray"]=n[t]:n[t+"_asArray"]=[n[t]]}if(!(n[t]instanceof Array)&&e.arrayAccessFormPaths.length>0){for(var i=0;i<e.arrayAccessFormPaths.length;i++){var a=e.arrayAccessFormPaths[i];if("string"==typeof a){if(a==r)break}else if(a instanceof RegExp){if(a.test(r))break}else if("function"==typeof a&&a(n,t,r))break}i!=e.arrayAccessFormPaths.length&&(n[t]=[n[t]])}}function l(e){var n=e.split(/[-T:+Z]/g),t=new Date(n[0],n[1]-1,n[2]),r=n[5].split(".");if(t.setHours(n[3],n[4],r[0]),r.length>1&&t.setMilliseconds(r[1]),n[6]&&n[7]){var i=60*n[6]+Number(n[7]),a=/\d\d-\d\d:\d\d$/.test(e)?"-":"+";i=0+("-"==a?-1*i:i),t.setMinutes(t.getMinutes()-i-t.getTimezoneOffset())}else e.indexOf("Z",e.length-1)!==-1&&(t=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())));return t}function d(n,t,r){if(e.datetimeAccessFormPaths.length>0){for(var i=r.split(".#")[0],a=0;a<e.datetimeAccessFormPaths.length;a++){var o=e.datetimeAccessFormPaths[a];if("string"==typeof o){if(o==i)break}else if(o instanceof RegExp){if(o.test(i))break}else if("function"==typeof o&&o(obj,t,i))break}return a!=e.datetimeAccessFormPaths.length?l(n):n}return n}function c(n,t){if(n.nodeType==S.DOCUMENT_NODE){for(var a=new Object,l=n.childNodes,m=0;m<l.length;m++){var u=l.item(m);if(u.nodeType==S.ELEMENT_NODE){var p=r(u);a[p]=c(u,p)}}return a}if(n.nodeType==S.ELEMENT_NODE){var a=new Object;a.__cnt=0;for(var l=n.childNodes,m=0;m<l.length;m++){var u=l.item(m),p=r(u);u.nodeType!=S.COMMENT_NODE&&(a.__cnt++,null==a[p]?(a[p]=c(u,t+"."+p),s(a,p,t+"."+p)):(null!=a[p]&&(a[p]instanceof Array||(a[p]=[a[p]],s(a,p,t+"."+p))),a[p][a[p].length]=c(u,t+"."+p)))}for(var g=0;g<n.attributes.length;g++){var f=n.attributes.item(g);a.__cnt++,a[e.attributePrefix+f.name]=f.value}var h=i(n);return null!=h&&""!=h&&(a.__cnt++,a.__prefix=h),null!=a["#text"]&&(a.__text=a["#text"],a.__text instanceof Array&&(a.__text=a.__text.join("\n")),e.escapeMode&&(a.__text=o(a.__text)),e.stripWhitespaces&&(a.__text=a.__text.trim()),delete a["#text"],"property"==e.arrayAccessForm&&delete a["#text_asArray"],a.__text=d(a.__text,p,t+"."+p)),null!=a["#cdata-section"]&&(a.__cdata=a["#cdata-section"],delete a["#cdata-section"],"property"==e.arrayAccessForm&&delete a["#cdata-section_asArray"]),1==a.__cnt&&null!=a.__text?a=a.__text:0==a.__cnt&&"text"==e.emptyNodeForm?a="":a.__cnt>1&&null!=a.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==a.__text||""==a.__text.trim())&&delete a.__text,delete a.__cnt,!e.enableToStringFunc||null==a.__text&&null==a.__cdata||(a.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),a}if(n.nodeType==S.TEXT_NODE||n.nodeType==S.CDATA_SECTION_NODE)return n.nodeValue}function m(n,t,r,i){var o="<"+(null!=n&&null!=n.__prefix?n.__prefix+":":"")+t;if(null!=r)for(var s=0;s<r.length;s++){var l=r[s],d=n[l];e.escapeMode&&(d=a(d)),o+=" "+l.substr(e.attributePrefix.length)+"='"+d+"'"}return o+=i?"/>":">"}function u(e,n){return"</"+(null!=e.__prefix?e.__prefix+":":"")+n+">"}function p(e,n){return e.indexOf(n,e.length-n.length)!==-1}function g(n,t){return!!("property"==e.arrayAccessForm&&p(t.toString(),"_asArray")||0==t.toString().indexOf(e.attributePrefix)||0==t.toString().indexOf("__")||n[t]instanceof Function)}function f(e){var n=0;if(e instanceof Object)for(var t in e)g(e,t)||n++;return n}function h(n){var t=[];if(n instanceof Object)for(var r in n)r.toString().indexOf("__")==-1&&0==r.toString().indexOf(e.attributePrefix)&&t.push(r);return t}function v(n){var t="";return null!=n.__cdata&&(t+="<![CDATA["+n.__cdata+"]]>"),null!=n.__text&&(t+=e.escapeMode?a(n.__text):n.__text),t}function b(n){var t="";return n instanceof Object?t+=v(n):null!=n&&(t+=e.escapeMode?a(n):n),t}function y(e,n,t){var r="";if(0==e.length)r+=m(e,n,t,!0);else for(var i=0;i<e.length;i++)r+=m(e[i],n,h(e[i]),!1),r+=w(e[i]),r+=u(e[i],n);return r}function w(e){var n="",t=f(e);if(t>0)for(var r in e)if(!g(e,r)){var i=e[r],a=h(i);if(null==i||void 0==i)n+=m(i,r,a,!0);else if(i instanceof Object)if(i instanceof Array)n+=y(i,r,a);else if(i instanceof Date)n+=m(i,r,a,!1),n+=i.toISOString(),n+=u(i,r);else{var o=f(i);o>0||null!=i.__text||null!=i.__cdata?(n+=m(i,r,a,!1),n+=w(i),n+=u(i,r)):n+=m(i,r,a,!0)}else n+=m(i,r,a,!1),n+=b(i),n+=u(i,r)}return n+=b(e)}var C="1.1.5";e=e||{},n(),t();var S={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(e){var n=window.ActiveXObject||"ActiveXObject"in window;if(void 0===e)return null;var t;if(window.DOMParser){var r=new window.DOMParser,i=null;if(!n)try{i=r.parseFromString("INVALID","text/xml").childNodes[0].namespaceURI}catch(a){i=null}try{t=r.parseFromString(e,"text/xml"),null!=i&&t.getElementsByTagNameNS(i,"parsererror").length>0&&(t=null)}catch(a){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e);return t},this.asArray=function(e){return e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?l(e):e},this.xml2json=function(e){return c(e)},this.xml_str2json=function(e){var n=this.parseXmlString(e);return null!=n?this.xml2json(n):null},this.json2xml_str=function(e){return w(e)},this.json2xml=function(e){var n=this.json2xml_str(e);return this.parseXmlString(n)},this.getVersion=function(){return C}}!function(){"use strict";angular.module("triangular.layouts",[])}(),function(){"use strict";function e(e,n,t,r,i,a,o,s,l){function d(){"icon"===s.layout.sideMenuSize&&(a.find(".triangular-sidenav-left").addClass("hover"),t(function(){o.dispatchEvent(new Event("resize"))},300))}function c(n){var o=a.find(".triangular-content");"@triangular"===n&&angular.isDefined(s.layout.footerTemplateUrl)&&r(s.layout.footerTemplateUrl).then(function(n){var r=i(n),a=r(e);t(function(){o.append(a)})})}function m(e,n){v.showLoader=n}function u(){l.setLoaderActive(!0)}function p(){"icon"===s.layout.sideMenuSize&&(a.find(".triangular-sidenav-left").removeClass("hover"),t(function(){o.dispatchEvent(new Event("resize"))},300))}function g(e,n){h.push(n)}function f(e,n){angular.isDefined(s.layout.footer)&&s.layout.footer===!0&&c(n);var t=h.indexOf(n);-1!==t&&h.splice(t,1),0===h.length&&l.setLoaderActive(!1)}var h=[],v=this;v.activateHover=d,v.removeHover=p,v.showLoader=l.isActive(),e.layout=s.layout,e.$on("loader",m),e.$on("$stateChangeStart",u),e.$on("$viewContentLoading",g),e.$on("$viewContentLoaded",f)}e.$inject=["$scope","$rootScope","$timeout","$templateRequest","$compile","$element","$window","triLayout","triLoaderService"],angular.module("triangular.layouts").controller("TriangularStateController",e)}(),function(){"use strict";function e(e,n,t,r,i){function a(){"icon"===i.layout.sideMenuSize&&(n.find(".admin-sidebar-left").addClass("hover"),t(function(){r.dispatchEvent(new Event("resize"))},300))}function o(){"icon"===i.layout.sideMenuSize&&(n.find(".admin-sidebar-left").removeClass("hover"),t(function(){r.dispatchEvent(new Event("resize"))},300))}e.layout=i.layout;var s=this;s.activateHover=a,s.removeHover=o}e.$inject=["$scope","$element","$timeout","$window","triLayout"],angular.module("triangular.layouts").controller("DefaultLayoutController",e)}(),function(){"use strict";function e(e,n,t,r){function i(e,i){function a(){i.scrollTop(0)}function o(){var a=i.find("#admin-panel-content-view"),o=a.find("#footer");0===o.length&&t(r.layout.footerTemplateUrl).then(function(t){var r=n(t),i=r(e);a.append(i)})}e.$on("$stateChangeStart",a),e.$on("$viewContentLoaded",o)}var a={link:i,replace:!0,restrict:"A"};return a}e.$inject=["$rootScope","$compile","$templateRequest","triLayout"],angular.module("triangular.layouts").directive("triDefaultContent",e)}(),function(){"use strict";angular.module("triangular.components",[])}(),function(){"use strict";function e(){var e={bindToController:!0,controller:n,controllerAs:"triWizard",restrict:"A"};return e}function n(e,n){function t(e){return u[e]}function r(){m.currentStep=m.currentStep+1}function i(){var n=e.triWizard.getForm(m.currentStep),t=!0;return angular.isDefined(n)&&angular.isDefined(n.$invalid)&&(t=n.$invalid),t}function a(e){if(angular.isDefined(u[e]))return u[e].$valid}function o(){m.currentStep=m.currentStep-1}function s(){return 0===m.currentStep}function l(e){u.push(e)}function d(){var e=c();m.progress=Math.floor(e/p*100)}function c(){for(var e=0,n=u.length-1;n>=0;n--)angular.forEach(u[n],function(n){angular.isObject(n)&&n.hasOwnProperty("$modelValue")&&n.$valid===!0&&(e+=1)});return e}var m=this,u=[],p=0;m.currentStep=0,m.getForm=t,m.isFormValid=a,m.nextStep=r,m.nextStepDisabled=i,m.prevStep=o,m.prevStepDisabled=s,m.progress=0,m.registerForm=l,m.updateProgress=d,n(function(){for(var e=u.length-1;e>=0;e--)angular.forEach(u[e],function(e){angular.isObject(e)&&e.hasOwnProperty("$modelValue")&&(p+=1)});d()})}n.$inject=["$scope","$timeout"],angular.module("triangular.components").directive("triWizard",e)}(),function(){"use strict";function e(){function e(e,n,t,r){var i=r[0],a=r[1];a.registerForm(i),n.on("input",function(){a.updateProgress()})}var n={require:["form","^triWizard"],link:e,restrict:"A"};return n}angular.module("triangular.components").directive("triWizardForm",e)}(),function(){"use strict";function e(e){function t(n,t,r){n.vm.widgetLayout="left"===r.titlePosition||"right"===r.titlePosition?"row":"column",n.vm.contentLayout=angular.isUndefined(r.contentLayout)?"column":r.contentLayout,n.vm.contentPadding=angular.isDefined(r.contentPadding),n.vm.contentLayoutAlign=angular.isUndefined(r.contentLayoutAlign)?"":r.contentLayoutAlign,n.vm.titleOrder="right"===r.titlePosition||"bottom"===r.titlePosition?2:1,n.vm.contentOrder="right"===r.titlePosition||"bottom"===r.titlePosition?1:2,n.vm.overlayTitle=!angular.isUndefined(r.overlayTitle)||void 0,e(t),angular.isDefined(r["class"])&&t.addClass(r["class"]),angular.isDefined(r.backgroundImage)&&t.css("background-image","url("+r.backgroundImage+")"),n.menuClick=function(e){angular.isUndefined(n.menu.menuClick)&&n.menu.menuClick(e)},t.attr("title","")}var r={restrict:"E",templateUrl:"app/triangular/components/widget/widget.tmpl.html",transclude:!0,replace:!0,scope:{title:"@",subtitle:"@",avatar:"@"},bindToController:!0,controller:n,controllerAs:"vm",link:t};return r}function n(){var e=this;e.menu=null,e.loading=!1,this.setMenu=function(n){e.menu=n},this.setLoading=function(n){e.loading=n}}e.$inject=["$mdTheming"],angular.module("triangular.components").directive("triWidget",e)}(),function(){"use strict";function e(e,n,t,r,i,a,o,s,l,d,c,m,u,p,g){function f(e){s.debounce(function(){l(e).toggle()},300)()}function h(e){if(n.has("$translate")){var r=n.get("$translate");r.use(e).then(function(){d.show(d.simple().content(o("triTranslate")("Language Changed")).position("bottom right").hideDelay(500)),t.$emit("changeTitle")})}}function v(){return"hidden"!==g.layout.sideMenuSize&&r("gt-sm")}function b(e){t.$broadcast("triSwitchNotificationTab",e),w.openSideNav("notifications")}function y(){w.isFullScreen=!w.isFullScreen,w.fullScreenIcon=w.isFullScreen?"zmdi zmdi-fullscreen-exit":"zmdi zmdi-fullscreen";var e=m[0];e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement?e.exitFullscreen?e.exitFullscreen():e.msExitFullscreen?e.msExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitExitFullscreen&&e.webkitExitFullscreen():e.documentElement.requestFullscreen?e.documentElement.requestFullscreen():e.documentElement.msRequestFullscreen?e.documentElement.msRequestFullscreen():e.documentElement.mozRequestFullScreen?e.documentElement.mozRequestFullScreen():e.documentElement.webkitRequestFullscreen&&e.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}var w=this;w.breadcrumbs=u.breadcrumbs,w.emailNew=!1,w.languages=p.languages,w.openSideNav=f,w.hideMenuButton=v,w.switchLanguage=h,w.toggleNotificationsTab=b,w.isFullScreen=!1,w.fullScreenIcon="zmdi zmdi-fullscreen",w.toggleFullScreen=y,e.$on("newMailNotification",function(){w.emailNew=!0})}e.$inject=["$scope","$injector","$rootScope","$mdMedia","$state","$element","$filter","$mdUtil","$mdSidenav","$mdToast","$timeout","$document","triBreadcrumbsService","triSettings","triLayout"],angular.module("triangular.components").controller("DefaultToolbarController",e)}(),function(){"use strict";function e(e){function n(n,t,r){var i=[],a=null,o=!1;n.pageSize=angular.isUndefined(r.pageSize)?0:r.pageSize,n.page=angular.isUndefined(r.page)?0:r.page,angular.forEach(n.columns,function(e){e.sortable&&i.push(e.field)}),n.refresh=function(t){t===!0&&(n.page=0),n.contents=e("orderBy")(n.contents,a,o)},i.length>0&&(o=!1,a=i[0],n.refresh()),n.sortClick=function(e){i.indexOf(e)!==-1&&(e===a&&(o=!o),a=e,n.refresh())},n.showSortOrder=function(e,n){return e===a&&o===n},n.headerClass=function(e){var n=[];return i.indexOf(e)!==-1&&n.push("sortable"),e===a&&n.push("sorted"),n},n.cellContents=function(n,t){return angular.isDefined(n.filter)?e(n.filter)(t[n.field]):t[n.field]},n.totalItems=function(){return n.contents.length},n.numberOfPages=function(){return Math.ceil(n.contents.length/n.pageSize)},n.pageStart=function(){return n.page*n.pageSize+1},n.pageEnd=function(){var e=(n.page+1)*n.pageSize;return e>n.contents.length&&(e=n.contents.length),e},n.goToPage=function(e){n.page=e}}var t={restrict:"E",scope:{columns:"=",contents:"=",filters:"="},link:n,templateUrl:"app/triangular/components/table/table-directive.tmpl.html"};return t}e.$inject=["$filter"],angular.module("triangular.components").directive("triTable",e)}(),function(){"use strict";function e(){function e(e,n){if(e&&e.length>0)return n=+n,e.slice(n)}return e}angular.module("triangular.components").filter("startFrom",e)}(),function(){"use strict";function e(e){function n(n){return e.trustAsHtml("<div style=\"background-image: url('"+n+"')\"/>")}return n}e.$inject=["$sce"],angular.module("triangular.components").filter("tableImage",e)}(),function(){"use strict";function e(e,n,t,r,i){function a(){r.go("triangular-no-scroll.email.inbox"),s.close()}function o(){t("notifications").close()}var s=this;s.close=o,s.currentTab=0,s.notificationGroups=[{name:"Twitter",notifications:[{title:"Mention from oxygenna",icon:"fa fa-twitter",iconColor:"#55acee",date:moment().startOf("hour")},{title:"Oxygenna",icon:"fa fa-twitter",iconColor:"#55acee",date:moment().startOf("hour")},{title:"Oxygenna",icon:"fa fa-twitter",iconColor:"#55acee",date:moment().startOf("hour")},{title:"Followed by Oxygenna",icon:"fa fa-twitter",iconColor:"#55acee",date:moment().startOf("hour")}]},{name:"Server",notifications:[{title:"Server Down",icon:"zmdi zmdi-alert-circle",iconColor:"rgb(244, 67, 54)",date:moment().startOf("hour")},{title:"Slow Response Time",icon:"zmdi zmdi-alert-triangle",iconColor:"rgb(255, 152, 0)",date:moment().startOf("hour")},{title:"Server Down",icon:"zmdi zmdi-alert-circle",iconColor:"rgb(244, 67, 54)",date:moment().startOf("hour")}]},{name:"Sales",notifications:[{title:"Triangular Admin $21",icon:"zmdi zmdi-shopping-cart",iconColor:"rgb(76, 175, 80)",date:moment().startOf("hour")},{title:"Lambda WordPress $60",icon:"zmdi zmdi-shopping-cart",iconColor:"rgb(76, 175, 80)",date:moment().startOf("hour")},{title:"Triangular Admin $21",icon:"zmdi zmdi-shopping-cart",iconColor:"rgb(76, 175, 80)",date:moment().startOf("hour")},{title:"Triangular Admin $21",icon:"zmdi zmdi-shopping-cart",iconColor:"rgb(76, 175, 80)",date:moment().startOf("hour")},{title:"Lambda WordPress $60",icon:"zmdi zmdi-shopping-cart",iconColor:"rgb(76, 175, 80)",date:moment().startOf("hour")},{title:"Triangular Admin $21",icon:"zmdi zmdi-shopping-cart",iconColor:"rgb(76, 175, 80)",date:moment().startOf("hour")}]}],s.openMail=a,s.settingsGroups=[{name:"Account Settings",settings:[{title:"Show my location",icon:"zmdi zmdi-pin",enabled:!0},{title:"Show my avatar",icon:"zmdi zmdi-face",enabled:!1},{title:"Send me notifications",icon:"zmdi zmdi-notifications-active",enabled:!0}]},{name:"Chat Settings",settings:[{title:"Show my username",icon:"zmdi zmdi-account",enabled:!0},{title:"Make my profile public",icon:"zmdi zmdi-account-box",enabled:!1},{title:"Allow cloud backups",icon:"zmdi zmdi-cloud-upload",enabled:!0}]}],s.statisticsGroups=[{name:"User Statistics",stats:[{title:"Storage Space (120/160 Gb)",mdClass:"md-primary",value:60},{title:"Bandwidth Usage (10/100 Gb)",mdClass:"md-accent",value:10},{title:"Memory Usage (1/8 Gb)",mdClass:"md-warn",value:100}]},{name:"Server Statistics",stats:[{title:"Storage Space (120/160 Gb)",mdClass:"md-primary",value:60},{title:"Bandwidth Usage (10/100 Gb)",mdClass:"md-accent",value:10},{title:"Memory Usage (1/8 Gb)",mdClass:"md-warn",value:100}]}],e.$on("triSwitchNotificationTab",function(e,n){s.currentTab=n}),n({method:"GET",url:i.url+"email/inbox"}).then(function(e){s.emails=e.data.slice(1,20)})}e.$inject=["$scope","$http","$mdSidenav","$state","API_CONFIG"],angular.module("triangular.components").controller("NotificationsPanelController",e)}(),function(){"use strict";function e(){function e(e){o.push(e)}function n(e){return i(o,e)}function t(e,n){a(o,e,n)}function r(){for(var e=o.length-1;e>=0;e--)o.splice(e,1)}function i(e,n){var t;if(e instanceof Array)for(var r=0;r<e.length;r++){if(e[r].id===n){t=e[r];break}if(angular.isDefined(e[r].children)&&(t=i(e[r].children,n),angular.isDefined(t)))break}return t}function a(e,n,t,r){if(e instanceof Array)for(var i=e.length-1;i>=0;i--){if(e[i].state===n&&angular.equals(e[i].params,t)){e.splice(i,1),isNaN(r)||o[r].children.length||o.splice(r,1);break}angular.isDefined(e[i].children)&&a(e[i].children,n,t,i)}}var o=[];this.addMenu=e,this.removeMenu=t,this.removeAllMenu=r,this.$get=function(){return{menu:o,addMenu:e,getMenu:n,removeMenu:t,removeAllMenu:r}}}angular.module("triangular.components").provider("triMenu",e)}(),function(){"use strict";function e(e,t,r){function i(e,n){t(n);var i=n.controller("mdTheme"),a=r.getThemeHue(i.$mdTheme,"primary","default"),o=r.rgba(a.value);n.css({"background-color":o}),n.children("md-content").css({"background-color":o})}var a={restrict:"E",template:'<md-content><tri-menu-item permission permission-only="item.permission" ng-repeat="item in triMenuController.menu | orderBy:\'priority\'" item="::item"></tri-menu-item></md-content>',scope:{},controller:n,controllerAs:"triMenuController",link:i};return a}function n(e){var n=this;n.menu=e.menu}e.$inject=["$location","$mdTheming","triTheming"],n.$inject=["triMenu"],angular.module("triangular.components").directive("triMenu",e)}(),function(){"use strict";function e(){var e={restrict:"E",require:"^triMenu",scope:{item:"="},template:'<div ng-include="::triMenuItem.item.template"></div>',controller:n,controllerAs:"triMenuItem",bindToController:!0};return e}function n(e,n,t,r,i,a,o){function s(){c.item.active=r.includes(c.item.state,c.item.params),c.item.active&&(o.reset(),o.addCrumb(c.item),e.$emit("openParents"))}function l(){e.$parent.$parent.$broadcast("toggleDropdownMenu",c.item,!c.item.open)}function d(){if(angular.isDefined(c.item.click))n.invoke(c.item.click);else{var e=angular.isUndefined(c.item.params)?{}:c.item.params;if(angular.isDefined(c.item.openInNewTab)&&c.item.openInNewTab===!0){var i=r.href(c.item.state,e);a.open(i,"_blank")}else r.go(c.item.state,e)}c.item.active=!0,t("left").close()}var c=this;switch(c.item.template="app/triangular/components/menu/menu-item-"+c.item.type+".tmpl.html",c.item.type){case"dropdown":c.item.children=i("orderBy")(c.item.children,"priority"),c.toggleDropdownMenu=l,e.$on("toggleDropdownMenu",function(e,n,t){c.item===n?c.item.open=t:c.item.open=!1}),e.$on("openParents",function(){c.item.open=!0,o.addCrumb(c.item)});break;case"link":c.openLink=d,s(r.current.name,r.params),e.$on("$stateChangeSuccess",function(e,n,t){s(n.name,t)})}}n.$inject=["$scope","$injector","$mdSidenav","$state","$filter","$window","triBreadcrumbsService"],angular.module("triangular.components").directive("triMenuItem",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:n,controllerAs:"vm",template:'<div flex class="loader padding-100" ng-show="vm.isActive()" layout="column" layout-fill layout-align="center center"><h3 class="md-headline">{{vm.triSettings.name}}</h3><md-progress-linear md-mode="indeterminate"></md-progress-linear></div>',restrict:"E",replace:!0,scope:{}};return e}function n(e,n,t){var r=this;r.triSettings=t,r.isActive=n.isActive}n.$inject=["$rootScope","triLoaderService","triSettings"],angular.module("triangular.components").directive("triLoader",e)}(),function(){"use strict";function e(e){function n(){return r}function t(n){r=n,e.$broadcast("loader",r)}var r=!1;return{isActive:n,setLoaderActive:t}}e.$inject=["$rootScope"],angular.module("triangular.components").factory("triLoaderService",e)}(),function(){"use strict";function e(e,n){var t=this;t.name=e.name,t.copyright=e.copyright,t.layout=n.layout,t.version=e.version}e.$inject=["triSettings","triLayout"],angular.module("triangular.components").controller("FooterController",e)}(),function(){"use strict";function e(e){function n(n){this.breadcrumbs.crumbs.unshift(n),e.$emit("changeTitle")}function t(){this.breadcrumbs.crumbs=[]}var r=[];return{breadcrumbs:{crumbs:r},addCrumb:n,reset:t}}e.$inject=["$rootScope"],angular.module("triangular.components").factory("triBreadcrumbsService",e)}(),function(){"use strict";angular.module("salesreceipt",[])}(),function(){"use strict";function e(e,r,i,a,o,s,l,d,c,m,u,p,g,f,h){function v(){r.promise=o.GetSettings(),r.promise.then(function(e){0==e.statuscode&&(r.setting=e.data)})}function b(e){r.disabledChargeButton=!0,l(function(){r.declined_message=""}),r.showProgress=!0;var n,t={};if(null!=r.invoice.BillEmail&&(n=r.invoice.BillEmail.Address),"creditcard"==e)t=r.usedCardProfile?{paymentinfo:{Amount:r.totalAmount,Streetaddress:r.payform.streetaddress,Zipcode:r.payform.zipcode,TransType:"profile_sale",Type:"salesreceipt",ProfileId:r.profile_id,Custom:{CustomerRef:{Id:r.invoice.CustomerRef.value,Name:r.invoice.CustomerRef.name,Email:n},SalesReceipt:r.invoice}}}:{paymentinfo:{Amount:r.totalAmount,Streetaddress:r.payform.streetaddress,Zipcode:r.payform.zipcode,TransType:"sale",Type:"salesreceipt",Cardinfo:{Cardholder:r.payform.cardholder,CreditCardNumber:r.payform.cardnumber,Month:r.payform.months,Year:r.payform.years,CCV2:r.payform.cc2,CardType:r.ccinfo.type,CreateCardProfile:r.payform.card_profile},Custom:{CustomerRef:{Id:r.invoice.CustomerRef.value,Name:r.invoice.CustomerRef.name,Email:n},SalesReceipt:r.invoice}}};else if("cash"==e)t={paymentinfo:{Amount:r.totalAmount,Streetaddress:r.payform.streetaddress,Zipcode:r.payform.zipcode,TransType:"cash",Type:"salesreceipt",Custom:{CustomerRef:{Id:r.invoice.CustomerRef.value,Name:r.invoice.CustomerRef.name,Email:n},SalesReceipt:r.invoice}}};else if("ach"==e)t=r.usedCardProfile?{paymentinfo:{Amount:r.totalAmount,Streetaddress:r.payform.streetaddress,Zipcode:r.payform.zipcode,TransType:"profile_sale",Type:"salesreceipt",ProfileId:r.profile_id,Custom:{CustomerRef:{Id:r.invoice.CustomerRef.value,Name:r.invoice.CustomerRef.name,Email:n},SalesReceipt:r.invoice}}}:{paymentinfo:{Amount:r.totalAmount,Streetaddress:r.payform.streetaddress,Zipcode:r.payform.zipcode,TransType:"ach_sale",Type:"salesreceipt",Achinfo:{account:r.payform.account,name:r.payform.name,bankaba:r.payform.bankaba,CreateCardProfile:r.payform.card_profile},Custom:{CustomerRef:{Id:r.invoice.CustomerRef.value,Name:r.invoice.CustomerRef.name,Email:n},SalesReceipt:r.invoice}}};else if("bolt"==e)t={paymentinfo:{Amount:r.totalAmount,TransType:"bolt",Type:"salesreceipt",Token:r.boltToken,Custom:{CustomerRef:{Id:r.invoice.CustomerRef.value,Name:r.invoice.CustomerRef.name,Email:n},SalesReceipt:r.invoice}}};else if("triposipp350"==e){var i="",a="",o=T.xml_str2json(r.triPOSSaleInfo._processor.processorRawResponse);a=r.triPOSSaleInfo.paymentType.toLowerCase(),"credit"==a?i=o.CreditCardSaleResponse.Response:"debit"==a?i=o.DebitCardSaleResponse.Response:"gift"==a&&(i=o.GiftCardSaleResponse.Response);var d,m=r.triPOSSaleInfo.accountNumber,p=m.substr(m.length-4),g="",f="";1==r.triPOSSaleInfo.isApproved?(d="approved",f=r.triPOSSaleInfo._processor.hostResponseCode+"/"+r.triPOSSaleInfo._processor.hostResponseMessage):(d="declined",g=r.triPOSSaleInfo._processor.processorResponseMessage,f=r.triPOSSaleInfo._processor.expressResponseCode+"/"+r.triPOSSaleInfo._processor.expressResponseMessage),t={paymentinfo:{Amount:r.totalAmount,TransType:"triposipp350_"+a,Type:"salesreceipt",Custom:{CustomerRef:{Id:r.invoice.CustomerRef.value,Name:r.invoice.CustomerRef.name,Email:n},ProcessorInfo:{processorRawResponse:{RawResponse:i,MerchantId:r.triPOSSaleInfo.merchantId,TerminalId:r.triPOSSaleInfo.terminalId,ApprovalNumber:r.triPOSSaleInfo.approvalNumber,EntryMode:r.triPOSSaleInfo.entryMode,paymentType:r.triPOSSaleInfo.paymentType,ResponseCode:f,PinVerified:r.triPOSSaleInfo.pinVerified},transactionId:r.triPOSSaleInfo.transactionId,CardHolder:r.triPOSSaleInfo.cardHolderName,CreditCardNumber:m,CardType:r.triPOSSaleInfo.cardLogo,last4Digits:p,TransStatus:d,StatusMessage:g},SalesReceipt:r.invoice}}}}r.promise=s.CCSale(t),r.promise.then(function(e){r.disabledChargeButton=!1,0==e.statuscode?(r.IsPaidInvoice=!0,r.totalBalance=0,r.payform={},r.transactionResponse=e.data,r.showEmailDialog=!1,"declined"==r.transactionResponse.status&&c.showToast(e.statusmessage,"bottom right","error"),0==r.setting.InvoiceReceiptDialog&&"declined"!=r.transactionResponse.status&&(c.showToast(e.statusmessage,"bottom right","success"),u.reload()),1==r.setting.InvoiceReceiptDialog&&(r.isPaymentSuccess=!0,r.printDialog())):1==e.statuscode&&(r.boltProcessStatus="",l(function(){r.declined_message=e.statusmessage,r.checkoutForm.$setUntouched(),r.checkoutForm.$setPristine()}),r.isPaymentSuccess=!1,r.transactionResponse={}),r.showProgress=!1})}function y(e){r.ccprofiles={},r.showProfileProgress=!0,r.promise=s.ProfileGet({customer_id:e}),r.promise.then(function(e){0==e.statuscode&&(e.data.total_item>0?(r.ccprofiles=e.data.item,r.paymentForm={CreditCardForm:!0,ProfileDropForm:!0}):l(function(){r.paymentForm={CreditCardForm:!0,ProfileDropForm:!1}}),r.ccprofiles.length>0&&r.ccprofiles.splice(0,0,JSON.parse('{"profile_id":0, "last_digits":"0"}'))),r.showProfileProgress=!1})}function w(){r.swipeText="Please swipe your card now.",r.showSwiperBox=!1}function C(){r.showSwiperProgress=!0,l(function(){r.swipeText="Card swipe failed. Please re-swipe.",r.showSwiperProgress=!1,r.swipeInfo=""},600)}function S(e){return!0}function x(){r.swipeText="Please swipe your card now.";var e=r.swipeInfo,n=e.split("^");if(e.indexOf("&")>0){for(var t=0,i=0,a=0,o=e.length;a<o;a++)"^"==e.charAt(a)?t++:"&"==e.charAt(a)&&i++;i>t&&(n=e.split("&"))}var s=n[0],d=0,c=0,m=0,u="",p=e.substring(0,1);if("%"==p&&(p=e.substring(1,2)),"B"!=p&&"b"!=p)return void C();if(s=s.substring(2,s.length),s=s,!S(s))return void C();if(n.length>1){u=n[1];var g=u.split("/");g.length>1&&(u=g[1]+" "+g[0]),m=n[2].substring(0,2),d=n[2].substring(2,4);var f=(new Date).getFullYear();f=f.toString();var c=f.substring(0,2)+m}r.payform={cc2:"",cardnumber:"",cardholder:"",months:"",years:""},r.payform={cc2:"",cardnumber:s,cardholder:u,months:d,years:c,track2:r.swipeInfo},r.showStatic=!1,r.showAnimation=!0,r.swipeText="Please swipe your card now.",l(function(){w()},2400)}r.innerHeight=e.innerHeight+0;var I=this,T=new X2JS;if(r.currentYear=(new Date).getFullYear(),r.currentMonth=(new Date).getMonth()+1,r.months=d.DATETIME_FORMATS.MONTH,r.cardlogos=[{id:"visa",title:"Visa",src:"visa.png"},{id:"master",title:"Master",src:"mastercard.png"},{id:"discover",title:"Discover",src:"discover.png"},{id:"amex",title:"Amex",src:"amex.png"}],r.paymentMode="creditcard",r.ccinfo={type:void 0},r.showProgress=!1,r.totalAmount=r.invoice.TotalAmt,r.isAmountInvalid=!1,r.disabledChargeButton=!1,r.showSwiperBox=!1,r.invoiceIds=[],r.invoiceAmount=[],r.payform={},r.declined_message="",r.companyInfo={},r.isPaymentSuccess=!1,r.transactionResponse={},r.ccprofiles={},r.ccprofile=JSON.parse('{"profile_id":0, "last_digits":"0"}'),r.profile_id={},r.usedCardProfile=!1,r.openEmailReceipt=!1,r.requiredAccountNo=!1,r.requiredBankaba=!1,r.requiredAccountName=!1,r.requiredMonthField=!0,r.requiredYearField=!0,r.requiredCreditCardNumber=!0,r.requiredCardHolderName=!0,r.ccPattern=/^[0-9]+$/,r.boltProcessStatus="",r.boltToken="",r.enableBolt=!1,r.activePaymentMethods={creditcard:!1,ach:!1,bolt:!1,tripos_ipp350:!1,cash:!1},r.boltConfig={auth:"",merchant_id:"",hsn:""},r.triPOSiPP350={developer_key:"",developer_secret:"",sevice_address:""},v(),r.paymentInfo.configuration.hasOwnProperty("hardware")&&(r.paymentInfo.configuration.hardware.hasOwnProperty("triposipp350")&&(r.activePaymentMethods.tripos_ipp350=!0,f.config.serviceAddress=r.paymentInfo.configuration.hardware.triposipp350.service_address,f.config.tpAuthorizationCredential=r.paymentInfo.configuration.hardware.triposipp350.developer_key,f.config.tpAuthorizationSecret=r.paymentInfo.configuration.hardware.triposipp350.developer_secret,f.config.application_id=parseInt(r.paymentInfo.configuration.ApplicationID),l(function(){r.tripos_searchlane_progress=!0,f.getLaneInfo(f.config,function(e){r.tripos_searchlane_progress=!1;var n=e.data;r.triPOSLaneInfo=n,r.triPOSLaneInfo._hasErrors,1==r.triPOSLaneInfo._hasErrors?r.triPOSLaneInfo.errorMessage=n._errors[0].developerMessage:r.showtriPOSLaneInfo=!0})},2e3)),r.paymentInfo.configuration.hardware.hasOwnProperty("bolt"))){r.enableBolt=!0,r.activePaymentMethods.bolt=!0,r.boltConfig.auth=r.paymentInfo.configuration.hardware.bolt.auth,r.boltConfig.merchant_id=r.paymentInfo.configuration.hardware.bolt.merchant_id;var D,P=c.getUserInfo();if(null!=P&&(null==P.id&&void 0==P.id||(D=P.id)),r.paymentInfo.configuration.hardware.bolt.hasOwnProperty("terminals")){var _=r.paymentInfo.configuration.hardware.bolt.terminals,k=!0;null!=D&&angular.forEach(_,function(e,n){if(k){var t=e.users;t.indexOf(D.toString())!==-1&&(r.boltConfig.hsn=n,k=!1)}})}}switch(r.paymentInfo.type){case"cardconnect":r.paymentMode="creditcard",r.activePaymentMethods.creditcard=!0,r.activePaymentMethods.cash=!1,r.paymentInfo.hasOwnProperty("configuration")&&r.paymentInfo.configuration.hasOwnProperty("supported_methods")&&r.paymentInfo.configuration.supported_methods.hasOwnProperty("ach")&&(r.activePaymentMethods.ach=r.paymentInfo.configuration.supported_methods.ach);
break;case"vantiv":r.activePaymentMethods.tripos_ipp350?r.paymentMode="tripos_ipp350":r.paymentMode="cash",r.activePaymentMethods.cash=!0;break;case"paypal":r.paymentMode="cash",r.activePaymentMethods.cash=!0}r.changePaymentMode=function(e){switch(r.ccprofile=JSON.parse('{"profile_id":0, "last_digits":"0"}'),r.paymentMode=e,r.UpdateCCFields({profile_id:0}),e){case"ach":r.requiredAccountNo=!0,r.requiredBankaba=!0,r.requiredAccountName=!0,r.requiredMonthField=!1,r.requiredYearField=!1,r.requiredCreditCardNumber=!1,r.requiredCardHolderName=!1;break;case"creditcard":r.requiredAccountNo=!1,r.requiredBankaba=!1,r.requiredAccountName=!1,r.requiredMonthField=!0,r.requiredYearField=!0,r.requiredCreditCardNumber=!0,r.requiredCardHolderName=!0}},r.promise=o.GetCompanyInfo(),r.promise.then(function(e){0==e.statuscode&&(r.companyInfo=e.data)}),I.customer_id=r.invoice.CustomerRef.value,y(I.customer_id),r.ProfileDelete=function(){var e=a.confirm().title("Are you sure you want to delete?").textContent("").ariaLabel("Confirmation").ok("Confirm").cancel("Cancel");a.show(e).then(function(){var e={id:r.profile_id};r.promise=s.ProfileDelete(e),r.promise.then(function(e){0==e.statuscode?(c.showToast(e.statusmessage,"bottom right","success"),r.ccprofile="",r.UpdateCCFields(void 0),y(I.customer_id)):c.showToast(e.statusmessage,"bottom right","error")})},function(){})},r.UpdateCCFields=function(){var e={};""!=r.ccprofile.profile_id&&(e=h("filter")(r.ccprofiles,{profile_id:r.ccprofile.profile_id})[0]),r.usedCardProfile=!1,r.payform={cc2:"",cardnumber:"",cardholder:"",streetaddress:"",zipcode:"",bankaba:"",account:"",name:""},0!=e.profile_id&&void 0!=e.profile_id?(r.profile_id=e.profile_id,r.payform={cardnumber:"xxxxxxxxxxxx"+e.last_digits,cardholder:e.cardholder_name,bankaba:"xxxxxxxxxxxx"+e.last_digits,account:"xxxxxxxxxxxx",name:e.cardholder_name},r.ccinfo={type:angular.lowercase(e.card_type)},r.usedCardProfile=!0,r.requiredMonthField=!1,r.requiredYearField=!1,r.ccPattern=/^[a-zA-Z0-9]*$/):("creditcard"==r.paymentMode?(r.requiredMonthField=!0,r.requiredYearField=!0,r.requiredAccountNo=!1,r.requiredBankaba=!1):"ach"==r.paymentMode&&(r.requiredMonthField=!1,r.requiredYearField=!1,r.requiredAccountNo=!0,r.requiredBankaba=!0),r.ccPattern=/^[0-9]+$/)},r.submit=function(e){b(e)},r.processBolt=function(){r.disabledChargeButton=!0;var e=parseFloat(r.totalAmount);r.showProgress=!0,r.boltProcessStatus="Connecting Bolt P2PE.......";var n=localStorage.getItem("bolt_type"),t={auth:r.boltConfig.auth,merchant_id:r.boltConfig.merchant_id,hsn:r.boltConfig.hsn,amount:e,type:void 0==n?"swipe":n};r.promise=s.BoltReadCard(t),r.promise.then(function(e){0==e.statuscode?(r.boltToken=e.data.token,r.boltProcessStatus="Process to CardConnect......",b("bolt")):(r.boltProcessStatus=e.statusmessage,r.showProgress=!1,l(function(){r.boltProcessStatus="",r.disabledChargeButton=!1},5e3))})},r.processTriPOSiPP350=function(){r.disabledChargeButton=!0,r.showProgress=!0,r.triPOSSaleInfo="";var e=parseFloat(r.totalAmount),n=parseInt(r.triPOSLaneInfo.ipLanes[0].laneId),t={laneId:n,transactionAmount:e,address:{BillingAddress1:"",BillingAddress2:"",BillingCity:"",BillingPostalCode:"",BillingState:""},cardHolderPresentCode:null,clerkNumber:"Clerk101",commercialCardCustomerCode:null,configuration:{AllowPartialApprovals:!1,CheckForDuplicateTransactions:!0,CurrencyCode:"Usd",MarketCode:"Retail",PromptForSignature:null},convenienceFeeAmount:null,healthcare:null,lodging:null,referenceNumber:"",salesTaxAmount:null,shiftId:"ShiftA",ticketNumber:"",tipAmount:null};f.makeSaleRequest(f.config,t,function(e){r.showProgress=!1,r.disabledChargeButton=!1;var n=e.data;r.triPOSSaleInfo=n,1==r.triPOSSaleInfo._hasErrors?(r.triPOSSaleInfo.errorMessage=n._errors[0].developerMessage,l(function(){r.triPOSSaleInfo=""},5e3)):b("triposipp350")})},r.print=function(){var e="transaction.print.html",n=r.transactionResponse.trans_type.search("triposipp350");0==n&&(e="transaction.triposipp350.print.html"),m.print("assets/"+e,{transactionResponse:r.transactionResponse,companyInfo:r.companyInfo})},r.printDialog=function(){var e="transaction.print.html",t=r.transactionResponse.trans_type.search("triposipp350");0==t&&(e="transaction.triposipp350.print.html"),a.show({scope:r,preserveScope:!0,parent:angular.element(document.body),templateUrl:"assets/"+e,clickOutsideToClose:!0,fullscreen:!0,controller:n}).then(function(){},function(){0==r.openEmailReceipt&&u.reload()})},r.sendReceiptDialog=function(){console.log("i am in sendReceiptDialog"),a.show({controller:t,templateUrl:"app/modules/statement/sendConfirmationDialog.html",parent:angular.element(document.body),scope:r.$new(),clickOutsideToClose:!0}).then(function(e){r.openEmailReceipt=!1,r.printDialog()},function(){r.openEmailReceipt=!1,r.printDialog()})},r.emailReceipt=function(e,n){r.settings={InvoiceContacts:{sender_email:"",sender_name:"",cc_email:[],bcc_email:[],to_email:[],save_email_erp:!1},subject:"",template_id:"",title:"Send Reciept"},r.openEmailReceipt=!0;var t=e.customer_email;r.promise=o.GetSettings(),r.promise.then(function(i){0==i.statuscode&&(r.settings=i.data,r.settings.title="Send Receipt",r.settings.transaction=e,r.settings.companyInfo=r.companyInfo.company,r.settings.receipt_type=n,r.settings.InvoiceContacts.to_email=[],""!=t&&r.settings.InvoiceContacts.to_email.push(t),r.sendReceiptDialog())})},r.cancel=function(){a.hide()},r.showSwipe=function(){r.showSwiperBox=!0,r.swipeInfo="",r.showStatic=!0,r.showAnimation=!1,r.swipeText="Please swipe your card now.",document.getElementById("swipeInfo").focus()},r.swipeText="Please swipe your card now.",r.swipeInfo="",r.showSwiperProgress=!1,r.showStatic=!0,r.showAnimation=!1,r.cancel=function(){a.hide()},r.handle_swipe=function(){r.swipeText="Please swipe your card now.",l(function(){x()},400)}}function n(e,n,t){}function t(e,n,t,r,i,a,o,s,l,d){var c=this;o.disabledSubmitButton=!1,o.showCCSIcon="zmdi zmdi-account-add",o.showCCS=!1,o.toggleCCS=function(){o.showCCS=!o.showCCS,o.showCCSIcon=o.showCCS?"zmdi zmdi-account":"zmdi zmdi-account-add"},o.cancel=function(){n.hide()},o.validateChip=function(e,n){if(e){var t=/^[_a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/;t.test(e)||("bcc"==n&&o.settings.InvoiceContacts.bcc_email.pop(),"cc"==n&&o.settings.InvoiceContacts.cc_email.pop(),"to"==n&&o.settings.InvoiceContacts.to_email.pop()),"to"==n&&(0==o.settings.InvoiceContacts.to_email.length?o.disabledSubmitButton=!0:o.disabledSubmitButton=!1)}},o.cancel=function(){n.hide()},o.submit=function(){o.showProgress=!0,o.disabledSubmitButton=!0;var e={companyInfo:o.settings.companyInfo,transaction:o.settings.transaction,contact:o.settings.InvoiceContacts,receiptType:o.settings.receipt_type};c.promise=d.sendReceipt(e),c.promise.then(function(e){0==e.statuscode?(l.showToast(e.statusmessage,"bottom right","success"),o.showProgress=!1,o.openEmailReceipt=!1,n.hide()):(l.showToast(e.statusmessage,"bottom right","error"),o.showProgress=!1)})}}e.$inject=["$window","$scope","$rootScope","$mdDialog","SettingModel","InvoiceModel","$timeout","$locale","Clique","printer","$state","triBreadcrumbsService","dataService","VantivTriPOSiPP350","$filter"],n.$inject=["$window","$scope","$mdDialog"],t.$inject=["$timeout","$mdDialog","$filter","triSkins","$window","$rootScope","$scope","SettingModel","Clique","TransactionModel"],angular.module("salesreceipt").controller("PaymentSaleReceiptController",e).filter("range",function(){var e=function(e,n,t){for(var r=n;r<=t;r++)e.push(r);return e};return e}).directive("creditCardType",function(){var e={require:"ngModel",link:function(e,n,t,r){r.$parsers.unshift(function(n){return e.ccinfo.type=/^5[1-5]/.test(n)?"master":/^4/.test(n)?"visa":/^3[47]/.test(n)?"amex":/^6011|65|64[4-9]|622(1(2[6-9]|[3-9]\d)|[2-8]\d{2}|9([01]\d|2[0-5]))/.test(n)?"discover":void 0,r.$setValidity("invalid",!!e.ccinfo.type),n})}};return e}).directive("autoFocus",["$timeout",function(e){return{restrict:"AC",link:function(n,t){e(function(){t[0].focus()},0)}}}])}(),function(){"use strict";angular.module("invoice",["pdfjsViewer"])}(),function(){"use strict";function e(e,n,t,r,i,a,o,s,l){function d(n){if(0==n.to.length){var t={id:n.invoice_id,type:"notsent",message:"Client Email address not found"};e.invoiceMessages.push(t),m(n)}else e.currecntInvoice=n.invoice_id,e.promise=i.SendInvoice(n),e.promise.then(function(t){if(console.log("TCL: sendInvoice -> response",t),0==t.statuscode){var r={id:n.invoice_id,type:"processed",message:"Processed"};e.invoiceMessages.push(r)}else{var r={id:n.invoice_id,type:"notsent",message:t.statusmessage};e.invoiceMessages.push(r)}m(n)})}function c(){e.promise=r.GetSettings(),e.promise.then(function(n){0==n.statuscode&&(e.settings=n.data)})}function m(n){e.sentInvoice.push(n.invoice_id),e.sentInvoice.length==e.selectedInvoiceData.length&&(e.showProgress=!1,e.currecntInvoice=0,a(function(){e.refreshInvoiceGrid(),t.hide()},3e3)),u(),a(function(){e.gotoAnchor(n.invoice_id)},500)}function u(){var n=100/e.selectedInvoiceData.length;e.progressValue=parseInt(e.sentInvoice.length*n)}e.settings={},e.sentInvoice=[],e.showProgress=!1,e.progressValue=0,e.currecntInvoice,e.invoiceMessages=[],e.templateInfo,e.selecttemplate,n.selectedTemplate,n.customerEmail="",c(),e.sprintName="Sprint 3",e.sprintDesc="Learn directives",e.gotoAnchor=function(e){var n="anchor"+e;o.hash()!==n?o.hash("anchor"+e):s()},angular.forEach(e.selectedInvoiceData,function(e,t){null!=e.BillEmail&&(n.customerEmail=e.BillEmail.Address)}),e.SelectedTemplateValue=function(e){n.email_template=e},e.send=function(){if(void 0==n.email_template&&(n.email_template={},n.email_template.name="",n.email_template.subject="",n.email_template.body=""),e.selectedTemplate,"template_email"in e.settings.InvoiceContacts==1)if(e.settings.InvoiceContacts.template_email.length>0){console.log("test2");for(var t=0;t<e.settings.InvoiceContacts.template_email.length;t++)1==e.settings.InvoiceContacts.template_email[t].isSelected&&n.email_template.id==e.settings.InvoiceContacts.template_email.id&&(n.email_template=e.settings.InvoiceContacts.template_email,n.email_template.name=e.settings.InvoiceContacts.template_email[t].name,n.email_template.subject=e.settings.InvoiceContacts.template_email[t].subject,n.email_template.body=e.settings.InvoiceContacts.template_email[t].body)}else n.email_template||(n.email_template=e.settings.InvoiceContacts.template_email,n.email_template.name="",n.email_template.subject="",n.email_template.body="");else n.email_template={},n.email_template.name="",n.email_template.subject="",n.email_template.body="";e.showProgress=!0;var r=0;angular.forEach(e.selectedInvoiceData,function(t,i){e.viewCustomerEmail=n.customerEmail;var o={to:[n.customerEmail],cc:e.settings.InvoiceContacts.cc_email,bcc:e.settings.InvoiceContacts.bcc_email,subject:n.email_template.subject,body:n.email_template.body,sender_name:e.settings.InvoiceContacts.sender_name,sender_email:e.settings.InvoiceContacts.sender_email,invoice_id:t.Id,customer_id:t.CustomerRef.value,invoice_template_id:e.settings.InvoiceTemplateId,color:e.settings.InvoiceTemplateColor,save_email_erp:!1,payment_method_id:e.paymentInfo.id};a(function(){d(o)},r),r+=999})},e.cancel=function(){t.cancel()},e.showInvoiceProgress=function(e){return!0}}e.$inject=["$scope","$rootScope","$mdDialog","SettingModel","InvoiceModel","$timeout","$location","$anchorScroll","$filter"],angular.module("invoice").controller("SendBulkInvoiceController",e).run(["$anchorScroll",function(e){e.yOffset=50}]).filter("parseErrorMessage",["$filter",function(e){return function(n,t){if(n.length>0){var r=e("filter")(n,{id:t})[0];return void 0!=r?r:""}}}]).directive("clickToEdit",["$timeout","$rootScope",function(e,n){return{require:"ngModel",scope:{model:"=ngModel",type:"@type"},replace:!0,transclude:!1,template:'<div class="ng-binding" style="height:50px;"><md-input-container class="hover-edit-trigger" style="width: 220px;"><div class="hover-text-field" ng-show="!editState" ng-click="toggle()" style="width: 235px;">{{model}} <i class="zmdi zmdi-border-color" style="cursor: pointer;"></i></div><input  class="inputText" style="height: 50%;width: 100%;text-align: left;" label="subject" name="customeremail" type="email" ng-model="localModel" ng-enter="save()" ng-show="editState && type == \'inputText\'"/><div ng-messages="sendEmail.customeremail.$error"><div ng-message="email">Please enter a valid email address.</div></div></md-input-container><div class="edit-button-group pull-right" ng-show="editState"><span><i class="zmdi zmdi-check zmdi-hc-2x" ng-click="save()" style="color:#08C65B;cursor: pointer;"></i></span><span>&nbsp;</span><span>&nbsp;</span></div></div>',link:function(t,r,i){t.editState=!1,t.localModel=t.model,t.save=function(){t.model=t.localModel,n.customerEmail=t.model,t.toggle()},t.cancel=function(){t.localModel=t.model,t.toggle()},t.toggle=function(){t.editState=!t.editState;var n=r[0].querySelector("."+t.type);e(function(){t.editState?n.focus():n.blur()},0)}}}}]).directive("ngEnter",function(){return function(e,n,t){n.bind("keydown keypress",function(n){13===n.which&&(e.$apply(function(){e.$eval(t.ngEnter)}),n.preventDefault())})}})}(),angular.module("invoice").factory("BulkPrintInvoices",["$rootScope","$compile","$http","$timeout","$q","InvoiceModel","$sce","printer",function(e,n,t,r,i,a,o,s){var l=function(n){if(n.length>0){var t=n.join(",");e.promise=a.GetInvoicePreviewById(t),e.promise.then(function(n){var t=o.trustAsHtml(n);e.printProcess=!1,s.print("assets/invoice.bulk.print.html",{content:t})})}};return{printInvoice:l}}]),function(){"use strict";function e(e,i,a,o,s,l,d,c,m,u,p,g,f,h,v,b){function y(){i.promise=s.GetSettings(),i.promise.then(function(e){0==e.statuscode&&(i.setting=e.data)})}function w(e){i.disabledChargeButton=!0,d(function(){i.declined_message=""}),i.showProgress=!0;var n=[],t=[],r="",s="",c="";i.selectedInvoiceData.length>0&&angular.forEach(i.selectedInvoiceData,function(e,i){var a=parseFloat(e.ChargeAmount),o=parseInt(e.Id),l={Amount:0,LinkedTxn:[{TxnId:0,TxnLineId:0,TxnType:"Invoice"}]};l.Amount=a,l.LinkedTxn[0].TxnId=o,n.push(l),t.push(e.DocNumber),c=e.CustomerRef.value,r=e.CustomerRef.name,null!=e.BillEmail&&(s=e.BillEmail.Address)});var u={};if("creditcard"==e)u=i.usedCardProfile?{CustomerRef:{value:c,name:r},Line:n,TotalAmt:i.totalAmount,TransType:"profile_sale",ProfileId:i.profile_id,CustomerEmail:s,DocNumber:t,Type:"invoice"}:{CustomerRef:{value:c,name:r},Line:n,TotalAmt:i.totalAmount,TransType:"sale",CardHolder:i.payform.cardholder,CreditCardNumber:i.payform.cardnumber,track2:i.payform.track2,Month:i.payform.months,Exp:i.payform.years,CCV2:i.payform.cc2,StreetAddress:i.payform.streetaddress,Zipcode:i.payform.zipcode,CardProfile:i.payform.card_profile,CustomerEmail:s,DocNumber:t,Type:"invoice"};else if("cash"==e)u={CustomerRef:{value:c,name:r},Line:n,TotalAmt:i.totalAmount,TransType:"cash",CustomerEmail:s,DocNumber:t,Type:"invoice"};else if("ach"==e)u=i.usedCardProfile?{CustomerRef:{value:c,name:r},Line:n,TotalAmt:i.totalAmount,TransType:"profile_sale",ProfileId:i.profile_id,CustomerEmail:s,DocNumber:t,Type:"invoice"}:{CustomerRef:{value:c,name:r},Line:n,TotalAmt:i.totalAmount,TransType:"ach_sale",account:i.payform.account,name:i.payform.name,bankaba:i.payform.bankaba,CardProfile:i.payform.card_profile,CustomerEmail:s,DocNumber:t,Type:"invoice"};else if("bolt"==e)i.totalAmount=a.FinalTotal,console.log(i.totalAmount),u={CustomerRef:{value:c,name:r},Line:n,TotalAmt:i.totalAmount,TransType:"bolt",Token:i.boltToken,CustomerEmail:s,DocNumber:t,Type:"invoice"};else if("triposipp350"==e){var g="",f="",h=x.xml_str2json(i.triPOSSaleInfo._processor.processorRawResponse);f=i.triPOSSaleInfo.paymentType.toLowerCase(),"credit"==f?g=h.CreditCardSaleResponse.Response:"debit"==f?g=h.DebitCardSaleResponse.Response:"gift"==f&&(g=h.GiftCardSaleResponse.Response);var v,b=i.triPOSSaleInfo.accountNumber,y=b.substr(b.length-4),w="",C="";1==i.triPOSSaleInfo.isApproved?(v="approved",C=i.triPOSSaleInfo._processor.hostResponseCode+"/"+i.triPOSSaleInfo._processor.hostResponseMessage):(v="declined",w=i.triPOSSaleInfo._processor.processorResponseMessage,C=i.triPOSSaleInfo._processor.expressResponseCode+"/"+i.triPOSSaleInfo._processor.expressResponseMessage),u={CustomerRef:{value:c,name:r},Line:n,TotalAmt:i.triPOSSaleInfo.approvedAmount,TransType:"triposipp350_"+f,ProcessorInfo:{processorRawResponse:{RawResponse:g,MerchantId:i.triPOSSaleInfo.merchantId,TerminalId:i.triPOSSaleInfo.terminalId,ApprovalNumber:i.triPOSSaleInfo.approvalNumber,EntryMode:i.triPOSSaleInfo.entryMode,paymentType:i.triPOSSaleInfo.paymentType,ResponseCode:C,PinVerified:i.triPOSSaleInfo.pinVerified},transactionId:i.triPOSSaleInfo.transactionId,CardHolder:i.triPOSSaleInfo.cardHolderName,CreditCardNumber:b,CardType:i.triPOSSaleInfo.cardLogo,last4Digits:y,TransStatus:v,StatusMessage:w},CustomerEmail:s,DocNumber:t,Type:"invoice"}}i.promise=l.CCPartialSale(u),i.promise.then(function(e){i.disabledChargeButton=!1,0==e.statuscode?(i.IsPaidInvoice=!0,i.totalBalance=0,i.payform={},i.isPaymentSuccess=!0,i.transactionResponse=e.data,i.showEmailDialog=!1,"declined"==i.transactionResponse.status&&m.showToast(e.statusmessage,"bottom right","error"),0==i.setting.InvoiceReceiptDialog&&"declined"!=i.transactionResponse.status&&(m.showToast(e.statusmessage,"bottom right","success"),p.go("triangular.invoice-list")),1==i.setting.InvoiceReceiptDialog&&i.printDialog()):1==e.statuscode&&(i.boltProcessStatus="",o.show({parent:angular.element(document.body),template:'<md-dialog aria-label="List dialog">  <md-dialog-content class="md-padding" palette-background="red:500">    <b>Transaction declined</b>    <p>'+e.statusmessage+"</p>  </md-dialog-content></md-dialog>",clickOutsideToClose:!0,escapeToClose:!0}),d(function(){i.checkoutForm.$setUntouched(),i.checkoutForm.$setPristine()}),i.isPaymentSuccess=!1,i.transactionResponse={}),i.showProgress=!1})}function C(e){i.showProfileProgress=!0,i.promise=l.ProfileGet({customer_id:e}),i.promise.then(function(e){0==e.statuscode&&(e.data.total_item>0?(i.ccprofiles=e.data.item,i.countCCProfile=0,i.countACHProfile=0,angular.forEach(i.ccprofiles,function(e,n){"ECHK"!==e.card_type&&i.countCCProfile++,"ECHK"==e.card_type&&i.countACHProfile++}),0==i.countCCProfile&&i.countACHProfile>0&&1==i.activePaymentMethods.ach&&i.changePaymentMode("ach"),i.paymentForm={CreditCardForm:!0,ProfileDropForm:!0}):d(function(){i.paymentForm={CreditCardForm:!0,ProfileDropForm:!1}}),i.ccprofiles.length>0&&i.ccprofiles.splice(0,0,JSON.parse('{"profile_id":0, "last_digits":"0"}'))),i.showProfileProgress=!1})}var S=this;i.innerHeight=e.innerHeight+0,h.defaults.headers.common=[],h.defaults.headers.common.appid="2",h.defaults.headers.common.APPID="2";var x=new X2JS,I=m.getUserInfo();i.selectedInvoiceData=a.dataObj,i.paymentInfo=a.paymentInfo,void 0==i.selectedInvoiceData&&p.go("triangular.invoice-list"),g.reset();var T=[{active:!1,icon:"zmdi zmdi-chart",name:"Invoice Payment.",priority:2,state:"triangular.invoice-list",template:"app/triangular/components/menu/menu-item-link.tmpl.html",type:"link"}];angular.forEach(T,function(e,n){g.addCrumb(e)}),S.fabDirections=["up","down","left","right"],S.fabDirection=S.fabDirections[2],S.fabAnimations=["md-fling","md-scale"],S.fabAnimation=S.fabAnimations[1],S.fabStatuses=[!1,!0],S.fabStatus=S.fabStatuses[0],S.share=!0;var D=["red","pink","purple","deep-purple","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","deep-orange","brown","grey","blue-grey"],P="",_=1;if(i.initRand=function(e,n){_=Math.floor(Math.random()*(n-e+1))+e,P=D[_]},i.getRandomSpan=function(){return P},i.currentYear=(new Date).getFullYear(),i.currentMonth=(new Date).getMonth()+1,i.months=c.DATETIME_FORMATS.MONTH,i.cardlogos=[{id:"visa",title:"Visa",src:"visa.png"},{id:"master",title:"Master",src:"mastercard.png"},{id:"discover",title:"Discover",src:"discover.png"},{id:"amex",title:"Amex",src:"amex.png"}],i.ccinfo={type:void 0},i.showProgress=!1,i.totalAmount=0,i.isAmountInvalid=!1,i.disabledChargeButton=!1,i.invoiceIds=[],i.invoiceAmount=[],i.payform={cardnumber:""},i.cardnumber="",i.ccno={},i.cardnumber_arr=[],i.declined_message="",i.companyInfo={},i.isPaymentSuccess=!1,i.transactionResponse={},i.ccprofiles={},i.ccprofile=JSON.parse('{"profile_id":0, "last_digits":"0"}'),i.profile_id={},i.usedCardProfile=!1,i.openEmailReceipt=!1,i.requiredAccountNo=!1,i.requiredBankaba=!1,i.requiredAccountName=!1,i.requiredMonthField=!0,i.requiredYearField=!0,i.requiredCreditCardNumber=!0,i.requiredCardHolderName=!0,i.boltProcessStatus="",i.boltToken="",i.enableCreditCard=!1,i.enableBolt=!1,i.activePaymentMethods={creditcard:!1,ach:!1,bolt:!1,tripos_ipp350:!1,cash:!1},i.boltConfig={auth:"",merchant_id:"",hsn:""},i.triPOSiPP350={developer_key:"",developer_secret:"",sevice_address:""},i.tripos_searchlane_progress=!1,i.showtriPOSLaneInfo=!1,i.triPOSLaneInfo="",i.triPOSSaleInfo="",i.convfee=!1,i.disableinpt=!1,i.paymentInfo.hasOwnProperty("configuration")&&i.paymentInfo.configuration.hasOwnProperty("hardware")&&(i.paymentInfo.configuration.hardware.hasOwnProperty("triposipp350")&&(i.activePaymentMethods.tripos_ipp350=!0,v.config.serviceAddress=i.paymentInfo.configuration.hardware.triposipp350.service_address,v.config.tpAuthorizationCredential=i.paymentInfo.configuration.hardware.triposipp350.developer_key,v.config.tpAuthorizationSecret=i.paymentInfo.configuration.hardware.triposipp350.developer_secret,v.config.application_id=parseInt(i.paymentInfo.configuration.ApplicationID),d(function(){i.tripos_searchlane_progress=!0,v.getLaneInfo(v.config,function(e){i.tripos_searchlane_progress=!1;var n=e.data;i.triPOSLaneInfo=n,i.triPOSLaneInfo._hasErrors,1==i.triPOSLaneInfo._hasErrors?i.triPOSLaneInfo.errorMessage=n._errors[0].developerMessage:i.showtriPOSLaneInfo=!0})},2e3)),i.paymentInfo.configuration.hardware.hasOwnProperty("bolt"))){i.enableBolt=!0,i.activePaymentMethods.bolt=!0,i.boltConfig.auth=i.paymentInfo.configuration.hardware.bolt.auth,i.boltConfig.merchant_id=i.paymentInfo.configuration.hardware.bolt.merchant_id;var k,I=m.getUserInfo();if(null!=I&&(null==I.id&&void 0==I.id||(k=I.id)),i.paymentInfo.configuration.hardware.bolt.hasOwnProperty("terminals")){var A=i.paymentInfo.configuration.hardware.bolt.terminals,$=!0;null!=k&&angular.forEach(A,function(e,n){if($)for(var t=(e.users,0);t<e.users.length;t++)k==e.users[t].user_id&&(i.boltConfig.hsn=n,$=!1)})}}switch(i.paymentDescription={cash:{icon:"assets/images/icons/icon_cash.png",title:"Cash"},ach:{icon:"assets/images/icons/icon_check.png",title:"eCheck (ACH)"},creditcard:{icon:"assets/images/icons/icon_creditcard.png",title:"CreditCard"},bolt:{icon:"assets/images/icons/icon_bolt.png",title:"Bolt P2PE"}},i.ccPattern=/[0-9-()]*[1-9][0-9-()]*/,i.checkConv=!1,i.paymentInfo.type){case"cardconnect":i.paymentMode="creditcard",i.activePaymentMethods.creditcard=!0,i.activePaymentMethods.cash=!1,i.paymentInfo.hasOwnProperty("configuration")&&i.paymentInfo.configuration.hasOwnProperty("supported_methods")&&i.paymentInfo.configuration.supported_methods.hasOwnProperty("ach")&&(i.activePaymentMethods.ach=i.paymentInfo.configuration.supported_methods.ach);break;case"bridgepay":i.paymentMode="creditcard",i.activePaymentMethods.creditcard=!0,i.activePaymentMethods.cash=!1,i.paymentInfo.hasOwnProperty("configuration")&&i.paymentInfo.configuration.hasOwnProperty("supported_methods")&&i.paymentInfo.configuration.supported_methods.hasOwnProperty("ach")&&(i.activePaymentMethods.ach=i.paymentInfo.configuration.supported_methods.ach);break;case"vantiv":i.activePaymentMethods.tripos_ipp350?i.paymentMode="tripos_ipp350":i.paymentMode="cash",i.activePaymentMethods.cash=!0;break;case"paypal":i.paymentMode="cash",i.activePaymentMethods.cash=!0}i.changePaymentMode=function(e){switch(i.ccprofile=JSON.parse('{"profile_id":0, "last_digits":"0"}'),i.paymentMode=e,i.UpdateCCFields({profile_id:0}),e){case"ach":i.disableinpt=!1,i.convfee=!1,i.requiredAccountNo=!0,i.requiredBankaba=!0,i.requiredAccountName=!0,i.requiredMonthField=!1,i.requiredYearField=!1,i.requiredCreditCardNumber=!1,i.requiredCardHolderName=!1,i.totalAmount=a.FinalTotal,console.log(i.totalAmount);break;case"creditcard":i.checkConv?(i.convfee=!0,console.log("i am here"),i.totalAmount=i.newAmount,i.totalAmount||(i.totalAmount=i.newAmount)):(i.convfee=!1,i.totalAmount=a.FinalTotal),console.log(i.newAmount),console.log(i.totalAmount),i.requiredAccountNo=!1,i.requiredBankaba=!1,i.requiredAccountName=!1,i.requiredMonthField=!0,i.requiredYearField=!0,i.requiredCreditCardNumber=!0,i.requiredCardHolderName=!0;break;case"bolt":i.disableinpt=!1,i.convfee=!1,i.totalAmount=a.FinalTotal,console.log(i.totalAmount)}},y(),i.promise=s.GetCompanyInfo(),i.promise.then(function(e){0==e.statuscode&&(i.companyInfo=e.data)});var R;if(void 0!=i.selectedInvoiceData&&i.selectedInvoiceData.length>0)if(angular.forEach(i.selectedInvoiceData,function(e,n){var t=parseFloat(e.Balance),r=parseInt(e.Id);i.totalAmount+=t,R=e.CustomerRef.value,i.invoiceIds.push(r),a.FinalTotal=i.totalAmount}),console.log(a.FinalTotal),"ConvenienceFee"in i.selectedInvoiceData[0]==1){if(i.selectedInvoiceData[0].ConvenienceFee.length>0)if(1==i.selectedInvoiceData[0].ConvenienceFee[0].is_active)switch(i.hconvFee=!0,i.convfee=!0,1==i.convfee&&(i.disableinpt=!0,i.checkConv=!0),i.convfeeamount=i.selectedInvoiceData[0].ConvenienceFee[0].amount,i.convfeetype=i.selectedInvoiceData[0].ConvenienceFee[0].type,a.haveconfee=!1,i.selectedInvoiceData[0].ConvenienceFee[0].type){case"$":i.totalAmount=i.totalAmount+i.selectedInvoiceData[0].ConvenienceFee[0].amount,console.log("$scope.totalAmount",i.totalAmount),i.newAmount=i.totalAmount;break;case"%":i.totalAmount=i.totalAmount+i.selectedInvoiceData[0].ConvenienceFee[0].amount*i.totalAmount/100,console.log("$scope.totalAmount",i.totalAmount),i.newAmount=i.totalAmount}else i.newAmount=i.totalAmount}else console.log(i.totalAmount);C(R),i.ProfileDeleteWithId=function(e){var n=o.confirm().title("Are you sure you want to delete?").textContent("").ariaLabel("Confirmation").ok("Confirm").cancel("Cancel");o.show(n).then(function(){var e={id:i.profile_id};i.promise=l.ProfileDelete(e),i.promise.then(function(e){0==e.statuscode?(m.showToast(e.statusmessage,"bottom right","success"),p.reload()):m.showToast(e.statusmessage,"bottom right","error")})},function(){})},i.ProfileDelete=function(){var e=o.confirm().title("Are you sure you want to delete?").textContent("").ariaLabel("Confirmation").ok("Confirm").cancel("Cancel");o.show(e).then(function(){var e={id:i.profile_id};i.promise=l.ProfileDelete(e),i.promise.then(function(e){0==e.statuscode?(m.showToast(e.statusmessage,"bottom right","success"),p.reload()):m.showToast(e.statusmessage,"bottom right","error")})},function(){})},i.calculateTotalAmount=function(){i.isAmountInvalid=!1,i.totalAmount=0,i.selectedInvoiceData.length>0&&angular.forEach(i.selectedInvoiceData,function(e,n){(e.ChargeAmount>e.Balance||!angular.isNumber(e.ChargeAmount))&&(i.isAmountInvalid=!0);var t=parseFloat(e.ChargeAmount);t>0&&(i.totalAmount+=t,i.invoiceAmount.push(t))})},i.UpdateCCFields=function(){var e={};""!=i.ccprofile.profile_id&&(e=b("filter")(i.ccprofiles,{profile_id:i.ccprofile.profile_id})[0]),i.usedCardProfile=!1,i.payform={cc2:"",cardnumber:"",cardholder:"",streetaddress:"",zipcode:"",bankaba:"",account:"",name:""},0!=e.profile_id&&void 0!=e.profile_id?(i.profile_id=e.profile_id,i.payform={cardnumber:"xxxxxxxxxxxx"+e.last_digits,cardholder:e.cardholder_name,bankaba:"xxxxxxxxxxxx"+e.last_digits,account:"xxxxxxxxxxxx",name:e.cardholder_name},i.ccinfo={type:angular.lowercase(e.card_type)},i.usedCardProfile=!0,i.requiredMonthField=!1,i.requiredYearField=!1,i.ccPattern=/^[a-zA-Z0-9]*$/):("creditcard"==i.paymentMode?(i.requiredMonthField=!0,i.requiredYearField=!0,i.requiredAccountNo=!1,i.requiredBankaba=!1):"ach"==i.paymentMode&&(i.requiredMonthField=!1,i.requiredYearField=!1,i.requiredCreditCardNumber=!1,i.requiredCardHolderName=!1,i.requiredAccountNo=!0,i.requiredBankaba=!0),i.ccPattern=/^[0-9]+$/)},i.submit=function(e){w(e)},i.processBolt=function(){i.disabledChargeButton=!0;var e=parseFloat(i.totalAmount);i.showProgress=!0,i.boltProcessStatus="Please Complete transaction at Terminal.";var n=localStorage.getItem("bolt_type"),t={auth:i.boltConfig.auth,merchant_id:i.boltConfig.merchant_id,hsn:i.boltConfig.hsn,amount:e,type:void 0==n?"swipe":n};i.promise=l.BoltReadCard(t),i.promise.then(function(e){0==e.statuscode?(i.boltToken=e.data.token,i.boltProcessStatus="Authorizing Transaction...",w("bolt")):(i.boltProcessStatus=e.statusmessage,i.showProgress=!1,d(function(){i.boltProcessStatus="",i.disabledChargeButton=!1},5e3))})},i.processTriPOSiPP350=function(){i.disabledChargeButton=!0,i.showProgress=!0,i.triPOSSaleInfo="";var e=parseFloat(i.totalAmount),n=parseInt(i.triPOSLaneInfo.ipLanes[0].laneId),t={laneId:n,transactionAmount:e,address:{BillingAddress1:"",BillingAddress2:"",BillingCity:"",BillingPostalCode:"",BillingState:""},cardHolderPresentCode:null,clerkNumber:"Clerk101",commercialCardCustomerCode:null,configuration:{AllowPartialApprovals:!1,CheckForDuplicateTransactions:!1,CurrencyCode:"Usd",MarketCode:"Retail",PromptForSignature:null},convenienceFeeAmount:null,healthcare:null,lodging:null,referenceNumber:"",salesTaxAmount:null,shiftId:"ShiftA",ticketNumber:void 0!=I.id?I.id:"",tipAmount:null};v.makeSaleRequest(v.config,t,function(e){i.showProgress=!1,i.disabledChargeButton=!1;var n=e.data;i.triPOSSaleInfo=n,1==i.triPOSSaleInfo._hasErrors?(i.triPOSSaleInfo.errorMessage=n._errors[0].developerMessage,d(function(){i.triPOSSaleInfo=""},5e3)):w("triposipp350")})},i.print=function(){var e="transaction.print.html",n=i.transactionResponse.trans_type.search("triposipp350");0==n&&(e="transaction.triposipp350.print.html"),u.print("assets/"+e,{transactionResponse:i.transactionResponse,companyInfo:i.companyInfo})},i.printDialog=function(){var e="transaction.print.html",n=i.transactionResponse.trans_type.search("triposipp350");0==n&&(e="transaction.triposipp350.print.html"),o.show({scope:i,preserveScope:!0,parent:angular.element(document.body),templateUrl:"assets/"+e,clickOutsideToClose:!0,fullscreen:!0,controller:t}).then(function(){},function(){0==i.openEmailReceipt&&p.go("triangular.invoice-list")})},i.sendReceiptDialog=function(){o.show({controller:r,templateUrl:"app/modules/statement/sendConfirmationDialog.html",parent:angular.element(document.body),scope:i.$new(),clickOutsideToClose:!0}).then(function(e){i.openEmailReceipt=!1,i.printDialog()},function(){i.openEmailReceipt=!1,i.printDialog()})},i.emailReceipt=function(e,n){i.settings={InvoiceContacts:{sender_email:"",sender_name:"",cc_email:[],bcc_email:[],to_email:[],save_email_erp:!1},subject:"",template_id:"",title:"Send Reciept"},i.openEmailReceipt=!0;var t=e.customer_email;i.promise=s.GetSettings(),i.promise.then(function(r){0==r.statuscode&&(i.settings=r.data,i.settings.title="Send Receipt",i.settings.transaction=e,i.settings.companyInfo=i.companyInfo.company,i.settings.InvoiceContacts.to_email=[],""!=t&&i.settings.InvoiceContacts.to_email.push(t),i.settings.receipt_type=n,i.sendReceiptDialog())})},i.cancel=function(){p.go("triangular.invoice-list")},i.showSwipe=function(){o.show({scope:i,preserveScope:!0,skipHide:!0,controller:n,templateUrl:"app/modules/invoice/payment/swipecard.tmpl.html",parent:angular.element(document.body),clickOutsideToClose:!0,fullscreen:!1}).then(function(){},function(){i.swipeInfo=""})}}function n(e,n,t,r){function i(){n.swipeText="Please swipe your card now.",t.hide()}function a(){n.showSwiperProgress=!0,r(function(){n.swipeText="Card swipe failed. Please re-swipe.",n.showSwiperProgress=!1,n.swipeInfo=""},600)}function o(e){return!0}function s(){n.swipeText="Please swipe your card now.";var e=n.swipeInfo,t=e.split("^");if(e.indexOf("&")>0){for(var s=0,l=0,d=0,c=e.length;d<c;d++)"^"==e.charAt(d)?s++:"&"==e.charAt(d)&&l++;l>s&&(t=e.split("&"))}var m=t[0],u=0,p=0,g=0,f="",h=e.substring(0,1);
if("%"==h&&(h=e.substring(1,2)),"B"!=h&&"b"!=h)return void a();if(m=m.substring(2,m.length),m=m,!o(m))return void a();if(t.length>1){f=t[1];var v=f.split("/");v.length>1&&(f=v[1]+" "+v[0]),g=t[2].substring(0,2),u=t[2].substring(2,4);var b=(new Date).getFullYear();b=b.toString();var p=b.substring(0,2)+g}n.payform={cc2:"",cardnumber:"",cardholder:"",months:"",years:""},n.payform={cc2:"",cardnumber:m,cardholder:f,months:u,years:p,track2:n.swipeInfo},n.showStatic=!1,n.showAnimation=!0,n.swipeText="Please swipe your card now.",r(function(){i()},2400)}n.swipeText="Please swipe your card now.",n.swipeInfo="",n.showSwiperProgress=!1,n.showStatic=!0,n.showAnimation=!1,n.cancel=function(){t.hide()},n.handle_swipe=function(){n.swipeText="Please swipe your card now.",r(function(){s()},400)}}function t(e,n,t){}function r(e,n,t,r,i,a,o,s,l,d){var c=this;o.disabledSubmitButton=!1,o.showCCSIcon="zmdi zmdi-account-add",o.showCCS=!1,o.toggleCCS=function(){o.showCCS=!o.showCCS,o.showCCSIcon=o.showCCS?"zmdi zmdi-account":"zmdi zmdi-account-add"},o.cancel=function(){n.hide()},o.validateChip=function(e,n){if(e){var t=/^[_a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/;t.test(e)||("bcc"==n&&o.settings.InvoiceContacts.bcc_email.pop(),"cc"==n&&o.settings.InvoiceContacts.cc_email.pop(),"to"==n&&o.settings.InvoiceContacts.to_email.pop()),"to"==n&&(0==o.settings.InvoiceContacts.to_email.length?o.disabledSubmitButton=!0:o.disabledSubmitButton=!1)}},o.cancel=function(){n.hide()},o.submit=function(){o.showProgress=!0,o.disabledSubmitButton=!0;var e={companyInfo:o.settings.companyInfo,transaction:o.settings.transaction,contact:o.settings.InvoiceContacts,receiptType:o.settings.receipt_type};c.promise=d.sendReceipt(e),c.promise.then(function(e){0==e.statuscode?(l.showToast(e.statusmessage,"bottom right","success"),o.showProgress=!1,o.openEmailReceipt=!1,n.hide()):(l.showToast(e.statusmessage,"bottom right","error"),o.showProgress=!1)})}}e.$inject=["$window","$scope","$rootScope","$mdDialog","SettingModel","InvoiceModel","$timeout","$locale","Clique","printer","$state","triBreadcrumbsService","dataService","$http","VantivTriPOSiPP350","$filter"],t.$inject=["$window","$scope","$mdDialog"],r.$inject=["$timeout","$mdDialog","$filter","triSkins","$window","$rootScope","$scope","SettingModel","Clique","TransactionModel"],n.$inject=["$window","$scope","$mdDialog","$timeout"],angular.module("invoice").controller("PaymentInvoiceContoller",e).filter("range",function(){var e=function(e,n,t){for(var r=n;r<=t;r++)e.push(r);return e};return e}).filter("profile",function(){return function(e,n){if(!e)return"";if("ach"==n){if("ECHK"==e.card_type)return e}else if("cc"==n&&"ECHK"!=e.card_type)return e}}).filter("ssn",function(){return function(e){if(!e)return"";var n=e.toString().trim().replace(/^\+/,"");return n.match(/[^0-9]/)?e:(e.slice(0,3).replaceWith("*")+"-"+e.slice(4,5).replaceWith("*")+"-"+e.slice(4)).trim()}})}(),function(){"use strict";function e(e,n,t,r,i,a,o,s,l,d,c,m,u,p,g,f,h,v,b,y,w){function C(e){return e?O.customers.filter(S(e)):O.customers}function S(e){var n=angular.lowercase(e);return function(e){return 0===e.display.indexOf(n)}}function x(e){c(e).toggle().then(function(){m.debug("toggle "+e+" is done")})}function I(){u.go("triangular.invoice-create")}function T(){var e;i.$watch("vm.query.filter",function(n,t){t||(e=O.query.page),n!==t&&(O.query.page=1),n||(O.query.page=e),O.getInvoices()})}function D(){i.toggleAll(),O.query.from=r("date")(i.from,"yyyy-MM-dd"),O.query.to=r("date")(i.to,"yyyy-MM-dd"),null!=O.selectedItem?O.query.customer=O.selectedItem.value:O.query.customer="";var e=O.query;console.log(e,"invoice_search_query"),null!=O.selectedItem&&(e.customerSelectedItem=O.selectedItem),"undefined"!=typeof Storage&&(console.log("This Is Working",e),sessionStorage.setItem("invoice_search_status",e.status),sessionStorage.setItem("invoice_search",JSON.stringify(e)),sessionStorage.setItem("fromDate",i.from),sessionStorage.setItem("toDate",i.to)),O.promise=l.GetAllInvoice(O.query),O.promise.then(function(e){0==e.statuscode&&(O.invoices=e.data,O.InvoiceData=O.invoices.items,a(function(){O.isInvoiceLoaded=!1},2e3))})}function P(){O.filter.show=!1,O.query.filter="",O.filter.form.$dirty&&O.filter.form.$setPristine()}function _(e){var n="";n=0==e.Balance?"paid":"unpaid",sessionStorage.setItem("invoice_status",n),null!=e.BillEmail?sessionStorage.setItem("customer_email",e.BillEmail.Address):sessionStorage.setItem("customer_email",""),sessionStorage.setItem("invoice_id",e.Id),sessionStorage.setItem("invoice_issuedate",e.TxnDate),sessionStorage.setItem("invoice_detail",JSON.stringify(e)),null!=e.DocNumber&&""!==e.DocNumber||(e.DocNumber=e.Id),u.go("triangular.invoice-detail",{id:e.DocNumber})}function k(){if(i.invoiceSelection.length>0){var e;angular.forEach(i.invoiceSelection,function(n,t){e=r("filter")(O.InvoiceData,{Id:n})[0]}),sessionStorage.setItem("invoice_detail",JSON.stringify(e)),u.go("triangular.invoice-create",{action:"recurring"})}}function A(){t.printProcess=!0,i.promise=h.GetSettings(),i.promise.then(function(e){0==e.statuscode&&(i.settings=e.data,sessionStorage.setItem("invoice_template_id",i.settings.InvoiceTemplateId),sessionStorage.setItem("template_color",i.settings.InvoiceTemplateColor),f.printInvoice(i.invoiceSelection))})}function $(){i.sendProcess=!0,a(function(){i.sendProcess=!1},2e3),s.show({scope:i,preserveScope:!0,parent:angular.element(document.body),templateUrl:"app/modules/invoice/sendbulk/send.bulk.invoice.html",clickOutsideToClose:!0,fullscreen:!0,controller:"SendBulkInvoiceController"})}function R(){t.dataObj={},t.dataObj=i.selectedInvoiceData,u.go("triangular.invoice-payment")}function M(){s.show({locals:{InvoiceData:O.InvoiceData},scope:i,preserveScope:!0,parent:angular.element(document.body),templateUrl:"app/modules/invoice/linking/link.invoice.html",clickOutsideToClose:!0,fullscreen:!0,controller:"LinkInvoiceController"})}function E(){i.selectedInvoiceData=[],i.selectedCustomer=[],i.invoiceSelection.length>0?(angular.forEach(i.invoiceSelection,function(e,n){var t=r("filter")(O.InvoiceData,{Id:e},!0)[0];i.selectedInvoiceData.push(t);var a=t.CustomerRef.value;void 0!=a&&i.selectedCustomer.indexOf(a)==-1&&i.selectedCustomer.push(a)}),i.showInvoiceToolBar=!0):i.showInvoiceToolBar=!1,i.showInvoicePaymentButton=!1,1==i.selectedCustomer.length&&(i.showInvoicePaymentButton=!0),i.showInvoiceEmailToolBar=!1,1==i.selectedInvoiceData.length&&(i.showInvoiceEmailToolBar=!0),console.log("length",i.selectedInvoiceData.length),i.showRecurringToolBar=!1,1==i.invoiceSelection.length&&(i.showRecurringToolBar=!0),i.showBatchInvoices=!1,i.invoiceSelection.length>=1&&(i.showBatchInvoices=!0)}var O=this;O.InvoiceData=[],i.showInvoiceToolBar=!1,i.showInvoiceEmailToolBar=!1,i.showInvoicePaymentButton=!1,i.showRecurringToolBar=!1,i.showBatchInvoices=!1,O.isInvoiceLoaded=!0,i.checkAll={},i.hasInk,i.textToCopy="",t.printProcess=!1,i.sendProcess=!1,i.buttonPermissions={invoice_addnew:!1,invoice_search:!1,invoice_print:!1,invoice_send:!1,invoice_payment:!1,invoice_link:!1,invoice_recurring:!1},O.notifications=[{invoice_no:"10001",transaction_id:"0000112",amount:12,status:"approved",customer_name:"John Smith",date:new Date("2017-11-29 11:50 AM")},{invoice_no:"10001",transaction_id:"0000112",amount:12,status:"declined",customer_name:"John Smith",date:new Date("2017-11-22 11:25 AM")},{invoice_no:"10001",transaction_id:"0000112",amount:12,status:"approved",customer_name:"John Smith",date:new Date("2014-04-03")},{invoice_no:"10001",transaction_id:"0000112",amount:12,status:"approved",customer_name:"John Smith",date:new Date("2014-04-03")},{invoice_no:"10001",transaction_id:"0000112",amount:12,status:"approved",customer_name:"John Smith",date:new Date("2014-04-03")},{invoice_no:"10001",transaction_id:"0000112",amount:12,status:"approved",customer_name:"John Smith",date:new Date("2014-04-03")}];var L=["addnew","search","print","send","payment","link","recurring"];angular.forEach(L,function(e,n){void 0!=w.getPermissionDefinition("invoice-"+e)?i.buttonPermissions["invoice_"+e]=!0:i.buttonPermissions["invoice_"+e]=!1}),console.log(),v.supported||console.log("Sorry, copy to clipboard is not supported"),O.customers=[],i.promise=l.GetCustomers(),i.promise.then(function(e){if(0==e.statuscode&&void 0!=e.data){var n=(e.data.total_count,e.data.items);angular.forEach(n,function(e,n){var t={value:e.Id,display:e.DisplayName.toLowerCase()};O.customers.push(t)}),O.querySearch=C}});var z=new Date,F=z.getFullYear(),N=z.getMonth(),q=sessionStorage.getItem("invoice_search");console.log("saveInvoiceSearch",q),null!=q&&(q=JSON.parse(q),null!=q.customerSelectedItem&&Object.keys(q.customerSelectedItem).length>0&&(O.selectedItem=q.customerSelectedItem),O.query=q);var B,j,U=1,G="all",H="all";void 0!==typeof Storage&&(B=sessionStorage.getItem("fromDate"),j=sessionStorage.getItem("toDate"),U=sessionStorage.getItem("invoice_current_page"),G=n.get("invoice_search_status"),H=sessionStorage.getItem("invoice_search_status"),null==U&&(U=1),null==H&&(H="all")),console.log("last status",H),O.query={status:H,limit:10,order:"-TxnDate",page:U},i.selected=[],i.from=void 0!=B?new Date(B):new Date(F,N,1),i.to=void 0!=j?new Date(j):new Date(F,N+1,0),O.selected=[],O.columns={invoiceNo:"INVOICE #.",customerName:"CUSTOMER",invoiceDate:"INVOICE DATE",dueDate:"DUE DATE",status:"INVOICE STATUS",balance:"BALANCE",total:"TOTAL",action:"ACTION"},O.filter={options:{debounce:500}},O.getInvoices=D,O.removeFilter=P,O.printBulkInvoice=A,O.sendBulkInvoice=$,O.paymentInvoice=R,O.copyCustomerPortalLink=M,O.openSidebar=x,O.openInvoiceDetail=_,O.openRecuringDialog=k,O.createInvoice=I,O.toolBarProcess=E,T(),i.invoiceSelection=[],i.displayInvoices=[],i.promise=h.GetPaymentInfo(),i.promise.then(function(e){0==e.statuscode&&e.data.total_count>0&&(i.paymentInfo=e.data.items[0],t.paymentInfo=i.paymentInfo)}),i.refreshInvoiceGrid=function(){u.reload()},i.resetForm=function(){var e=new Date,n=e.getFullYear(),t=e.getMonth();O.query={status:"all",docnumber:"",customer:"",limit:10,order:"-TxnDate",page:1},i.from=new Date(n,t,1),i.to=new Date(n,t+1,0),O.selectedItem="",sessionStorage.setItem("invoice_search","{}")},i.toggleAll=function(){i.checkAll?i.invoiceSelection=angular.copy(i.displayInvoices):i.invoiceSelection=[],E()},i.clearInvoiceArray=function(e){0==e&&(i.displayInvoices=[])},i.toggleSelection=function(e){var n=i.invoiceSelection.indexOf(e);n>-1?i.invoiceSelection.splice(n,1):i.invoiceSelection.push(e),E()},i.logPagination=function(e,n){sessionStorage.setItem("invoice_current_page",e)}}e.$inject=["$window","$cookies","$rootScope","$filter","$scope","$timeout","$q","$mdDialog","InvoiceModel","Clique","$mdSidenav","$log","$state","triBreadcrumbsService","$stateParams","BulkPrintInvoices","SettingModel","clipboard","CliqueConstant","dataService","PermissionStore"],angular.module("invoice").controller("InvoiceController",e)}(),function(){"use strict";function e(e,n,t,r,i,a,o,s,l,d,c,m){e.textToCopy=[],e.allLinks="";var u=[];e.invoiceSelection.length>0&&(angular.forEach(e.invoiceSelection,function(e,n){var t=m("filter")(c,{Id:e})[0],r={invoice_id:e,customer_id:t.CustomerRef.value};u.push(r)}),e.promise=i.GetInvoiceLink({data:u}),e.promise.then(function(n){0==n.statuscode&&(e.textToCopy=n.data,e.textToCopy.length>0&&angular.forEach(e.textToCopy,function(n,t){e.allLinks+=n,e.allLinks+="\n"}))})),e.stripText=function(e){return e},e.success=function(){s.showToast(+e.textToCopy.length+" Invoice(s) links Copied to Clipboard","bottom right","success"),t.hide()},e.fail=function(e){s.showToast("Error unable to copy","bottom right","error")}}e.$inject=["$scope","$rootScope","$mdDialog","SettingModel","InvoiceModel","$timeout","$locale","Clique","printer","$sce","InvoiceData","$filter"],angular.module("invoice").controller("LinkInvoiceController",e)}(),function(){"use strict";function e(e,n,t,r,i,a,o,s,l){e.promise=i.GetInvoiceLegalDocument(),e.promise.then(function(e){$("#legal_document").html(""),$("#legal_document").append(e)}),e.print=function(){l.print("https://apps.clique.center/template/legaldoc.html",{})},e.cancel=function(){t.cancel()}}e.$inject=["$scope","$rootScope","$mdDialog","SettingModel","InvoiceModel","$timeout","$locale","Clique","printer"],angular.module("invoice").controller("LegalDocumentController",e)}(),function(){"use strict";function e(e,n,t,r,i,a,o,s,l,d,c,m,u,p,g,f,h,v,b,y,w,C,S,x){function I(e){b(e).toggle().then(function(){D()})}function T(){e.promise=d.GetSettings(),e.promise.then(function(n){if(0==n.statuscode){e.settings=n.data;var t=sessionStorage.getItem("customer_email");e.settings.InvoiceContacts.to_email=[],e.settings.InvoiceContacts.save_email_erp=!1,e.settings.title="Send Invoice",""!=t?e.settings.InvoiceContacts.to_email.push(t):_.showCustomerEmailSaveOption=!0,sessionStorage.setItem("invoice_template_id",e.settings.InvoiceTemplateId),sessionStorage.setItem("template_color",e.settings.InvoiceTemplateColor),_.template_color=e.settings.InvoiceTemplateColor,e.IsDefaultTemplate=e.settings.IsDefaultTemplate,e.$broadcast("invoice-preview-event"),e.setButtonColor(e.settings.InvoiceTemplateColor)}})}function D(){var n=0,t=0,r=0,i=0,a=0,o=0,s=sessionStorage.getItem("invoice_issuedate"),d=sessionStorage.getItem("invoice_id");_.query={invoice_issuedate:s,invoice_id:d},e.promise=l.GetInvoiceStatistics(_.query),e.promise.then(function(s){if(0==s.statuscode&&Object.keys(s.data).length>0){angular.forEach(s.data,function(e,s){angular.forEach(e,function(e,s){var l={date:s,request:e.requests,delivered:e.delivered,open:e.opens,clicks:e.clicks,bounces:e.bounces};_.InvoiceStatsData.push(l),n+=e.requests,t+=e.processed,r+=e.delivered,i+=e.opens,a+=e.clicks,o+=e.bounces})}),e.totalRequest=n,_.pieData=[t,r,i,a,o];var l=[];angular.forEach(_.pieLabels,function(e,n){var t={title:e,value:_.pieData[n]};l.push(t)}),_.statisticsGroups[0].stats=l}_.showInvoiceStatsProgress=!1})}function P(n){switch(n){case"email":var t=e.settings.ShowConfirmationDialog,r=e.settings.InvoiceContacts.to_email.length;1==t||0==r?e.showSendConfirmationDialog():e.sendInvoice();break;case"collect_payment":e.collectPayment();break;case"recuring":break;case"invoice_template":e.showGridBottomSheet();break;case"invoice_print":e.printInvoice();break;case"payment_methods":e.showGridPaymentMethods();break;case"invoice_stats":I("statistics")}}e.pdf=[],e.pdf.src="www.pdf995.com/samples/pdf.pdf";var _=this;_.InvoiceStatsColumns=[{title:"Date",field:"date",sortable:!1},{title:"Request",field:"request",sortable:!0},{title:"Delivered",field:"delivered",sortable:!0},{title:"Opens",field:"open",sortable:!0},{title:"Clicks",field:"clicks",sortable:!0},{title:"Bounces",field:"bounces",sortable:!0}],_.palettes=S.palettes,_.InvoiceStatsData=[],e.colourRGBA=function(e){var n=S.rgba(e);return{"background-color":n}};var k,A="",R="";e.invoice="",e.settings="",e.template_url,e.isInvoicePaid,e.displayPaidStamp=!1,e.slider=12,e.readonly=!1,e.payment_methods,e.payment_default_id=0,v.showInvoiceLoader=!1,v.printProcess=!1,"paid"==sessionStorage.getItem("invoice_status")?e.isInvoicePaid=!0:e.isInvoicePaid=!1,_.subMenu=P,e.showProgress=!1,p.id&&(R=p.id,A=sessionStorage.getItem("invoice_id")),_.statisticsGroups=[{name:"Invoice Statistics",stats:[]}],e.totalRequest=0,_.pieLabels=["Processed","Delivered","Open","Clicks","Bounces"],_.pieOptions={legend:{display:!0},showTooltips:!0},_.pieData=[0,0,0,0,0],g.reset();var M=[{active:!1,icon:"zmdi zmdi-chart",name:"Invoice #"+R+"</b>",priority:2,state:"triangular.invoice-detail",template:"app/triangular/components/menu/menu-item-link.tmpl.html",type:"link"},{active:!0,icon:"zmdi zmdi-chart",name:"Invoices",priority:1,state:"triangular.invoice-list-type",template:"app/triangular/components/menu/menu-item-link.tmpl.html",type:"link"}];angular.forEach(M,function(e,n){g.addCrumb(e)}),_.fabDirections=["up","down","left","right"],_.fabDirection=_.fabDirections[2],_.fabAnimations=["md-fling","md-scale"],_.fabAnimation=_.fabAnimations[1],_.fabStatuses=[!1,!0],_.fabStatus=!1,_.showCustomerEmailSaveOption=!0,_.openSidebar=I,_.template_color="",_.showInvoiceStatsProgress=!0,T(),e.promise=d.GetPaymentInfo(),e.promise.then(function(n){0==n.statuscode&&n.data.total_count>0&&(e.payment_methods=n.data.items,e.payment_default_id=n.data.items[0].id)}),e.myClassObj={},e.setButtonColor=function(n){var t=_.palettes[n],r=t[500].value,i={r:r[0],g:r[1],b:r[2],a:1};e.myClassObj.style={"background-color":"rgba("+i.r+", "+i.g+", "+i.b+", "+i.a+")"}},e.getTemplateColor=function(){null!=sessionStorage.getItem("template_color")&&(_.template_color=sessionStorage.getItem("template_color"))},e.isObjectEmpty=function(e){return 0===Object.keys(e).length},e.settings={InvoiceContacts:{sender_email:"",sender_name:"",cc_email:[],bcc_email:[],to_email:[],save_email_erp:!1,body:""},subject:"",template_id:""},e.setTemplateTheme=function(n,t){var r="",i="";angular.forEach(t,function(e,t){var a=(e.contrast,e.value),o={name:t,r:a[0],g:a[1],b:a[2],a:1};"500"==t&&(i="background-color:rgba("+o.r+", "+o.g+", "+o.b+", "+o.a+")");var s=".primary-bg-"+o.name+"{background-color:rgba("+o.r+", "+o.g+", "+o.b+", "+o.a+") !important;}",l=".primary-br-"+o.name+"{border-color:rgba("+o.r+", "+o.g+", "+o.b+", "+o.a+") !important;}",d=".primary-tc-"+o.name+"{color:rgba("+o.r+", "+o.g+", "+o.b+", "+o.a+") !important;}";r+=s+l+d,sessionStorage.setItem("template_color",n)}),$("#invoice_template style").append(r),e.setButtonColor(n)},e.src=null,e.$on("invoice-preview-event",function(n){e.showProgress=!0,e.fabMenu=!1,e.src=null;var t=s.getServiceUrl();1==e.IsDefaultTemplate?i.get(t+"/erp/quickbooks/invoice/preview/?invoice_id="+A,{responseType:"arraybuffer"}).then(function(n){e.src=new Uint8Array(n.data),e.showProgress=!1,e.displayPaidStamp=!0,0==e.isInvoicePaid&&(e.fabMenu=!0)}):(e.promise=l.GetInvoicePreviewById(A),e.promise.then(function(n){k=n,$("#invoice_template").html(""),$("#invoice_template").append(n),e.showProgress=!1,e.displayPaidStamp=!0,0==e.isInvoicePaid&&(e.fabMenu=!0)}))}),e.collectPayment=function(){v.dataObj=[];var e=sessionStorage.getItem("invoice_detail");null!=e||void 0!=e?(v.dataObj.push(JSON.parse(e)),f.go("triangular.invoice-payment")):alert("Error: Invoice Detail not found")},e.printInvoice=function(){v.printProcess=!0;var e=[],n=sessionStorage.getItem("invoice_id");e.push(n),x.printInvoice(e)},e.SelectedTemplateValue=function(e){v.email_template=e},e.sendInvoice=function(){e.settings.ShowConfirmationDialog;if(void 0==v.email_template&&(v.email_template={},v.email_template.name="",v.email_template.subject="",v.email_template.body=""),e.selectedTemplate,e.settings.showConfirmationDialog,e.showProgress=!0,"template_email"in e.settings.InvoiceContacts==1)if(e.settings.InvoiceContacts.template_email.length>0)for(var n=0;n<e.settings.InvoiceContacts.template_email.length;n++)1==e.settings.InvoiceContacts.template_email[n].isSelected&&v.email_template.id==e.settings.InvoiceContacts.template_email.id&&(v.email_template=e.settings.InvoiceContacts.template_email,v.email_template.name=e.settings.InvoiceContacts.template_email[n].name,v.email_template.subject=e.settings.InvoiceContacts.template_email[n].subject,v.email_template.body=e.settings.InvoiceContacts.template_email[n].body);else v.email_template||(v.email_template=e.settings.InvoiceContacts.template_email,v.email_template.name="",v.email_template.subject="",v.email_template.body="");else v.email_template={},v.email_template.name="",v.email_template.subject="",v.email_template.body="";var t=1,r=0;null!=sessionStorage.getItem("invoice_template_id")&&(t=sessionStorage.getItem("invoice_template_id"));var i=sessionStorage.getItem("invoice_detail");null==i&&void 0==i||(i=JSON.parse(i),r=parseInt(i.CustomerRef.value)),e.getTemplateColor();var a={to:e.settings.InvoiceContacts.to_email,cc:e.settings.InvoiceContacts.cc_email,bcc:e.settings.InvoiceContacts.bcc_email,sender_name:e.settings.InvoiceContacts.sender_name,sender_email:e.settings.InvoiceContacts.sender_email,subject:v.email_template.subject,body:v.email_template.body,invoice_id:A,customer_id:r,invoice_template_id:t,color:_.template_color,save_email_erp:e.settings.InvoiceContacts.save_email_erp,payment_method_id:e.payment_default_id};_.promise=l.SendInvoice(a),_.promise.then(function(n){0==n.statuscode?(s.showToast(n.statusmessage,"bottom right","success"),f.go("triangular.invoice-list"),e.showProgress=!1):(s.showToast(n.statusmessage,"bottom right","error"),e.showProgress=!1,c.hide()),e.fabMenu=!0})},e.showRecuringDialog=function(){c.show({controller:"RecuringController",templateUrl:"app/modules/invoice/recuringDialog.html",parent:angular.element(document.body),scope:e.$new(),clickOutsideToClose:!0}).then(function(e){},function(){})},e.showSendConfirmationDialog=function(){c.show({controller:"invoiceConfirmationController",templateUrl:"app/modules/invoice/detail/sendConfirmationDialog.html",parent:angular.element(document.body),scope:e.$new(),clickOutsideToClose:!0}).then(function(e){},function(){})},e.showGridBottomSheet=function(){e.alert="",h.show({templateUrl:"app/modules/invoice/detail/bottom-sheet-grid-template.html",controller:"GridBottomSheetCtrl",clickOutsideToClose:!0,parent:angular.element(document.getElementById("invoice_detail_layout"))}).then(function(e){})},e.showGridPaymentMethods=function(){c.show({scope:e,preserveScope:!0,controller:"PaymentMethodSheetController",templateUrl:"app/modules/invoice/detail/payment_method_dialog.html",parent:angular.element(document.body),targetEvent:null,clickOutsideToClose:!0,fullscreen:!0}).then(function(e){},function(){})}}function n(e,n,t,r,i,a){t.invoice_template_id=sessionStorage.getItem("invoice_template_id"),t.items=[];for(var o=0;o<2;o++)t.items.push(o);t.invoice_templates=[],t.promise=i.GetInvoiceTemplates(),t.promise.then(function(e){0==e.statuscode&&(t.invoice_templates=e.data)}),t.closeBottomSheet=function(){r.hide()},t.listItemClick=function(e){var t=sessionStorage.getItem("template_color");({invoice_template_id:e.id,template_color:t});sessionStorage.setItem("invoice_template_id",e.id),n.$broadcast("invoice-preview-event"),r.hide(e)}}function t(e,n,t,r,i,a){t.cancel=function(){r.hide()},t.listItemClick=function(e){t.payment_default_id=e.id,r.hide(e)}}function r(e,n,t,r,i,a,o,s,l){o.disabledSubmitButton=!1,o.showCCSIcon="zmdi zmdi-account-add",o.showCCS=!1,o.toggleCCS=function(){o.showCCS=!o.showCCS,o.showCCSIcon=o.showCCS?"zmdi zmdi-account":"zmdi zmdi-account-add"},o.cancel=function(){n.hide()},o.validateChip=function(e,n){if(e){var t=/^[_a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/;t.test(e)||("bcc"==n&&o.settings.InvoiceContacts.bcc_email.pop(),"cc"==n&&o.settings.InvoiceContacts.cc_email.pop(),"to"==n&&o.settings.InvoiceContacts.to_email.pop()),"to"==n&&(0==o.settings.InvoiceContacts.to_email.length?o.disabledSubmitButton=!0:o.disabledSubmitButton=!1)}},o.submit=function(){o.sendInvoice(),o.disabledSubmitButton=!0}}e.$inject=["$scope","$timeout","$interval","$q","$http","$sce","$compile","Clique","InvoiceModel","SettingModel","$mdDialog","$mdToast","$element","$stateParams","triBreadcrumbsService","$state","$mdBottomSheet","$rootScope","$mdSidenav","$mdColorPalette","$mdColors","$mdColorUtil","triTheming","BulkPrintInvoices"],n.$inject=["$window","$rootScope","$scope","$mdBottomSheet","SettingModel","Clique"],t.$inject=["$window","$rootScope","$scope","$mdDialog","SettingModel","Clique"],r.$inject=["$timeout","$mdDialog","$filter","triSkins","$window","$rootScope","$scope","SettingModel","Clique"],angular.module("invoice").controller("InvoiceDetailController",e).controller("GridBottomSheetCtrl",n).controller("PaymentMethodSheetController",t).controller("invoiceConfirmationController",r).directive("mdChips",function(){return{restrict:"E",require:"mdChips",link:function(e,n,t,r){r.onInputBlur=function(){this.inputHasFocus=!1;var e=this.getChipBuffer();""!=e&&(this.appendChip(e),this.resetChipBuffer())}}}})}(),angular.module("invoice").controller("ColorGeneratorCtrl",["$scope",function(e){function n(e){return{lighterColors:[{r:e.r,g:e.g,b:e.b,a:.13,name:"50"},{r:e.r,g:e.g,b:e.b,a:.31,name:"100"},{r:e.r,g:e.g,b:e.b,a:.5,name:"200"},{r:e.r,g:e.g,b:e.b,a:.7,name:"300"},{r:e.r,g:e.g,b:e.b,a:.85,name:"400"},{r:e.r,g:e.g,b:e.b,a:1,name:"500"}],darkerColors:[{r:e.r,g:e.g,b:e.b,a:.91,name:"600"},{r:e.r,g:e.g,b:e.b,a:.81,name:"700"},{r:e.r,g:e.g,b:e.b,a:.71,name:"800"},{r:e.r,g:e.g,b:e.b,a:.52,name:"900"}]}}function t(e){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null}function i(e,n,t){e<=0&&(e=0),n<=0&&(n=0),t<=0&&(t=0),e>360&&(e=360),n>100&&(n=100),t>100&&(t=100),this.h=e,this.s=n,this.v=t}function a(e,n,t){e<=0&&(e=0),n<=0&&(n=0),t<=0&&(t=0),e>255&&(e=255),n>255&&(n=255),t>255&&(t=255),this.r=e,this.g=n,this.b=t}function o(e,n,t,r){e<=0&&(e=0),n<=0&&(n=0),t<=0&&(t=0),r<=0&&(r=0),e>100&&(e=100),n>100&&(n=100),t>100&&(t=100),r>100&&(r=100),this.c=e,this.m=n,this.y=t,this.k=r}e.mColorsHSL=[],e.baseColor="#E91E63",e.$watch("baseColor",function(r,i){e.rgbColor=t(r),null!==e.rgbColor&&(e.hsvColor=s.toHSV(new a(e.rgbColor.r,e.rgbColor.g,e.rgbColor.b)),console.log(e.rgbColor),console.log(e.hsvColor),e.mColors=n(e.rgbColor),console.log(e.mColors))});var s={_RGBtoHSV:function(e){var n=new i(0,0,0),t=e.r/255,r=e.g/255,a=e.b/255,o=Math.min(t,r,a),s=Math.max(t,r,a),l=s-o;if(n.v=s,0==l)n.h=0,n.s=0;else{n.s=l/s;var d=((s-t)/6+l/2)/l,c=((s-r)/6+l/2)/l,m=((s-a)/6+l/2)/l;t==s?n.h=m-c:r==s?n.h=1/3+d-m:a==s&&(n.h=2/3+c-d),n.h<0&&(n.h+=1),n.h>1&&(n.h-=1)}return n.h=Math.round(360*n.h),n.s=Math.round(100*n.s),n.v=Math.round(100*n.v),n},_HSVtoRGB:function(e){var n=new a(0,0,0),t=e.h/360,r=e.s/100,i=e.v/100;if(0==r)n.r=255*i,n.g=255*i,n.v=255*i;else{var o,s,l,d=6*t,c=Math.floor(d),m=i*(1-r),u=i*(1-r*(d-c)),p=i*(1-r*(1-(d-c)));0==c?(o=i,s=p,l=m):1==c?(o=u,s=i,l=m):2==c?(o=m,s=i,l=p):3==c?(o=m,s=u,l=i):4==c?(o=p,s=m,l=i):(o=i,s=m,l=u),n.r=255*o,n.g=255*s,n.b=255*l,n.r=Math.round(n.r),n.g=Math.round(n.g),n.b=Math.round(n.b)}return n},_CMYKtoRGB:function(e){var n=new a(0,0,0);return c=e.c/100,m=e.m/100,y=e.y/100,k=e.k/100,n.r=1-Math.min(1,c*(1-k)+k),n.g=1-Math.min(1,m*(1-k)+k),n.b=1-Math.min(1,y*(1-k)+k),n.r=Math.round(255*n.r),n.g=Math.round(255*n.g),n.b=Math.round(255*n.b),n},_RGBtoCMYK:function(e){var n=new o(0,0,0,0);return r=e.r/255,g=e.g/255,b=e.b/255,n.k=Math.min(1-r,1-g,1-b),n.c=(1-r-n.k)/(1-n.k),n.m=(1-g-n.k)/(1-n.k),n.y=(1-b-n.k)/(1-n.k),n.c=Math.round(100*n.c),n.m=Math.round(100*n.m),n.y=Math.round(100*n.y),n.k=Math.round(100*n.k),n},toRGB:function(e){return e instanceof a?e:e instanceof i?this._HSVtoRGB(e):e instanceof o?this._CMYKtoRGB(e):void 0},toHSV:function(e){return e instanceof i?e:e instanceof a?this._RGBtoHSV(e):e instanceof o?this._RGBtoHSV(this._CMYKtoRGB(e)):void 0},toCMYK:function(e){return e instanceof o?e:e instanceof a?this._RGBtoCMYK(e):e instanceof i?this._RGBtoCMYK(this._HSVtoRGB(e)):void 0}}}]),function(){"use strict";function e(e,n,t,r,i,a,o,s,l,d,c,m,u,p,g,f,h,v,b,y,w,C,S,x,I,T,D,P){function _(e){var n,t=e?a.customers.filter(k(e)):a.customers;return V.simulateQuery?(n=l.defer(),o(function(){n.resolve(t)},1e3*Math.random(),!1),n.promise):t}function k(e){var n=angular.lowercase(e);return function(e){var t=angular.lowercase(e.DisplayName).toString();return 0===t.indexOf(n)}}function A(){V.customerInfo={id:"",name:"",email:"",phone:"",website:"",company_name:"",notes:"",billing:{line1:"",city:"",countryCode:"",postal_code:"",country:""},shipping:{line1:"",city:"",countryCode:"",country:""}}}function $(e){null==e&&void 0==e||(A(),V.customerInfo.id=e.Id,V.customerInfo.name=e.DisplayName,V.customerInfo.company_name=e.CompanyName,V.customerInfo.website=null!=e.WebAddr?e.WebAddr.URI:"",V.customerInfo.phone=null!=e.PrimaryPhone?e.PrimaryPhone.FreeFormNumber:"",V.customerInfo.email=null!=e.PrimaryEmailAddr?e.PrimaryEmailAddr.Address:"",null!=e.ShipAddr&&(V.customerInfo.shipping.line1=e.ShipAddr.Line1,V.customerInfo.shipping.city=e.ShipAddr.City,V.customerInfo.shipping.countryCode=e.ShipAddr.CountrySubDivisionCode,V.customerInfo.shipping.country=e.ShipAddr.Country),null!=e.BillAddr&&(V.customerInfo.billing.line1=e.BillAddr.Line1,V.customerInfo.billing.city=e.BillAddr.City,V.customerInfo.billing.countryCode=e.BillAddr.CountrySubDivisionCode,V.customerInfo.billing.postal_code=e.BillAddr.PostalCode,V.customerInfo.billing.country=e.BillAddr.Country),a.showBillingInfo=!0,a.invoice.CustomerRef.value=e.Id,a.invoice.CustomerRef.name=e.DisplayName,a.invoice.BillEmail.Address=null!=e.PrimaryEmailAddr?e.PrimaryEmailAddr.Address:"",U())}function R(e){var n,t=e?a.items.filter(M(e)):a.items;return V.simulateQuery?(n=l.defer(),o(function(){n.resolve(t)},1e3*Math.random(),!1),n.promise):t}function M(e){var n=angular.lowercase(e);return function(e){var t=angular.lowercase(e.Name).toString();return 0===t.indexOf(n)}}function E(e,n){a.invoice.Line[n].SalesItemLineDetail.ItemRef.value=e.Id,a.invoice.Line[n].SalesItemLineDetail.ItemRef.name=e.FullyQualifiedName,a.invoice.Line[n].Description=e.Description,a.invoice.Line[n].SalesItemLineDetail.UnitPrice=parseFloat(e.UnitPrice),a.invoice.Line[n].Amount=parseFloat(a.invoice.Line[n].SalesItemLineDetail.Qty*a.invoice.Line[n].SalesItemLineDetail.UnitPrice),a.calculateTotal()}function O(){return V.sno++}function L(){var e=0;return angular.forEach(a.invoice.Line,function(n,t){switch(n.DetailType){case"SalesItemLineDetail":e++}}),e}function z(e){var n;return angular.forEach(a.invoice.Line,function(t,r){t.DetailType==e&&(n=parseInt(r))}),n}function F(){if(a.taxCode.length>0){angular.forEach(a.taxCode,function(e,n){if(null!=e.SalesTaxRateList&&1==e.Active){var t=0;angular.forEach(e.SalesTaxRateList.TaxRateDetail,function(e,n){var i=e.TaxRateRef,o=r("filter")(a.taxRate,{Id:i.value},!0)[0];void 0!=o&&(t+=parseFloat(o.RateValue))});var i={Id:e.Id,RateValue:t,Name:e.Name};a.taxRateDetail.push(i)}})}}function N(e,n,t,r,i){n.hideDialogActions=!1,n.customer={},n.customer.DisplayName=r,n.loadCountries=function(){return o(function(){n.countries=i},650)},n.setCustomerShipping=function(){1==n.sameAsBilling?n.customer.ShipAddr=n.customer.BillAddr:n.customer.ShipAddr={Line1:"",City:"",Country:"",CountrySubDivisionCode:"",PostalCode:""}},n.addNewCustomer=function(e){1==n.sameAsBilling&&(n.customer.ShipAddr=n.customer.BillAddr),n.showProgress=!0,n.hideDialogActions=!0,V.promise=u.AddCustomer(n.customer),V.promise.then(function(e){0==e.statuscode?(m.showToast(e.statusmessage,"bottom right","success"),C.$broadcast("add-customer-event",{data:e.data})):m.showToast(e.statusmessage,"bottom right","error"),t.hide()})}}function q(e,n,t,i,a){n.hideDialogActions=!1,n.item={},n.item.Name=i,n.account_income=[],n.account_expense=[],n.account_asset=[],n.enableMoreInventoryFields=!1,n.promise=p.GetAccount(),n.promise.then(function(e){0==e.statuscode&&o(function(){C.account=e.data.items,n.account=C.account,n.account.length>0&&(n.account_expense=r("filter")(n.account,{AccountType:"Cost of Goods Sold"},!0),n.account_income=r("filter")(n.account,{AccountType:"Income"},!0),n.account_asset=r("filter")(n.account,{AccountType:"Other Current Asset"},!0),n.item.IncomeAccountRef={value:n.account_income[0].Id},n.item.AssetAccountRef={value:n.account_asset[0].Id},n.item.ExpenseAccountRef={value:n.account_expense[0].Id})})}),void 0==C.categories?(n.promise=u.GetCategories(),n.promise.then(function(e){0==e.statuscode&&o(function(){C.categories=e.data.items,n.categories=C.categories})})):n.categories=C.categories,n.$watch("item.ParentRef.value",function(e,t){void 0!=e?n.item.SubItem=!0:(n.item.SubItem=!1,n.item.ParentRef=void 0)}),n.$watch("item.Type",function(e,t){"Inventory"==e?(n.enableMoreInventoryFields=!0,n.item.AssetAccountRef={value:n.account_asset[0].Id},n.item.TrackQtyOnHand=!0):(n.enableMoreInventoryFields=!1,n.item.QtyOnHand=void 0,n.item.InvStartDate=void 0,n.item.AssetAccountRef=void 0,n.item.TrackQtyOnHand=!1);
}),n.addNew=function(e){n.showProgress=!0,n.hideDialogActions=!0,V.promise=u.AddItem(n.item),V.promise.then(function(e){0==e.statuscode?(m.showToast(e.statusmessage,"bottom right","success"),C.$broadcast("add-item-event",{data:e.data,index:a})):m.showToast(e.statusmessage,"bottom right","error"),t.hide()})}}function B(){var e=new Date,n=e.getMonth()+1,t=new Date(e.getFullYear(),n,0).getDate();return t}function j(e){a.month=[];for(var n=1;n<=28;n++)a.month.push(n);a.month.push("last");var t=a.month;return t}function U(){if(null!=a.invoice.CustomerRef){a.showProfileGetProgress=!0;var e=a.invoice.CustomerRef.value,n={customer_id:e};a.CCProfileResponse={},a.isCCProfileCreated=!1,a.promise=u.ProfileGet(n),a.promise.then(function(e){0==e.statuscode&&e.data.total_item>0&&(a.CCProfileResponse=e.data.item[0],a.ccprofiles=e.data.item,a.isCCProfileCreated=!0),a.showProfileGetProgress=!1})}}function G(e,n,t,r){function i(e){n.disabledChargeButton=!0,o(function(){n.declined_message=""}),n.showProgress=!0;var r={paymentinfo:{Streetaddress:n.payform.streetaddress,Zipcode:n.payform.zipcode,TransType:"profile_add",Type:"profileadd",Cardinfo:{Cardholder:n.payform.cardholder,CreditCardNumber:n.payform.cardnumber,Month:n.payform.months,Year:n.payform.years,CCV2:n.payform.cc2,CardType:n.ccinfo.type,CreateCardProfile:n.payform.card_profile},Custom:{CustomerRef:{Id:n.invoice.CustomerRef.value,Name:n.invoice.CustomerRef.name}}}};n.promise=u.ProfileAdd(r),n.promise.then(function(e){n.disabledChargeButton=!1,0==e.statuscode?(n.payform={},n.isPaymentSuccess=!0,n.showEmailDialog=!1,n.ccprofiles.push(e.data),n.CCProfileResponse=e.data,n.isCCProfileCreated=!0,m.showToast(e.statusmessage,"bottom right","success"),t.hide()):1==e.statuscode&&(n.boltProcessStatus="",t.show({parent:angular.element(document.body),template:'<md-dialog aria-label="List dialog">  <md-dialog-content class="md-padding" palette-background="red:500">    <b>Transaction declined</b>    <p>'+e.statusmessage+"</p>  </md-dialog-content></md-dialog>",clickOutsideToClose:!0,escapeToClose:!0}),o(function(){n.checkoutForm.$setUntouched(),n.checkoutForm.$setPristine()}),n.isPaymentSuccess=!1,n.transactionResponse={}),n.showProgress=!1})}n.cancelProfile=!1,n.requiredMonthField=!0,n.requiredYearField=!0,n.requiredCreditCardNumber=!0,n.requiredCardHolderName=!0,n.currentYear=(new Date).getFullYear(),n.payform={},n.declined_message="",n.ccPattern=/^[0-9]+$/,n.ccinfo={type:void 0},n.selectProfile=function(e){n.CCProfileResponse=n.ccprofiles[e],t.hide()},n.submit=function(e){i(e)},n.cancel=function(){n.cancelProfile=!0,t.hide()}}N.$inject=["$window","$scope","$mdDialog","customerData","Countries"],q.$inject=["$window","$scope","$mdDialog","itemData","index"],G.$inject=["$window","$scope","$mdDialog","pparams"],a.disabledSubmitButton=!1,a.showApiProgress=!0,a.apiProgressValue=9,a.showInvoiceContent=!1,a.showRecEndDateError=!1,b.reset();var H=[{active:!1,icon:"zmdi zmdi-chart",name:"Create Invoice.",priority:2,state:"triangular.invoice-list",template:"app/triangular/components/menu/menu-item-link.tmpl.html",type:"link"}];angular.forEach(H,function(e,n){b.addCrumb(e)});var V=this;a.sortableOptions={"ui-floating":!0},a.showRecurringOptions=!1,a.createInvoiceBtnTitle="Create Invoice",V.invoice_data=JSON.parse('{"TotalAmt":0.00,"TxnDate":"","Line":[{"Amount":0.00,"DetailType":"SalesItemLineDetail","SalesItemLineDetail":{"ItemRef":{"value":"","name":""},"Qty":1}},{"Amount":0.00,"DetailType":"DiscountLineDetail","DiscountLineDetail":{"PercentBased":true,"DiscountPercent":0.00,"DiscountAccountRef":{}}},{"Amount":0.00,"DetailType":"SubTotalLineDetail","SubTotalLineDetail":{}}],"TxnTaxDetail":{"TxnTaxCodeRef":{"value":""},"TotalTax":0.00,"TaxLine":[{"Amount":0.00,"DetailType":"TaxLineDetail","TaxLineDetail":{"TaxRateRef":{"value":"0"},"PercentBased":true,"TaxPercent":0,"NetAmountTaxable":0.00}}]},"CustomerRef":{"value":"0","name":""},"CustomerMemo":{"value":""},"SalesTermRef":{"value":"0"},"DueDate":"","BillEmail":{"Address":""}}');a.invoice=V.invoice_data,a.customers=[],a.items=[],a.categories=[],a.taxRate=[],a.taxCode=[],a.taxRateDetail=[],a.lastInvoiceDocNumber="",a.HavingClassObj=!1,a.preferences,a.invoiceTerm,a.discountTypes=[{value:!1,text:"Discount Value"},{value:!0,text:"Discount Percent"}],a.cardlogos=[{id:"visa",title:"Visa",src:"visa.png"},{id:"master",title:"Master",src:"mastercard.png"},{id:"discover",title:"Discover",src:"discover.png"},{id:"amex",title:"Amex",src:"amex.png"}],A(),V.simulateQuery=!0,V.selectedCustomer=null,V.searchCustomer=null,V.customerSearch=_,V.selectedCustomerChange=$,a.HaveClass=!1,V.selectedProduct=[],V.searchProduct=[],V.itemSearch=R,V.selectedItemChange=E,V.getTotalItems=L,a.showProgress=!1,V.sno=1,V.InvoiceSno=O,e.setOption("sideMenuSize","icon"),a.$watch("apiProgressValue",function(e,n){if(e>=100&&(a.showApiProgress=!1,a.showInvoiceContent=!0,F(),1==a.preferences.SalesFormsPrefs.CustomTxnNumbers&&(a.invoice.DocNumber=D.getAutoIncrementInvoiceNo(a.lastInvoiceDocNumber)),"recurring"==v.action)){var t=JSON.parse(sessionStorage.getItem("invoice_detail")),r=!1;if(a.invoice.SalesTermRef.value=t.SalesTermRef.value,a.invoice.CustomerMemo=t.CustomerMemo,a.invoice.TxnDate="",a.setTerm(),a.invoice.TotalAmt=t.TotalAmt,a.invoice.Line=[],a.invoice.TxnTaxDetail=t.TxnTaxDetail,angular.forEach(t.Line,function(e,n){switch(e.DetailType){case"SalesItemLineDetail":var t=JSON.parse('{"Amount":0,"DetailType":"SalesItemLineDetail","SalesItemLineDetail":{"ItemRef":{"value":"","name":""},"Qty":1,"UnitPrice":0,"TaxCodeRef":{"value":"NON"}},"Description":""}');t.Amount=e.Amount,t.Description=e.Description,t.SalesItemLineDetail.ItemRef.name=e.SalesItemLineDetail.ItemRef.name,t.SalesItemLineDetail.ItemRef.value=e.SalesItemLineDetail.ItemRef.value,t.SalesItemLineDetail.Qty=e.SalesItemLineDetail.Qty,t.SalesItemLineDetail.ClassRef.value=e.SalesItemLineDetail.ClassRef.value,t.SalesItemLineDetail.TaxCodeRef.value=e.SalesItemLineDetail.TaxCodeRef.value,t.SalesItemLineDetail.UnitPrice=e.SalesItemLineDetail.UnitPrice,a.invoice.Line.push(t),0==n?V.searchProduct[0]=e.SalesItemLineDetail.ItemRef.name:V.searchProduct.push(e.SalesItemLineDetail.ItemRef.name);break;case"SubTotalLineDetail":var i=JSON.parse('{"Amount":0.00,"DetailType":"SubTotalLineDetail","SubTotalLineDetail":{}}'),o=parseFloat(e.Amount);i.Amount=o,a.invoice.Line.push(i);break;case"DiscountLineDetail":var s=JSON.parse('{"Amount":0,"DetailType":"DiscountLineDetail","DiscountLineDetail":{"PercentBased":false,"DiscountPercent":0,"DiscountAccountRef":{}}}');s.Amount=e.Amount,s.DiscountLineDetail.PercentBased=e.DiscountLineDetail.PercentBased,s.DiscountLineDetail.DiscountPercent=e.DiscountLineDetail.DiscountPercent,a.invoice.Line.push(s),r=!0}}),0==r){var i=JSON.parse('{"Amount":0.00,"DetailType":"DiscountLineDetail","DiscountLineDetail":{"PercentBased":true,"DiscountPercent":0.00,"DiscountAccountRef":{}}}');a.invoice.Line.push(i)}a.invoice.CustomerRef.value=t.CustomerRef.value,a.invoice.CustomerRef.name=t.CustomerRef.name,null!=t.BillEmail&&null!=t.BillEmail.Address&&(a.invoice.BillEmail.Address=t.BillEmail.Address),V.searchCustomer=a.invoice.CustomerRef.name;var o={Active:!0,PrimaryEmailAddr:{Address:a.invoice.BillEmail.Address},DisplayName:a.invoice.CustomerRef.name,Id:a.invoice.CustomerRef.value};V.selectedCustomer=o,U(),a.enableRecurring()}}),a.$on("add-customer-event",function(e,n){a.customers.push(n.data),V.selectedCustomer=n.data}),a.addNewCustomer=function(){g.show({locals:{customerData:V.searchCustomer,Countries:P},controller:N,templateUrl:"app/modules/invoice/createnew/customer.addnew.html",parent:angular.element(document.body),targetEvent:null,clickOutsideToClose:!0,fullscreen:!0}).then(function(e){},function(){})},a.addItem=function(){var e=r("filter")(a.invoice.Line,{DetailType:"SalesItemLineDetail"}),n=parseInt(e.length),t={Amount:0,Description:"",DetailType:"SalesItemLineDetail",SalesItemLineDetail:{ItemRef:{value:"0",name:""},UnitPrice:0,Qty:1,TaxCodeRef:{value:"NON"}}};a.invoice.Line.splice(n,0,t)},a.removeItem=function(e,n){V.counter--;var t=parseInt(L());t>1?(a.invoice.Line.splice(n,1),V.selectedProduct.splice(n,1),V.searchProduct.splice(n,1)):(V.selectedProduct.splice(n,1),V.searchProduct.splice(n,1)),a.calculateTotal()},a.$on("add-item-event",function(e,n){a.items.push(n.data),V.selectedProduct[n.index]=n.data}),a.addNewItem=function(e,n){g.show({locals:{itemData:e,index:n},controller:q,templateUrl:"app/modules/invoice/createnew/item.addnew.html",parent:angular.element(document.body),targetEvent:null,clickOutsideToClose:!0,fullscreen:!0}).then(function(e){},function(){})},V.counter=0,a.getId=function(){return V.counter++,V.counter},a.calculateTotal=function(){var e,n=0,t=0,r=0,i=0;angular.forEach(a.invoice.Line,function(t,r){switch(t.DetailType){case"SalesItemLineDetail":i=t.SalesItemLineDetail.Qty*t.SalesItemLineDetail.UnitPrice,i>0&&(n+=parseFloat(i));break;case"SubTotalLineDetail":e=r}}),a.invoice.Line[e].Amount=parseFloat(n),a.calculateTax(),a.calculateDiscount();var t=parseFloat(a.invoice.TxnTaxDetail.TotalTax),o=parseInt(z("DiscountLineDetail")),r=parseFloat(a.invoice.Line[o].Amount);n-=r,t>0&&(n+=t),a.invoice.TotalAmt=parseFloat(n)},a.calculateTax=function(){var e=0;if(angular.forEach(a.invoice.Line,function(n,t){switch(n.DetailType){case"SalesItemLineDetail":if(null!=n.SalesItemLineDetail.TaxCodeRef&&"TAX"==n.SalesItemLineDetail.TaxCodeRef.value){var r=n.SalesItemLineDetail.Qty*n.SalesItemLineDetail.UnitPrice;e+=parseFloat(r)}}}),e>0){var n="",t=a.invoice.TxnTaxDetail.TaxLine[0].TaxLineDetail.TaxRateRef.value,i="",o=0,s=0;t>0&&(n=r("filter")(a.taxRateDetail,{Id:t})[0],i=n.Name,o=n.RateValue),o>0&&(s=parseFloat(e*o/100))}"0"!=t?a.invoice.TxnTaxDetail.TxnTaxCodeRef.value=t:a.invoice.TxnTaxDetail.TxnTaxCodeRef.value="",o>0?a.invoice.TxnTaxDetail.TaxLine[0].TaxLineDetail.TaxPercent=o:a.invoice.TxnTaxDetail.TaxLine[0].TaxLineDetail.TaxPercent=0,s>0?(a.invoice.TxnTaxDetail.TotalTax=s,a.invoice.TxnTaxDetail.TaxLine[0].Amount=s):(a.invoice.TxnTaxDetail.TotalTax=void 0,a.invoice.TxnTaxDetail.TaxLine[0].Amount=void 0)},a.calculateDiscount=function(){var e=parseInt(z("DiscountLineDetail")),n=a.invoice.Line[e].DiscountLineDetail,t=n.PercentBased,r=0;r=t?parseFloat(n.DiscountPercent):parseFloat(a.invoice.Line[e].Amount);var i,o=parseInt(z("SubTotalLineDetail")),s=parseFloat(a.invoice.Line[o].Amount);s>0?(t?i=parseFloat(s*r/100):(i=parseFloat(r),a.invoice.Line[e].DiscountLineDetail.DiscountPercent=""),i>s?a.invoice.Line[e].Amount=0:i>=0?a.invoice.Line[e].Amount=parseFloat(i):a.invoice.Line[e].Amount=0):a.invoice.Line[e].Amount=0},a.setTerm=function(){var e=a.invoice.SalesTermRef.value;if(0!=e){var n=r("filter")(a.invoiceTerm,{Id:e})[0],t=n.DueDays,i=new Date,o=i.getFullYear(),s=i.getMonth(),l=i.getDate();""==a.invoice.TxnDate&&(a.invoice.TxnDate=new Date(o,s,l));var d=a.invoice.TxnDate;a.invoice.DueDate=new Date(d.getFullYear(),d.getMonth(),d.getDate()+t)}},a.promise=u.GetLastInvoice(),a.promise.then(function(e){0==e.statuscode&&o(function(){a.apiProgressValue+=13,a.lastInvoiceDocNumber=e.data[0].DocNumber})}),a.promise=p.GetPreferences(),a.promise.then(function(e){0==e.statuscode&&o(function(){a.apiProgressValue+=13,a.preferences=e.data.Preferences[0],a.HaveClassObj=a.preferences.AccountingInfoPrefs.ClassTrackingPerTxnLine,1==a.HaveClassObj?a.HavingClassObj=!0:a.HavingClassObj=!1,console.log()})}),a.promise=u.GetCustomers(),a.promise.then(function(e){0==e.statuscode&&o(function(){a.apiProgressValue+=13,a.customers=e.data.items})}),a.promise=u.GetClasses(),a.promise.then(function(e){0==e.statuscode&&o(function(){a.apiProgressValue+=13,a.ClassesItems=e.data.item,a.ClassesItemslength=e.data.length,a.ClassesItemslength>0?(a.HaveClass=!0,console.log(a.ClassesItems)):a.HaveClass=!1})}),a.SelectedClass=[],a.ClassDataGet=function(e,n){console.log(n),C.ClassRef={name:e.Name,type:"",value:e.Id},C.ClassRefName=e.Name,C.ClassRefId=e.Id,console.log(C.ClassRef)},a.promise=u.GetItems(),a.promise.then(function(e){0==e.statuscode&&o(function(){a.apiProgressValue+=13,a.items=e.data.items})}),a.promise=u.GetTaxRate(),a.promise.then(function(e){0==e.statuscode&&o(function(){a.apiProgressValue+=13,a.taxRate=e.data.items})}),a.promise=u.GetTaxCode(),a.promise.then(function(e){0==e.statuscode&&o(function(){a.apiProgressValue+=13,a.taxCode=e.data.items})}),a.promise=u.GetTerm(),a.promise.then(function(e){0==e.statuscode&&o(function(){a.apiProgressValue+=13,a.invoiceTerm=e.data.items,a.invoiceTerm.length>0&&(a.invoice.SalesTermRef.value=a.invoiceTerm[0].Id,a.invoice.SalesTermRef.name=term.Name,a.setTerm())})}),a.validateRecurringInterval=function(){var e=new Date(a.Recurring.StartDate);switch(a.showRecEndDateError=!1,a.disabledSubmitButton=!1,a.Recurring.Interval.Mode){case"Weekly":a.Recurring.EndDate=new Date(e.setDate(e.getDate()+7));break;case"Biweekly":a.Recurring.EndDate=new Date(e.setDate(e.getDate()+14));break;case"QuadWeekly":a.Recurring.EndDate=new Date(e.setDate(e.getDate()+28));break;case"Monthly":a.Recurring.EndDate=new Date(e.setMonth(e.getMonth()+1));break;case"Bimonthly":a.Recurring.EndDate=new Date(e.setMonth(e.getMonth()+2));break;case"Quarterly":a.Recurring.EndDate=new Date(e.setMonth(e.getMonth()+3));break;case"SemiAnnually":a.Recurring.EndDate=new Date(e.setMonth(e.getMonth()+6));break;case"Annually":a.Recurring.EndDate=new Date(e.setFullYear(e.getFullYear()+1));break;case"Biennially":a.Recurring.EndDate=new Date(e.setFullYear(e.getFullYear()+2));break;default:a.Recurring.EndDate=new Date}},a.validateRecuringEndDate=function(){a.showRecEndDateError=!1,a.disabledSubmitButton=!1;new Date(a.Recurring.EndDate);switch(a.Recurring.Interval.Mode){case"Weekly":var e=Math.round((a.Recurring.EndDate-a.Recurring.StartDate)/864e5);e%7!=0&&(a.showRecEndDateError=!0,a.disabledSubmitButton=!0);break;case"Biweekly":var e=Math.round((a.Recurring.EndDate-a.Recurring.StartDate)/864e5);e%14!=0&&(a.showRecEndDateError=!0,a.disabledSubmitButton=!0);break;case"QuadWeekly":var e=Math.round((a.Recurring.EndDate-a.Recurring.StartDate)/864e5);e%28!=0&&(a.showRecEndDateError=!0,a.disabledSubmitButton=!0);break;case"Monthly":var e=Math.round((a.Recurring.EndDate-a.Recurring.StartDate)/864e5);e%30!=0&&(a.showRecEndDateError=!0,a.disabledSubmitButton=!0);break;case"Bimonthly":var e=Math.round((a.Recurring.EndDate-a.Recurring.StartDate)/864e5);console.log(e),e%60!=0&&(a.showRecEndDateError=!0,a.disabledSubmitButton=!0);break;case"Quarterly":var e=Math.round((a.Recurring.EndDate-a.Recurring.StartDate)/864e5);e%120!=0&&(a.showRecEndDateError=!0,a.disabledSubmitButton=!0);break;case"SemiAnnually":var e=Math.round((a.Recurring.EndDate-a.Recurring.StartDate)/864e5);e%180!=0&&(a.showRecEndDateError=!0,a.disabledSubmitButton=!0);break;case"Annually":var e=Math.round((a.Recurring.EndDate-a.Recurring.StartDate)/864e5);e%365!=0&&(a.showRecEndDateError=!0,a.disabledSubmitButton=!0);break;case"Biennially":var e=Math.round((a.Recurring.EndDate-a.Recurring.StartDate)/864e5);e%720!=0&&(a.showRecEndDateError=!0,a.disabledSubmitButton=!0)}},a.loadingProgress=function(){return o(function(){},650)},a.createInvoice=function(){var e=!1;if(a.invoice.TxnDate=r("date")(a.invoice.TxnDate,"yyyy-MM-dd"),a.invoice.DueDate=r("date")(a.invoice.DueDate,"yyyy-MM-dd"),a.invoice.TotalAmt<=0?(e=!0,m.showToast("Invoice total should be greater than zero","bottom right","error")):1==a.showRecurringOptions&&null==a.CCProfileResponse.profile_id&&(e=!0,m.showToast("Please configure customer payment information","bottom right","error"),I.hash("payment_error"),x()),0==e)if(a.disabledSubmitButton=!0,a.showProgress=!0,a.showRecurringOptions){I.hash("recurring"),x();var n={RecurringParams:a.Recurring,InvoiceParams:a.invoice,ProfileParams:{profile_id:a.CCProfileResponse.profile_id}};a.promise=u.createRecurringInvoice(n),a.promise.then(function(e){0==e.statuscode?(m.showToast(e.statusmessage,"bottom right","success"),y.go("triangular.recurring")):m.showToast(e.statusmessage,"bottom right","error"),a.showProgress=!1,a.disabledSubmitButton=!1})}else a.promise=u.createInvoice(a.invoice),a.promise.then(function(e){0==e.statuscode?y.go("triangular.invoice-list"):m.showToast(e.statusmessage,"bottom right","error"),a.showProgress=!1,a.disabledSubmitButton=!1})},a.Recurring={Interval:{Mode:"Daily"}},a.intervals=a.intervals||[{value:"Daily",name:"Daily"},{value:"Weekly",name:"Weekly (Every seven days)"},{value:"Biweekly",name:"Biweekly (Every fourteen days)"},{value:"QuadWeekly",name:"Quad Weekly (Every twenty-eight days)"},{value:"Monthly",name:"Monthly (By calendar month)"},{value:"Bimonthly",name:"Bimonthly (Every two calendar months)"},{value:"Quarterly",name:"Quarterly (Every three calendar months)"},{value:"SemiAnnually",name:"Semi-annually (Every six calendar months)"},{value:"Annually",name:"Annually"},{value:"Biennially",name:"Biennially (Every two years)"}],a.dailyends=a.dailyends||[{value:"none",name:"None"},{value:"by",name:"By"},{value:"after",name:"After"}],a.weeks=a.weeks||[{value:"mon",name:"Monday"},{value:"tue",name:"Tuesday"},{value:"wed",name:"Wednesday"},{value:"thu",name:"Thursday"},{value:"fri",name:"Friday"},{value:"sat",name:"Saturday"},{value:"sun",name:"Sunday"}],a.monthoptions=a.monthoptions||[{value:"day",name:"Day"},{value:"1st",name:"First"},{value:"2nd",name:"Second"},{value:"3rd",name:"Third"},{value:"4rth",name:"Fourth"},{value:"last",name:"Last"}];var Y=B();a.months=j(Y),a.monthdropdownlists=a.monthdropdownlists||[{value:1,name:"January"},{value:2,name:"February"},{value:3,name:"March"},{value:4,name:"April"},{value:5,name:"May"},{value:6,name:"June"},{value:7,name:"July"},{value:8,name:"August"},{value:9,name:"September"},{value:10,name:"October"},{value:11,name:"November"},{value:12,name:"December"}],a.restValue=function(){a.Recurring={}},a.onChange=function(e){if(0!=e.value&&0!=e)a.showMonthDays=!0;else{var n=B();a.months=j(n),a.showMonthDays=!1}},a.enableRecurring=function(){a.showRecurringOptions=!0,a.requiredRecurringEndDate=!1,a.requiredRecurringOccurences=!0,a.showRecurringOptions=!0,a.createInvoiceBtnTitle="Save Template",I.hash("recurring"),x(),a.Recurring={Name:"",Interval:{Mode:"Daily"},End:"after",StartDate:new Date,EndDate:new Date}},a.disableRecurring=function(){a.Recurring={Name:"",Interval:{Mode:"Daily"}},a.showRecurringOptions=!1,a.requiredRecurringEndDate=!1,a.requiredRecurringOccurences=!1,a.createInvoiceBtnTitle="Create Invoice",I.hash("invoice"),x()},a.$watch("Recurring.Interval.Mode",function(e,n){switch(e){case"D":a.Recurring.Interval={Mode:"D",Every:1};break;case"W":a.Recurring.Interval={Mode:"W",Every:1,On:"mon"};break;case"M":a.Recurring.Interval={Mode:"M",Every:1,On:"day",Of:"1"};break;case"Y":a.Recurring.Interval={Mode:"Y",Every:1,On:"1"}}}),a.$watch("Recurring.Interval.On",function(e,n){"M"==a.Recurring.Interval.Mode&&("day"!=e?a.Recurring.Interval={Mode:"M",Every:1,On:e,Of:"mon"}:a.Recurring.Interval={Mode:"M",Every:1,On:"day",Of:"1"})}),a.$watch("Recurring.End",function(e,n){"by"==e?(a.requiredRecurringEndDate=!0,a.requiredRecurringOccurences=!1):"after"==e?(a.requiredRecurringEndDate=!1,a.requiredRecurringOccurences=!0):(a.requiredRecurringEndDate=!1,a.requiredRecurringOccurences=!1)}),a.CCProfileResponse={},a.isCCProfileCreated=!1,a.customerSelectedProfileIndex=0,a.showProfileGetProgress=!1,a.ccprofiles=[],a.setupPayment=function(){a.promise=p.GetPaymentInfo(),a.promise.then(function(e){0==e.statuscode&&e.data.total_count>0&&(a.paymentInfo=e.data.items[0])}),g.show({locals:{pparams:{mode:"profileadd",customer_id:a.invoice.CustomerRef.value}},scope:a,preserveScope:!0,parent:angular.element(document.body),templateUrl:"app/modules/invoice/payment/recurring_profile.html",clickOutsideToClose:!0,fullscreen:!0,controller:G}).then(function(){},function(){})},a.legalDocumentDialog=function(){g.show({scope:a,preserveScope:!0,parent:angular.element(document.body),templateUrl:"app/modules/invoice/legaldocument/legaldocument.html",clickOutsideToClose:!0,fullscreen:!0,controller:"LegalDocumentController"})},a.cancelInvoice=function(){var e=g.confirm().title("Confirm").textContent("Are you sure you want to cancel without save?").ariaLabel("Lucky day").ok("Yes").cancel("No");g.show(e).then(function(){y.go("triangular.invoice-list")},function(){})}}e.$inject=["triLayout","$window","triLoaderService","$filter","$log","$scope","$timeout","$interval","$q","$http","$compile","Clique","InvoiceModel","SettingModel","$mdDialog","$mdToast","$element","$stateParams","triBreadcrumbsService","$state","$mdBottomSheet","$rootScope","$mdSidenav","$anchorScroll","$location","dataService","helper","Countries"],angular.module("invoice").controller("InvoiceCreateController",e).filter("customInfo",function(){return function(e,n){var t;return""!=e&&(t=e+" "+n),t}})}(),function(){"use strict";angular.module("dashboard",[])}(),function(){"use strict";function e(e){function n(n,t,r,i){i.setLoading(!0);var a='select item.condition from weather.forecast where woeid in (select woeid from geo.places(1) where text="'+r.weatherWidget+'")',o="https://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(a)+"&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys";e.get(o).success(function(e){e.query.count>0&&(i.setLoading(!1),n.weather={iconClass:"wi-yahoo-"+e.query.results.channel.item.condition.code,date:new Date(e.query.created),temp:e.query.results.channel.item.condition.temp,text:e.query.results.channel.item.condition.text,location:r.weatherWidget})})}var t={require:"triWidget",link:n,restrict:"A"};return t}e.$inject=["$http"],angular.module("dashboard").directive("weatherWidget",e)}(),function(){"use strict";function e(){function e(e){e.tweets=[{user:"oxygenna",body:"Don't miss it! A Material Design Avatar set with 1440 avatars! http://sellfy.com/p/EUcC/ #avatars #materialdesign"},{user:"oxygenna",body:"Looking for a design for emotion case study to convince the boss/client? This one's worth $2.8 million."},{user:"oxygenna",body:"New Freebie! A set of 27 Drinks-Lifestyle Icons available in PSD/AI/PNG format #freebie #icons #drinks http://wp.me/p5Xp06-Fq"}],e.selectedTab=0,e.prevTweet=function(){e.selectedTab--,e.selectedTab<0&&(e.selectedTab=e.tweets.length-1)},e.nextTweet=function(){e.selectedTab++,e.selectedTab===e.tweets.length&&(e.selectedTab=0)}}var n={require:"triWidget",link:e,restrict:"A"};return n}angular.module("dashboard").directive("twitterWidget",e)}(),function(){"use strict";function e(){function e(e){e.todos=[{name:"Buy Milk",done:!1},{name:"Fix Server",done:!0},{name:"Walk the dog",done:!1},{name:"Upload files",done:!1}]}var n={require:"triWidget",link:e,restrict:"A"};return n}angular.module("dashboard").directive("todoWidget",e)}(),function(){"use strict";function e(e,n){function t(e){function t(e){for(e.data[0].length&&(e.labels=e.labels.slice(1),e.data[0]=e.data[0].slice(1));e.data[0].length<e.dataLength;)e.labels.push(""),e.data[0].push(i(e.data[0],e.maximum))}function r(e){e.data=[];for(var n=0;n<e.series.length;n++){for(var t=[],r=0;r<e.labels.length;r++)t.push(Math.floor(100*Math.random()+1));e.data.push(t)}}function i(e,n){var t=e.length,r=t?e[t-1]:50,i=r+10*Math.random()-5;return i<0?0:i>n?n:i}e.serverCharts={bandwidth:{dataLength:50,maximum:40,data:[[]],labels:[],options:{animation:!1,showTooltips:!1,pointDot:!1,datasetStrokeWidth:.5,maintainAspectRatio:!1},colours:["#4285F4"]},cpu:{dataLength:50,maximum:100,data:[[]],labels:[],options:{animation:!1,showTooltips:!1,pointDot:!1,datasetStrokeWidth:.5,maintainAspectRatio:!1},colours:["#DB4437"]},data24hrs:{series:["Bandwidth","CPU"],labels:["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"]},data7days:{series:["Bandwidth","CPU"],labels:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]},data365days:{series:["Bandwidth","CPU"],labels:["January","February","March","April","May","June","July","August","September","October","November","December"]}},r(e.serverCharts.data24hrs),r(e.serverCharts.data7days),r(e.serverCharts.data365days),n(function(){t(e.serverCharts.bandwidth),t(e.serverCharts.cpu)},1e3)}var r={require:"triWidget",link:t,restrict:"A"};return r}e.$inject=["$timeout","$interval"],angular.module("dashboard").directive("serverWidget",e)}(),function(){"use strict";function e(e,n,t){function r(r,i,a,o){function s(){r.alert="You cancelled the dialog."}function l(e,n,t){e.data=t,e.closeDialog=function(){n.cancel()}}l.$inject=["$scope","$mdDialog","data"],o.setLoading(!0);var d=e(a.loadDataWidget)(r);o.setMenu({icon:"zmdi zmdi-more-vert",items:[{icon:"zmdi zmdi-search",title:"Details",click:function(e){var n=[];angular.forEach(d,function(e,t){n=r[t]}),t.show({controller:l,templateUrl:"app/examples/dashboards/widgets/widget-load-data-dialog.tmpl.html",targetEvent:e,locals:{data:n},clickOutsideToClose:!0}).then(function(e){r.alert='You said the information was "'+e+'".'},s)}},{icon:"zmdi zmdi-share",title:"Share"},{icon:"zmdi zmdi-print",title:"Print"}]}),angular.forEach(d,function(e,t){n.get(e).success(function(e){var n=e.shift();o.setLoading(!1),r[t]={header:n,data:e}})})}var i={require:"triWidget",link:r,restrict:"A"};return i}e.$inject=["$parse","$http","$mdDialog"],angular.module("dashboard").directive("loadDataWidget",e)}(),function(){"use strict";function e(){function e(e){e.geoChartData={type:"GeoChart",data:[["Country","Popularity"],["Germany",200],["United States",300],["Brazil",400],["Canada",500],["France",600],["RU",700]]}}var n={require:"triWidget",link:e,restrict:"A"};return n}angular.module("dashboard").directive("googleGeochartWidget",e)}(),function(){"use strict";function e(){function e(e){e.contacts=[{name:"Morris Onions",image:"assets/images/avatars/avatar-2.png"},{name:"Newton Welch",image:"assets/images/avatars/avatar-5.png"},{name:"Kelly Koelpin",image:"assets/images/avatars/avatar-1.png"},{name:"Rowland Emard",image:"assets/images/avatars/avatar-2.png"},{name:"Kailee Johnston",image:"assets/images/avatars/avatar-3.png"},{name:"Roberto Grimes",image:"assets/images/avatars/avatar-4.png"}]}var n={requrie:"triWidget",link:e,restrict:"A"};return n}angular.module("dashboard").directive("contactsWidget",e)}(),function(){"use strict";function e(){function e(e){e.conversation=[],e.userClass=function(e){return e?"user-left":"user-right"}}var n={require:"triWidget",link:e,restrict:"A"};return n}angular.module("dashboard").directive("chatWidget",e)}(),function(){"use strict";function e(e,n){function t(e){function t(){for(e.tickerChart.data[0].length&&(e.tickerChart.labels=e.tickerChart.labels.slice(1),e.tickerChart.data[0]=e.tickerChart.data[0].slice(1));e.tickerChart.data[0].length<i;)e.tickerChart.labels.push(""),e.tickerChart.data[0].push(r(e.tickerChart.data[0]))}function r(e){var n=e.length,t=n?e[n-1]:50,r=t+10*Math.random()-5;return r<0?0:r>100?100:r}var i=100;e.tickerChart={data:[[]],labels:[],options:{animation:!1,showScale:!1,showTooltips:!1,pointDot:!1,datasetStrokeWidth:.5,maintainAspectRatio:!1}},n(function(){t()},1e3)}var r={require:"triWidget",link:t,restrict:"A"};return r}e.$inject=["$timeout","$interval"],angular.module("dashboard").directive("chartjsTickerWidget",e)}(),function(){"use strict";function e(e){function n(n,t,r,i){i.setLoading(!0),e(function(){i.setLoading(!1)},1500)}var t={require:"triWidget",link:n,restrict:"A"};return t}e.$inject=["$timeout"],angular.module("dashboard").directive("chartjsPieWidget",e)}(),function(){"use strict";function e(e){function n(n,t,r,i){function a(){n.lineChart.data=[];for(var e=0;e<n.lineChart.series.length;e++)for(var t=[],r=0;r<n.lineChart.labels.length;r++)t.push(Math.floor(100*Math.random()+1));n.lineChart.data=n.invoice.lineChart.data}i.setLoading(!0),e(function(){i.setLoading(!1),a()},1500),n.lineChart={labels:["January","February","March","April","May"],series:["Pageviews","Visits"],options:{datasetFill:!1,responsive:!0},backgroundColor:["#fff000","#000000","#ccc"],data:[]}}var t={require:"triWidget",link:n,restrict:"A"};return t}e.$inject=["$timeout"],angular.module("dashboard").directive("chartjsLineWidget",e)}(),function(){"use strict";function e(){var e={bindToController:!0,controller:n,controllerAs:"calendarController",restrict:"A"};return e}function n(e,n,t){function r(e){n.calendars.calendarWidget.fullCalendar(e)}function i(){}function a(){s()}var o=this;o.calendarEvents=[],o.calendarOptions={lang:"en",header:!1,height:"auto",viewRender:function(e){o.currentDay=e.calendar.getDate()}},o.changeMonth=r;var s=t.$on("$translateChangeSuccess",i);e.$on("$destroy",a)}n.$inject=["$scope","uiCalendarConfig","$rootScope"],angular.module("dashboard").directive("calendarWidget",e)}(),function(){"use strict";function e(e,n,t,r,i,a,o,s,l){function d(){f.fromDate.getTime()>f.toDate.getTime()?s.showToast("Start Date should be less than End Date","bottom right","error"):("undefined"!=typeof Storage&&(sessionStorage.setItem("fromDate",f.fromDate),sessionStorage.setItem("toDate",f.toDate)),1==p(f.fromDate,f.toDate)&&a.reload())}function c(e){a.go("triangular.invoice-list",{type:e})}function m(){var t=e("date")(f.fromDate,"yyyy-MM-dd"),r=e("date")(f.toDate,"yyyy-MM-dd");f.statsQuery.start_date=t,f.statsQuery.end_date=r,p(f.fromDate,f.toDate),f.promise=o.GetInvoiceStatistics(f.statsQuery),f.promise.then(function(e){0==e.statuscode&&(n.invoice=e.data,u(),f.subPieChartTitle={title1:n.invoice.subPieChart1.heading,title2:n.invoice.subPieChart2.heading,title3:n.invoice.subPieChart3.heading},"PROCESSED 0.00%"==n.invoice.subPieChart1.heading&&"DELIVERED 0.00%"==n.invoice.subPieChart2.heading&&"READ 0.00%"==n.invoice.subPieChart3.heading&&(n.showSubPieChart=!1),window.dispatchEvent(new Event("resize")))})}function u(){for(var e=f.statsQuery.payment_from.split("-"),t=f.statsQuery.payment_to.split("-"),r=new Date(e[1]+"/01/"+e[0]),i=new Date(t[1]+"/01/"+t[0]),a=[],o=[],s=["January","February","March","April","May","June","July","August","September","October","November","December"],l=[],d=[],c=n.invoice.lineChart.labels,m=n.invoice.lineChart.data[0],u=n.invoice.lineChart.data[1];r<=i;){var p=(r.getFullYear(),s[r.getMonth()]),g=p;a.push(g);var c=n.invoice.lineChart.labels;if(c.length>0)if(c.indexOf(g)>=0){var h=c.indexOf(g),v=m[h],b=u[h];l.push(v),d.push(b)}else l.push(0),d.push(0);var y=r.setMonth(r.getMonth()+1);r=new Date(y)}o.push(l),o.push(d),n.invoice.lineChart.labels=a,n.invoice.lineChart.data=o}function p(n,t){var r,i,a=0;if(n.getMonth()==t.getMonth()&&n.getFullYear()==t.getFullYear()){var o=n.getMonth();for(a=o;a>o-5&&1!=a;a--);var s=a;r=new Date(n.getFullYear(),s),i=t}else n.getMonth()<t.getMonth()&&n.getFullYear()==t.getFullYear()?(r=n,i=t):n.getMonth()<t.getMonth()&&n.getFullYear()<t.getFullYear()?(r=n,i=t):(r=n,i=t);var r=e("date")(r,"yyyy-MM"),i=e("date")(i,"yyyy-MM");return f.statsQuery.payment_from=r,f.statsQuery.payment_to=i,!0}function g(){}sessionStorage.removeItem("invoice_search");var f=this;f.showInvoiceList=c,f.getInvoiceStatistics=m,f.FilterDashboard=d,f.validateDate=g,n.showSubPieChart=!0;var h,v,b=new Date,y=b.getFullYear(),w=b.getMonth();void 0!==typeof Storage&&(h=sessionStorage.getItem("fromDate"),v=sessionStorage.getItem("toDate")),f.fromDate=void 0!=h?new Date(h):new Date(y,w,1),f.toDate=void 0!=v?new Date(v):new Date(y,w+1,0),n.invoice={statistics:{paid:0,due:0,overdue:0},pieChart:{labels:["PAID","Due","DUE"],data:[0,0,0]},lineChart:{label:[" "," "," "," "," "],data:[],series:["Approved","Declined"]},subPieChart1:{heading:"PROCESSED 0.00%"},subPieChart2:{heading:"DELIVERED 0.00%"},subPieChart3:{heading:"READ 0.00%"}},f.options={legend:{display:!0},showTooltips:!1,cutoutPercentage:60,responsive:!0,maintainAspectRatio:!0},f.statsQuery={start_date:"",end_date:""},f.getInvoiceStatistics(),n.$watch("vm.fromDate",function(e,t){n.minDate=f.fromDate,n.maxDate=new Date(f.fromDate.getFullYear(),12,0)})}e.$inject=["$filter","$scope","$timeout","$mdToast","$rootScope","$state","DashboardModel","Clique","$mdDialog"],
angular.module("dashboard").controller("DashboardAnalyticsController",e)}(),function(){"use strict";angular.module("triangular.themes",[])}(),function(){"use strict";function e(e){var t={};return{theme:function(e){if(angular.isDefined(t[e]))return t[e];var r=new n(e);return t[e]=r,t[e]},$get:function(){return{getTheme:function(e){return t[e]},getThemeHue:function(n,t,r){if(angular.isDefined(e._THEMES[n])&&angular.isDefined(e._THEMES[n].colors[t])){var i=e._THEMES[n].colors[t];if(angular.isDefined(e._PALETTES[i.name])&&angular.isDefined(e._PALETTES[i.name][i.hues[r]]))return e._PALETTES[i.name][i.hues[r]]}},getPalette:function(n){return e._PALETTES[n]},getPaletteColor:function(n,t){if(angular.isDefined(e._PALETTES[n])&&angular.isDefined(e._PALETTES[n][t]))return e._PALETTES[n][t]},rgba:e._rgba,palettes:e._PALETTES,themes:e._THEMES,parseRules:e._parseRules}}}}function n(e){var n=["primary","accent","warn","background"],t=this;t.name=e,t.colors={},t.isDark=!1,n.forEach(function(e){t[e+"Palette"]=function(n,r){return t.colors[e]={name:n,hues:{}},angular.isDefined(r)&&(t.colors[e].hues=r),t}}),t.dark=function(e){t.isDark=!!angular.isUndefined(e)||e}}e.$inject=["$mdThemingProvider"],angular.module("triangular.themes").provider("triTheming",e)}(),function(){"use strict";function e(e,t){var r={},i=null,a=!1;return{skin:function(i,a){if(angular.isDefined(r[i]))return r[i];var o=new n(i,a,e,t);return r[i]=o,r[i]},setSkin:function(e){if(!angular.isUndefined(r[e])){if(i=r[e],a){var n;angular.injector(["ngCookies"]).invoke(["$cookies",function(e){n=e}]);var t=n.get("triangular-skin");if(angular.isDefined(t)){var o=angular.fromJson(t);i=angular.isDefined(r[o.skin])?r[o.skin]:r[0]}}return i.loadThemes(),i}},useSkinCookie:function(e){a=e},$get:function(){return{getCurrent:function(){return i},getSkins:function(){return r}}}}}function n(e,n,t,r){var i=["sidebar","logo","toolbar","content"],a=this;a.id=e,a.name=n,a.elements={},i.forEach(function(e){a[e+"Theme"]=function(n){return a.elements[e]=n,a}}),a.loadThemes=function(){for(var e in a.elements){var n=r.theme(a.elements[e]);t.theme(n.name).primaryPalette(n.colors.primary.name,n.colors.primary.hues).accentPalette(n.colors.accent.name,n.colors.accent.hues).warnPalette(n.colors.warn.name,n.colors.warn.hues).dark(n.isDark),angular.isDefined(n.colors.background)&&t.theme(n.name).backgroundPalette(n.colors.background.name,n.colors.background.hues)}t.setDefaultTheme(a.elements.content)}}function t(e,n){e.triSkin=n.getCurrent()}e.$inject=["$mdThemingProvider","triThemingProvider"],n.$inject=["id","name","$mdThemingProvider","triThemingProvider"],t.$inject=["$rootScope","triSkins"],angular.module("triangular.themes").provider("triSkins",e).run(t)}(),function(){"use strict";angular.module("triangular",["ngMaterial","triangular.layouts","triangular.components","triangular.themes","triangular.directives","triangular.router","ui.router"])}(),function(){"use strict";function e(e,n,t,r,i,a,o,s){function l(){i(function(){var e=o.title;angular.forEach(d.crumbs,function(n){var t=n.name;a.has("translateFilter")&&(t=r("translate")(n.name)),e+=" "+o.separator+" "+t}),n.document.title=e})}var d=s.breadcrumbs,c=e.$on("changeTitle",function(){l();var n={state:t.current.name};e.$emit("toolBarActions",n)});e.$on("$destroy",function(){c()})}e.$inject=["$rootScope","$window","$state","$filter","$timeout","$injector","triRoute","triBreadcrumbsService"],angular.module("triangular").run(e)}(),function(){"use strict";function e(){function e(e){r.docTitle=e}function n(e){r.separator=e}function t(){return{title:r.docTitle,separator:r.separator}}var r={docTitle:"",separator:""};this.setTitle=e,this.setSeparator=n,this.$get=t}angular.module("triangular").provider("triRoute",e)}(),function(){"use strict";angular.module("triangular.router",[])}(),function(){"use strict";angular.module("triangular.profiler",["digestHud"])}(),function(){"use strict";function e(e){e.enable(),e.setHudPosition("top right"),e.numTopWatches=20,e.numDigestStats=25}e.$inject=["digestHudProvider"],angular.module("triangular.profiler").config(e)}(),function(){"use strict";function e(){function e(e){return t[e]}function n(e,n){t[e]=n}var t={toolbarSize:"default",toolbarShrink:!0,toolbarClass:"",contentClass:"",innerContentClass:"",sideMenuSize:"full",showToolbar:!0,footer:!0,contentTemplateUrl:"app/triangular/layouts/default/default-content.tmpl.html",sidebarLeftTemplateUrl:"app/layouts/leftsidenav/leftsidenav.tmpl.html",sidebarLeftController:"MenuController",sidebarRightTemplateUrl:"app/triangular/components/notifications-panel/notifications-panel.tmpl.html",sidebarRightController:"NotificationsPanelController",toolbarTemplateUrl:"app/triangular/components/toolbars/toolbar.tmpl.html",toolbarController:"DefaultToolbarController",footerTemplateUrl:"app/triangular/components/footer/footer.tmpl.html"},r=["toolbarSize","toolbarShrink","toolbarClass","contentClass","innerContentClass","sideMenuSize","showToolbar","footer","contentTemplateUrl","sidebarLeftTemplateUrl","sidebarLeftController","sidebarRightTemplateUrl","sidebarRightController","toolbarTemplateUrl","toolbarController","footerTemplateUrl","loaderTemplateUrl","loaderController"],i={};this.getDefaultOption=e,this.setDefaultOption=n,angular.extend(i,t),this.$get=function(){function e(e,n){i[e]=n}function n(e,n){angular.forEach(r,function(e){i[e]=t[e]});var a=angular.isDefined(n.data)&&angular.isDefined(n.data.layout)?n.data.layout:{};angular.extend(i,i,a)}return{layout:i,setOption:e,updateLayoutFromState:n}}}function n(e,n){function t(){r()}var r=e.$on("$stateChangeStart",n.updateLayoutFromState);e.$on("$destroy",t)}n.$inject=["$rootScope","triLayout"],angular.module("triangular").run(n).provider("triLayout",e)}(),function(){"use strict";angular.module("triangular.directives",[])}(),function(){"use strict";function e(e,n){function t(t,r,i){e(r);var a=r.controller("mdTheme");if(angular.isDefined(a)){var o=i.themeBackground,s="default";if(o.indexOf(":")!==-1){var l=i.themeBackground.split(":");o=l[0],s=l[1]}var d=n.getThemeHue(a.$mdTheme,o,s);angular.isDefined(d)&&r.css({"background-color":n.rgba(d.value),"border-color":n.rgba(d.value),color:n.rgba(d.contrast)})}}var r={link:t,restrict:"A"};return r}e.$inject=["$mdTheming","triTheming"],angular.module("triangular.directives").directive("themeBackground",e)}(),function(){"use strict";function e(){function e(e,n,t,r){r.$viewChangeListeners.push(function(){r.$setValidity("samePassword",e.triSamePassword.$modelValue===r.$modelValue),e.triSamePassword.$setValidity("samePassword",e.triSamePassword.$modelValue===r.$modelValue)})}var n={restrict:"A",require:"ngModel",link:e,scope:{triSamePassword:"="}};return n}angular.module("triangular.directives").directive("triSamePassword",e)}(),function(){"use strict";function e(e){function n(n,t,r){var i=r.paletteBackground.split(":"),a=e.getPaletteColor(i[0],i[1]);angular.isDefined(a)&&t.css({"background-color":e.rgba(a.value),"border-color":e.rgba(a.value),color:e.rgba(a.contrast)})}var t={link:n,restrict:"A"};return t}e.$inject=["triTheming"],angular.module("triangular.directives").directive("paletteBackground",e)}(),function(){"use strict";function e(e){function n(n,t,r){var i,a={useEasing:!0,useGrouping:!0,separator:",",decimal:".",prefix:"",suffix:""};if(n.options)for(var o in a)angular.isDefined(n.options[o])&&(a[o]=n.options[o]);r.from=angular.isUndefined(r.from)?0:parseInt(r.from),r.decimals=angular.isUndefined(r.decimals)?1:parseFloat(r.decimals),r.duration=angular.isUndefined(r.duration)?1:parseFloat(r.duration),e(function(){i=new CountUp(t[0],r.from,n.countupto,r.decimals,r.duration,a),i.start(),n.$watch("countupto",function(e,n){angular.isDefined(e)&&e!=n&&i.update(e)})},500)}var t={link:n,restrict:"A",scope:{countupto:"=",options:"="}};return t}e.$inject=["$timeout"],angular.module("triangular.directives").directive("countupto",e)}(),function(){"use strict";angular.module("transactions",[])}(),function(){"use strict";function e(e,n,t){function r(e){var r=t(e);return n.callService("get","/invoice/transactions/?"+r,"").then(s,l)}function i(e){return n.callService("post","/transaction/void/",e).then(s,l)}function a(e){return n.callService("post","/transaction/refund/",e).then(s,l)}function o(e){return n.callService("post","/transaction/email_receipt/",e).then(s,l)}function s(e){return console.log(e),e.data}function l(e){return e}var d={};return d.GetAllTransaction=r,d.DoVoidTransaction=i,d.DoRefundTransaction=a,d.sendReceipt=o,d}angular.module("invoice").factory("TransactionModel",e),e.$inject=["$http","Clique","$httpParamSerializer"]}(),function(){"use strict";function e(e,n,t,r,i,a,o,s,l,d,c,m,u,p,g,f,h,v,b,y){function w(){var e="transaction.print.html",n=i.transactionResponse.trans_type.search("triposipp350");if(0==n){i.transactionResponse;e="transaction.triposipp350.print.html"}else void 0!=i.parentTransType&&0==i.parentTransType.search("triposipp350")&&(e="transaction.triposipp350.print.html");d.show({controller:C,templateUrl:"assets/"+e,parent:angular.element(document.body),targetEvent:null,clickOutsideToClose:!0,fullscreen:!0}).then(function(e){},function(){})}function C(e,t,r){t.transData=i.transData,t.companyInfo=i.companyInfo,t.hideDialogActions=!1,t.hideEmailReceiptButton=!0,t.transactionResponse=i.transactionResponse,t.refund_amount=0,t.confirm=function(e){var n=t.transData.trans_type,i=/triposipp350/;if("void"==e)n.match(i)&&t.hardwareSupport.triposipp350?t.processTriPosVoid(t.transData,e):t.processRefundAndVoid(e);else if("refund"==e){var a="refund"==e?"Are you sure you want to refund?":"Are you sure you want to void this payment?",o=r.confirm().title(a).textContent("").ariaLabel("Confirmation").ok("Confirm").cancel("Cancel");r.show(o).then(function(){n.match(i)&&t.hardwareSupport.triposipp350?t.processTriPosRefund(t.transData,e):t.processRefundAndVoid(e)},function(){})}},t.processTriPosVoid=function(e,n){t.showProgress=!0,t.hideDialogActions=!0;var i=e.ref_id,a=(e.trans_type.split("_"),y.config.serviceAddress+"api/v1/void/"+i),o={laneId:t.laneId};y.processVoidRefund(a,o,y.config,function(e){t.showProgress=!1,t.hideDialogActions=!1;var i=e.data,a=i;if(1==a._hasErrors){var o=i._errors[0].developerMessage;m.showToast(o,"bottom right","error"),r.hide()}else{var s="",l="";1==a.isApproved?s="approved":(s="declined",l=a._processor.processorResponseMessage);var d="",c="",u=k.xml_str2json(a._processor.processorRawResponse);d=u.CreditCardVoidResponse.Response,c="approved"==s?a._processor.hostResponseCode+"/"+a._processor.hostResponseMessage:a._processor.expressResponseCode+"/"+a._processor.expressResponseMessage;var p="";p={processorRawResponse:{RawResponse:d,MerchantId:a.merchantId,TerminalId:a.terminalId,ApprovalNumber:a.approvalNumber,paymentType:"Void",ResponseCode:c},transactionId:a.transactionId,TransStatus:s,StatusMessage:l},t.transData.ProcessorInfo=p,t.transData.status=s,t.transData.statusmessage=l,t.transData.authcode=c,t.transData.payment_data="",t.processRefundAndVoid(n)}})},t.processTriPosRefund=function(e,n){t.showProgress=!0,t.hideDialogActions=!0;var i=e.ref_id,a=e.trans_type.split("_"),o=y.config.serviceAddress+"api/v1/reversal/"+i+"/"+a[1],s=parseFloat(t.refund_amount),l={laneId:t.laneId,transactionAmount:s};y.processVoidRefund(o,l,y.config,function(e){t.showProgress=!1,t.hideDialogActions=!1;var i=e.data,a=i;if(1==a._hasErrors){var o=i._errors[0].developerMessage;m.showToast(o,"bottom right","error"),r.hide()}else{var s="",l="";1==a.isApproved?s="approved":(s="declined",l=a._processor.processorResponseMessage);var d="",c="",u="",p=k.xml_str2json(a._processor.processorRawResponse);u=a.paymentType.toLowerCase(),"credit"==u?d=p.CreditCardReversalResponse.Response:"debit"==u?d=p.DebitCardReversalResponse.Response:"gift"==u&&(d=p.GiftCardReversalResponse.Response),c="approved"==s?a._processor.hostResponseCode+"/"+a._processor.hostResponseMessage:a._processor.expressResponseCode+"/"+a._processor.expressResponseMessage;var g="";g={processorRawResponse:{RawResponse:d,MerchantId:a.merchantId,TerminalId:a.terminalId,ApprovalNumber:a.approvalNumber,paymentType:"Refund",ResponseCode:c},transactionId:a.transactionId,TransStatus:s,StatusMessage:l},t.transData.ProcessorInfo=g,t.transData.status=s,t.transData.statusmessage=l,t.transData.authcode=c,t.transData.payment_data="",t.processRefundAndVoid(n)}})},t.processRefundAndVoid=function(e){if(t.showProgress=!0,t.hideDialogActions=!0,"refund"==e){var n=t.transData;n.refund_amount=t.refund_amount,n.action="refund",n.type=n.process_type,P.promise=c.DoRefundTransaction(n),P.promise.then(function(e){0==e.statuscode?(m.showToast(e.statusmessage,"bottom right","success"),i.transactionResponse=e.data,I(),w()):m.showToast(e.statusmessage,"bottom right","error"),r.hide(),t.showProgress=!1})}if("void"==e){var n=t.transData;n.action="void",n.type=n.process_type,P.promise=c.DoVoidTransaction(n),P.promise.then(function(e){0==e.statuscode?(m.showToast(e.statusmessage,"bottom right","success"),i.transactionResponse=e.data,I(),w()):m.showToast(e.statusmessage,"bottom right","error"),r.hide(),t.showProgress=!1})}},t.cancel=function(){r.cancel()},t.print=function(){var e="transaction.print.html",r=t.transactionResponse.trans_type.search("triposipp350");0==r?e="transaction.triposipp350.print.html":void 0!=i.parentTransType&&0==i.parentTransType.search("triposipp350")&&(e="transaction.triposipp350.print.html"),n.print("assets/"+e,{transactionResponse:t.transactionResponse,companyInfo:i.companyInfo})}}function S(e){u(e).toggle().then(function(){p.debug("toggle "+e+" is done")})}function x(){var e;o.$watch("vm.query.filter",function(n,t){t||(e=P.query.page),n!==t&&(P.query.page=1),n||(P.query.page=e),P.getTransaction()})}function I(){P.isTransactionLoaded=!0,P.query.from=a("date")(o.from,"yyyy-MM-dd"),P.query.to=a("date")(o.to,"yyyy-MM-dd");var e=P.query;sessionStorage.setItem("transaction_search",JSON.stringify(e)),P.promise=c.GetAllTransaction(P.query),P.promise.then(function(e){0==e.statuscode&&(P.tblData=e.data.items),P.isTransactionLoaded=!1})}function T(){P.filter.show=!1,P.query.filter="",P.filter.form.$dirty&&P.filter.form.$setPristine()}function D(e,n,t,r,i,a,o,s,l,d){o.disabledSubmitButton=!1,o.showCCSIcon="zmdi zmdi-account-add",o.showCCS=!1,o.toggleCCS=function(){o.showCCS=!o.showCCS,o.showCCSIcon=o.showCCS?"zmdi zmdi-account":"zmdi zmdi-account-add"},o.cancel=function(){n.hide()},o.validateChip=function(e,n){if(e){var t=/^[_a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/;t.test(e)||("bcc"==n&&o.settings.InvoiceContacts.bcc_email.pop(),"cc"==n&&o.settings.InvoiceContacts.cc_email.pop(),"to"==n&&o.settings.InvoiceContacts.to_email.pop()),"to"==n&&(0==o.settings.InvoiceContacts.to_email.length?o.disabledSubmitButton=!0:o.disabledSubmitButton=!1)}},o.submit=function(){o.showProgress=!0,o.disabledSubmitButton=!0;var e={companyInfo:o.settings.companyInfo,transaction:o.settings.transaction,contact:o.settings.InvoiceContacts,receiptType:o.settings.receipt_type};P.promise=d.sendReceipt(e),P.promise.then(function(e){0==e.statuscode?l.showToast(e.statusmessage,"bottom right","success"):l.showToast(e.statusmessage,"bottom right","error"),o.showProgress=!1,n.hide()})}}D.$inject=["$timeout","$mdDialog","$filter","triSkins","$window","$rootScope","$scope","SettingModel","Clique","TransactionModel"],C.$inject=["$window","$scope","$mdDialog"],sessionStorage.removeItem("invoice_search");var P=this;i.transactionResponse={id:1,name:"Faisal"};var _=!1;P.isTransactionLoaded=!0,P.tblData=[],o.processorType,P.columns=function(){return["ref_id","trans_timestamp","trans_amount","remain_amount","trans_type","status","customer_name","process_type","invoice_no"]},o.orderdata=["ref_id","trans_timestamp","trans_amount","remain_amount","trans_type","status","customer_name","process_type","invoice_no"],o.hardwareSupport={triposipp350:!0};var k=new X2JS;o.laneId,o.triPOSLaneInfo="",i.parentTransType="",P.disabledVoidOption=function(e){switch(e.trans_type){case"triposipp350_debit":return!0;case"triposipp350_gift":return!0;default:return e.trans_amount!=e.remain_amount||e.trans_amount<=0}return!0},P.showRefundOption=function(e){return!0},o.promise=h.GetPaymentInfo(),o.promise.then(function(e){0==e.statuscode&&(o.promise=h.GetCompanyInfo(),o.promise.then(function(e){0==e.statuscode&&(i.companyInfo=e.data)}),o.paymentInfo=e.data,e.data.total_count>0&&angular.forEach(e.data.items,function(e,n){var t=e.is_default,r=e.voidrefund;1==t&&(1==b.checkHardwareModel(e,"triposipp350")&&(o.hardwareSupport.triposipp350=!0,y.config.serviceAddress=e.configuration.hardware.triposipp350.service_address,y.config.tpAuthorizationCredential=e.configuration.hardware.triposipp350.developer_key,y.config.tpAuthorizationSecret=e.configuration.hardware.triposipp350.developer_secret,null!=o.laneId&&void 0!=o.laneId||y.getLaneInfo(y.config,function(e){var n=e.data;o.triPOSLaneInfo=n,o.triPOSLaneInfo._hasErrors,1==o.triPOSLaneInfo._hasErrors?o.triPOSLaneInfo.errorMessage=n._errors[0].developerMessage:o.laneId=parseInt(o.triPOSLaneInfo.ipLanes[0].laneId)})),1==r&&(_=!0,P.tblAction=[{name:"Void",icon:"fa fa-plus",method:"call-void","class":"md-warn md-raised md-small"},{name:"Refund",icon:"fa fa-minus",method:"call-refund","class":"md-primary md-raised md-small"}],i.$on("call-void",function(e,n){callVoid(n)}),i.$on("call-refund",function(e,n){callRefund(n)})))}))}),o.sendReceiptDialog=function(){d.show({controller:D,templateUrl:"app/modules/transactions/sendConfirmationDialog.html",parent:angular.element(document.body),scope:o.$new(),clickOutsideToClose:!0}).then(function(e){},function(){})},o.emailReceipt=function(e,n){o.settings={InvoiceContacts:{sender_email:"",sender_name:"",cc_email:[],bcc_email:[],to_email:[],save_email_erp:!1},subject:"",template_id:"",title:"Send Reciept"};var t="normal",r=n.search("triposipp350");0==r&&(t="triposipp350");var a=e.customer_email;o.promise=h.GetSettings(),o.promise.then(function(n){0==n.statuscode&&(o.settings=n.data,o.settings.title="Send Receipt",o.settings.transaction=e,o.settings.companyInfo=i.companyInfo.company,o.settings.receipt_type=t,o.settings.InvoiceContacts.to_email=[],""!=a&&o.settings.InvoiceContacts.to_email.push(a),o.sendReceiptDialog())})},o.callVoid=function(e,n){i.transData=e,i.parentTransType=n,d.show({controller:C,templateUrl:"app/modules/transactions/transaction.void.tmpl.html",parent:angular.element(document.body),targetEvent:null,clickOutsideToClose:!0,fullscreen:!0,scope:o,preserveScope:!0}).then(function(e){},function(){})},o.callRefund=function(e,n){i.transData=e,i.parentTransType=n,d.show({controller:C,templateUrl:"app/modules/transactions/transaction.refund.tmpl.html",parent:angular.element(document.body),targetEvent:null,clickOutsideToClose:!0,fullscreen:!0,scope:o,preserveScope:!0}).then(function(e){},function(){})},o.printReceipt=function(e,n){i.parentTransType=n,i.transactionResponse=e,w()},P.selected=[],P.filter={options:{debounce:500}},P.query={order:"-trans_timestamp",limit:20,page:1};var A=new Date,$=A.getFullYear(),R=A.getMonth(),M=sessionStorage.getItem("transaction_search");null!=M&&(M=JSON.parse(M),null!=M.customerSelectedItem&&Object.keys(M.customerSelectedItem).length>0&&(P.selectedItem=M.customerSelectedItem),P.query=M),o.from=void 0!=P.query.from?new Date(P.query.from):new Date($,R,1),o.to=void 0!=P.query.to?new Date(P.query.to):new Date($,R+1,0),P.getTransaction=I,P.removeFilter=T,P.openSidebar=S,x(),o.resetForm=function(){var e=new Date,n=e.getFullYear(),t=e.getMonth();P.query={status:"",order:"-trans_timestamp",customer:"",limit:20,page:1},o.from=new Date(n,t,1),o.to=new Date(n,t+1,0),sessionStorage.setItem("transaction_search","{}")}}e.$inject=["$window","printer","$http","$compile","$rootScope","$filter","$scope","$timeout","$q","$mdDialog","TransactionModel","Clique","$mdSidenav","$log","$state","triBreadcrumbsService","SettingModel","CliqueConstant","helper","VantivTriPOSiPP350"],angular.module("transactions",["ngCsv"]).controller("TransactionController",e)}(),function(){"use strict";function e(e,n){e.state("triangular.transactionlist",{url:"/transaction/list",templateUrl:"app/modules/transactions/transaction-listing.tmpl.html",controller:"TransactionController",controllerAs:"vm"}),n.addMenu({name:"Payments",icon:"zmdi zmdi-card",priority:4,state:"triangular.transactionlist",type:"link",permission:"transaction-listing"})}e.$inject=["$stateProvider","triMenuProvider"],angular.module("transactions").config(e)}(),function(){"use strict";angular.module("statement",[])}(),function(){"use strict";function e(e,n,t){function r(e){return n.callService("post","/invoice_templates/",e).then(i,a)}function i(e){return e.data}function a(e){return e}var o={};return o.SetInvoiceTemplate=r,o}angular.module("statement").factory("StatementModel",e),e.$inject=["$http","Clique","$httpParamSerializer"]}(),function(){"use strict";function e(e,n,t,r,i,a,o,s,l,d,c,m,u,p,g,f,h,v,b){function y(){e.selectedCustomerData=[],e.CustomerSelection.length>0&&angular.forEach(e.CustomerSelection,function(n,t){var r=v("filter")(A.customerInvoices,{Id:n},!0)[0];e.selectedCustomerData.push(r)})}function w(){C()}function C(){A.InvoiceData=[],A.customerInvoices=[],A.query.from=v("date")(e.from,"yyyy-MM-dd"),A.query.to=v("date")(e.to,"yyyy-MM-dd"),sessionStorage.setItem("statementstart",A.query.from),sessionStorage.setItem("statementend",A.query.to),A.promise=l.GetOpenBalance(A.query),A.promise.then(function(n){if(0==n.statuscode){A.InvoiceData=n.data.items;var r=A.InvoiceData;angular.forEach(r,function(e,n){var t=e.BalanceWithJobs,r=e.InvoiceId;null!=e.PrimaryEmailAddr?e.PrimaryEmailAddr.Address=e.PrimaryEmailAddr.Address:e.PrimaryEmailAddr={Address:""};var i={Id:e.Id,Name:e.DisplayName,Email:e.PrimaryEmailAddr.Address,OpenBalance:t,Invoices:r};A.customerInvoices.push(i)}),A.isStatementLoaded=!1,t(function(){e.ShowGrid=!0},1e3)}})}function S(){e.promise=d.GetSettings(),e.promise.then(function(n){0==n.statuscode&&(e.settings=n.data,e.settings.InvoiceContacts.to_email=[])})}function x(){if(e.settings.InvoiceContacts.to_email=[],e.totalCheckedAmount=0,e.selectedCustomerData.length>0){console.log(e.selectedCustomerData.length),angular.forEach(e.selectedCustomerData,function(n,t){if(null!=n.Email&&""!=n.Email){var r,i=n.Email.split(",");for(r=0;r<i.length;r++)e.settings.InvoiceContacts.to_email.indexOf(i[r])==-1&&e.settings.InvoiceContacts.to_email.push(i[r])}e.totalCheckedAmount=e.totalCheckedAmount+parseFloat(n.OpenBalance)}),e.totalCheckedAmount=v("currency")(e.totalCheckedAmount);var n=" (Total Amount: "+e.totalCheckedAmount+")";e.settings.title="Send Statement"+n}m.show({controller:"emailConfirmationDialogController",templateUrl:"app/modules/statement/sendConfirmationDialog.html",parent:angular.element(document.body),scope:e,preserveScope:!0,clickOutsideToClose:!0}).then(function(e){},function(){})}function I(n){m.show({locals:{customerData:n},controller:"StatementPreviewController",templateUrl:"app/modules/statement/statement.preview.tmpl.html",parent:angular.element(document.body),scope:e,preserveScope:!0,clickOutsideToClose:!0}).then(function(e){},function(){})}function T(e){sessionStorage.setItem("customer_statement_info",JSON.stringify(e)),g.go("triangular.statement-detail",{id:e.Id})}function D(e){h(e).toggle().then(function(){})}var P=new Date,_=P.getFullYear(),k=P.getMonth(),A=this;A.getInvoices=C,A.MultipleSelection=y,A.showSendConfirmationDialog=x,A.showStatement=I,A.FilterStatement=w,A.openSidebar=D,A.openStatementDetail=T,A.InvoiceData="",A.customerInvoices=[],A.isStatementLoaded=!0,e.ShowGrid=!1,e.totalCheckedAmount=0,A.query={limit:10,order:"Name",page:1,pageSelect:!0,from:"",to:""},e.options={rowSelection:!0,multiSelect:!0,autoSelect:!0,decapitate:!1,largeEditDialog:!1,boundaryLinks:!1,limitSelect:!0,pageSelect:!0};var $,R;void 0!==typeof Storage&&($=sessionStorage.getItem("statementstart"),R=sessionStorage.getItem("statementend")),e.from=void 0!=$?new Date($):new Date(_,k,1),e.to=void 0!=R?new Date(R):new Date(_,k+1,0),e.CustomerSelection=[],e.settings="",e.buttonPermissions={statement_listing:!1,statement_view:!1,statement_print:!1,statement_send:!1,statement_download:!1};var M=["listing","send","view","download","print"];angular.forEach(M,function(n,t){void 0!=b.getPermissionDefinition("statement-"+n)?e.buttonPermissions["statement_"+n]=!0:e.buttonPermissions["statement_"+n]=!1}),C(),S(),A.openStatementDetail=T,e.sendStatement=function(){e.showProgress=!0;var n=[];e.selectedCustomerData.length>0&&angular.forEach(e.selectedCustomerData,function(t,r){var i={id:t.Id,email:t.Email,invoices:t.Invoices,email_body:"",statement:{start_date:v("date")(e.from,"yyyy-MM-dd"),end_date:v("date")(e.to,"yyyy-MM-dd")}};n.push(i)});var t={cc:e.settings.InvoiceContacts.cc_email,bcc:e.settings.InvoiceContacts.bcc_email,sender_name:e.settings.InvoiceContacts.sender_name,sender_email:e.settings.InvoiceContacts.sender_email,body:e.settings.InvoiceContacts.body,customers:n};A.promise=l.SendStatement(t),A.promise.then(function(n){0==n.statuscode?(s.showToast(n.statusmessage,"bottom right","success"),e.showProgress=!1,m.hide(),g.reload()):(s.showToast(n.statusmessage,"bottom right","error"),e.showProgress=!1,m.hide())})},e.resetForm=function(){var n=new Date,t=n.getFullYear(),r=n.getMonth();e.from=new Date(t,r,1),e.to=new Date(t,r+1,0),A.query.from=v("date")(e.from,"yyyy-MM-dd"),A.query.to=v("date")(e.to,"yyyy-MM-dd")},e.logPagination=function(n,t){e.CustomerSelection=[]}}function n(e,n,t,r,i,a,o,s,l){o.disabledSubmitButton=!1,o.showCCSIcon="zmdi zmdi-account-add",o.showCCS=!1,o.toggleCCS=function(){o.showCCS=!o.showCCS,o.showCCSIcon=o.showCCS?"zmdi zmdi-account":"zmdi zmdi-account-add"},o.cancel=function(){n.hide()},o.validateChip=function(e,n){if(e){var t=/^[_a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/;t.test(e)||("bcc"==n&&o.settings.InvoiceContacts.bcc_email.pop(),"cc"==n&&o.settings.InvoiceContacts.cc_email.pop(),"to"==n&&o.settings.InvoiceContacts.to_email.pop()),"to"==n&&(0==o.settings.InvoiceContacts.to_email.length?o.disabledSubmitButton=!0:o.disabledSubmitButton=!1)}},o.submit=function(){o.sendStatement(),o.disabledSubmitButton=!0}}function t(e,n,t,r,i,a,o,s,l,d,c,m,u,p,g){function f(){var e=p.get("fileDownload");void 0!=e?(s.downloadProgress=!1,p.remove("fileDownload")):n(function(){f()},1e3)}function h(){s.promise=d.GetSettings(),s.promise.then(function(e){0==e.statuscode&&(s.settings=e.data,s.settings.title="Send Statement",s.settings.InvoiceContacts.to_email=[])})}s.showProgress=!0,s.downloadProgress=!1;var v,b=this,y=this;s.from=sessionStorage.getItem("statementstart"),s.to=sessionStorage.getItem("statementend");var w=s.from,C=s.to,S=g.id;h(),b.params="customer="+S+"&start_date="+w+"&end_date="+C,s.promise=e.GetStatementPreview(b.params+"&file_type=html"),s.promise.then(function(e){v=e,$("#invoice_template").html(""),$("#invoice_template").append(e),n(function(){s.showProgress=!1},1e3)}),s.sendStatement=function(){s.showProgress=!0;var n=[],i="";s.selectedCustomerData.length>0&&angular.forEach(s.selectedCustomerData,function(e,t){e=JSON.parse(e);var a;for(a=0;a<s.settings.InvoiceContacts.to_email.length;a++)i=i+s.settings.InvoiceContacts.to_email[a]+",";i=i.replace(/,(\s+)?$/,"");var o={id:e.Id,email:i,invoices:e.Invoices,email_body:"",statement:{start_date:r("date")(s.from,"yyyy-MM-dd"),end_date:r("date")(s.to,"yyyy-MM-dd")}};n.push(o)});var a={cc:s.settings.InvoiceContacts.cc_email,bcc:s.settings.InvoiceContacts.bcc_email,sender_name:s.settings.InvoiceContacts.sender_name,sender_email:s.settings.InvoiceContacts.sender_email,body:s.settings.InvoiceContacts.body,customers:n};y.promise=e.SendStatement(a),y.promise.then(function(e){0==e.statuscode?(c.showToast(e.statusmessage,"bottom right","success"),s.showProgress=!1,t.hide(),l.reload()):c.showToast("hi there","bottom right","error")})},s.cancel=function(){t.hide()},s.print=function(){var e=document.getElementById("invoice_template").innerHTML,n=document.createElement("iframe");n.name="frame3",n.style.position="absolute",n.style.top="-1000000px",document.body.appendChild(n);var t=n.contentWindow?n.contentWindow:n.contentDocument.document?n.contentDocument.document:n.contentDocument;return t.document.open(),t.document.write("<html><head> <style>md-dialog-actions{display:none}.invoice-box{max-width:800px;margin:auto;padding:30px;border:1px solid #eee;box-shadow:0 0 10px rgba(0,0,0,.15);font-size:16px;line-height:24px;color:#555}.invoice-box table{width:100%;line-height:inherit;text-align:left}.invoice-box table td{padding:5px;vertical-align:top}.invoice-box table tr td:nth-child(2){text-align:right}.invoice-box table tr.top table td{padding-bottom:20px}.invoice-box table tr.top table td.title{font-size:45px;line-height:45px;color:#333}.invoice-box table tr.information table td{padding-bottom:40px}.invoice-box table tr.heading td{background:#eee;border-bottom:1px solid #ddd;font-weight:700}.invoice-box table tr.details td{padding-bottom:20px}.invoice-box table tr.item td{border-bottom:1px solid #eee}.invoice-box table tr.item.last td{border-bottom:none}.invoice-box table tr.total td:nth-child(2){border-top:2px solid #eee;font-weight:700} </style>"),t.document.write("</head><body>"),t.document.write(e),t.document.write("</body></html>"),t.document.close(),setTimeout(function(){window.frames.frame3.focus(),window.frames.frame3.print(),document.body.removeChild(n)},500),!1},s.download=function(){s.downloadProgress=!0;var n=c.getServiceUrl(),t="/invoice/statementpreview?";s.promise=e.GetStatementPreview(b.params+"&file_type=pdf"),s.promise.then(function(e){void 0!=e.status&&e.status==-1||(window.open(n+t+b.params+"&file_type=pdf","_self"),f())})},s.sendEmailStatement=function(){var e=sessionStorage.getItem("customer_statement_info");if(s.selectedCustomerData=[],s.selectedCustomerData.push(e),e=JSON.parse(e),null!=e.Email&&""!=e.Email){var n,r=e.Email.split(",");for(n=0;n<r.length;n++)s.settings.InvoiceContacts.to_email.indexOf(r[n])==-1&&s.settings.InvoiceContacts.to_email.push(r[n])}t.show({controller:"emailConfirmationDialogController",templateUrl:"app/modules/statement/sendConfirmationDialog.html",parent:angular.element(document.body),scope:s,preserveScope:!0,clickOutsideToClose:!0}).then(function(e){},function(){})}}function r(e,n,t,r,i,a,o,s,l,d,c,m,u,p){function g(){var e=p.get("fileDownload");void 0!=e?(s.downloadProgress=!1,p.remove("fileDownload")):n(function(){g()},1e3)}s.showProgress=!0,s.downloadProgress=!1;var f,h=this,v=r("date")(s.from,"yyyy-MM-dd"),b=r("date")(s.to,"yyyy-MM-dd"),y=m.Id;h.params="customer="+y+"&start_date="+v+"&end_date="+b,s.promise=e.GetStatementPreview(h.params+"&file_type=html"),s.promise.then(function(e){f=e,$("#statement_template").html(""),$("#statement_template").append(e),n(function(){s.showProgress=!1},1e3)}),s.cancel=function(){t.hide()},s.print=function(){var e=document.getElementById("statement_template").innerHTML,n=document.createElement("iframe");n.name="frame3",n.style.position="absolute",n.style.top="-1000000px",document.body.appendChild(n);var t=n.contentWindow?n.contentWindow:n.contentDocument.document?n.contentDocument.document:n.contentDocument;return t.document.open(),t.document.write("<html><head> <style>md-dialog-actions{display:none}.invoice-box{max-width:800px;margin:auto;padding:30px;border:1px solid #eee;box-shadow:0 0 10px rgba(0,0,0,.15);font-size:16px;line-height:24px;color:#555}.invoice-box table{width:100%;line-height:inherit;text-align:left}.invoice-box table td{padding:5px;vertical-align:top}.invoice-box table tr td:nth-child(2){text-align:right}.invoice-box table tr.top table td{padding-bottom:20px}.invoice-box table tr.top table td.title{font-size:45px;line-height:45px;color:#333}.invoice-box table tr.information table td{padding-bottom:40px}.invoice-box table tr.heading td{background:#eee;border-bottom:1px solid #ddd;font-weight:700}.invoice-box table tr.details td{padding-bottom:20px}.invoice-box table tr.item td{border-bottom:1px solid #eee}.invoice-box table tr.item.last td{border-bottom:none}.invoice-box table tr.total td:nth-child(2){border-top:2px solid #eee;font-weight:700} </style>"),
t.document.write("</head><body>"),t.document.write(e),t.document.write("</body></html>"),t.document.close(),setTimeout(function(){window.frames.frame3.focus(),window.frames.frame3.print(),document.body.removeChild(n)},500),!1},s.download=function(){s.downloadProgress=!0;var n=d.getServiceUrl(),t="/invoice/statementpreview?";s.promise=e.GetStatementPreview(h.params+"&file_type=pdf"),s.promise.then(function(e){void 0!=e.status&&e.status==-1||(window.open(n+t+h.params+"&file_type=pdf","_self"),g())})}}e.$inject=["$scope","$rootScope","$timeout","$interval","$q","$http","$compile","Clique","InvoiceModel","SettingModel","RecurringModel","$mdDialog","$mdToast","$element","$state","triTheming","$mdSidenav","$filter","PermissionStore"],n.$inject=["$timeout","$mdDialog","$filter","triSkins","$window","$rootScope","$scope","SettingModel","Clique"],r.$inject=["InvoiceModel","$timeout","$mdDialog","$filter","triSkins","$window","$rootScope","$scope","SettingModel","Clique","printer","customerData","$http","$cookies"],t.$inject=["InvoiceModel","$timeout","$mdDialog","$filter","triSkins","$window","$rootScope","$scope","$state","SettingModel","Clique","printer","$http","$cookies","$stateParams"],angular.module("statement").controller("StatementController",e).controller("emailConfirmationDialogController",n).controller("StatementPreviewController",r).controller("StatementDetailController",t).filter("groupBy",function(){return _.memoize(function(e,n){return _.groupBy(e,n)})})}(),function(){"use strict";function e(e,n){e.state("triangular.statement",{url:"/statement",templateUrl:"app/modules/statement/statement.tmpl.html",controller:"StatementController",controllerAs:"vm"}).state("triangular.statement-detail",{url:"/statement/detail/:id",templateUrl:"app/modules/statement/statement.detail.tmpl.html",controller:"StatementDetailController",params:{id:""},controllerAs:"vm"}),n.addMenu({name:"Statement",icon:"zmdi zmdi-view-toc",priority:3,state:"triangular.statement",type:"link",permission:"statement-listing"})}e.$inject=["$stateProvider","triMenuProvider"],angular.module("statement").config(e)}(),function(){"use strict";angular.module("settings",[])}(),function(){"use strict";function e(e,n,t){function r(){return n.callService("get","/settings/","").then(f,h)}function i(r){var i=t.api_url+t.api_version;return e.post(i+"/company",r,{transformRequest:angular.identity,headers:{"Content-Type":void 0,Authorization:n.getUserToken()}}).then(f,h)}function a(e){return n.callService("post","/settings/",e).then(f,h)}function o(e){return n.callService("post","/settings/",e).then(f,h)}function s(e){return n.callService("post","/settings/",e).then(f,h)}function l(){return n.callService("get","/company","").then(f,h)}function d(){return n.callService("get","/paymentmethods","").then(f,h)}function c(){return n.callService("get","/invoice_templates/","").then(f,h)}function m(e){return n.callService("post","/invoice_templates/",e).then(f,h)}function u(){return n.callService("get","/erp/quickbooks/preferences","").then(f,h)}function p(){return n.callService("get","/erp/quickbooks/account","").then(f,h)}function g(){return n.callService("get","/erp/status","").then(f,h)}function f(e){return e.data}function h(e){return e}var v={};return v.GetSettings=r,v.SaveSettings=i,v.GetCompanyInfo=l,v.GetPaymentInfo=d,v.GetInvoiceTemplates=c,v.SetInvoiceTemplate=m,v.SaveInvoiceEmailContent=s,v.SaveInvoiceContactSettings=a,v.GetPreferences=u,v.GetAccount=p,v.GetErpStatus=g,v.SaveEmailSettings=o,v}angular.module("settings").factory("SettingModel",e),e.$inject=["$http","Clique","API_CONFIG"]}(),function(){"use strict";function e(t,r,i,a,o,s,l,d,c,m,u,p,g,f,h){function v(){r.promise=u.GetSettings(),r.promise.then(function(e){0==e.statuscode&&(r.setting=e.data,console.log("TCL: $scope.setting",r.setting),sessionStorage.setItem("template_color",r.setting.InvoiceTemplateColor),C.template_color=r.setting.InvoiceTemplateColor,r.$broadcast("invoice-preview-event"),r.setButtonColor(r.setting.InvoiceTemplateColor),y())})}function b(){if("template_email"in r.setting.InvoiceContacts==1)if(r.setting.InvoiceContacts.template_email.length>0)for(var e=0;e<r.setting.InvoiceContacts.template_email.length;e++)r.setting.InvoiceContacts.template_email[e].isSelected=!1,null!=r.selectedtemplate&&r.selectedtemplate.id==r.setting.InvoiceContacts.template_email[e].id&&(r.setting.InvoiceContacts.template_email[e].name=r.selectedtemplate.name,r.setting.InvoiceContacts.template_email[e].subject=r.selectedtemplate.subject,r.setting.InvoiceContacts.template_email[e].body=r.selectedtemplate.body,r.setting.InvoiceContacts.template_email[e].isSelected=!1,r.selectedtemplate.isSelected===!0?r.setting.InvoiceContacts.template_email[e].isSelected=!0:r.setting.InvoiceContacts.template_email[e].isSelected=!1);else r.Defaulttemplate={},r.Defaulttemplate.id=1,r.Defaulttemplate.name="Default",r.Defaulttemplate.subject="Invoice",r.Defaulttemplate.body="To Our Valued Customer, <br><p> Your invoice <invoice_number> dated <date> is attached. You will receive your shipment in 2-3 business days. YOUR ORDER MAY ARRIVE IN MULTIPLE SHIPMENTS. Please check your order carefully and notify us within 48 hours of delivery if there are any discrepancies.</p> <br> Thank you for shopping with us. <br> Sincerely, <br> <company_name> <br> <company_phone> <br> <company_weburl> <br> 888-656-8055 <br>",r.Defaulttemplate.isSelected=!0,r.setting.InvoiceContacts.template_email.push(r.Defaulttemplate);else{var n=[];r.Defaulttemplate={},r.Defaulttemplate.id=1,r.Defaulttemplate.name="Default",r.Defaulttemplate.subject="Invoice",r.Defaulttemplate.body="To Our Valued Customer, <br><p> Your invoice <invoice_number> dated <date> is attached. You will receive your shipment in 2-3 business days. YOUR ORDER MAY ARRIVE IN MULTIPLE SHIPMENTS. Please check your order carefully and notify us within 48 hours of delivery if there are any discrepancies.</p> <br> Thank you for shopping with us. <br> Sincerely, <br> <company_name> <br> <company_phone> <br> <company_weburl> <br> 888-656-8055 <br>",r.Defaulttemplate.isSelected=!0,n=r.Defaulttemplate,r.setting.InvoiceContacts.template_email=[],r.setting.InvoiceContacts.template_email.push(r.Defaulttemplate)}var t={Setting:{InvoiceContacts:r.setting.InvoiceContacts,Feedback:r.setting.Feedback,IsDefaultTemplate:r.setting.IsDefaultTemplate,ShowConfirmationDialog:r.setting.ShowConfirmationDialog,InvoiceReceiptDialog:r.setting.InvoiceReceiptDialog,EmailReceiptDialog:r.setting.EmailReceiptDialog,DepositAccountId:parseInt(r.setting.DepositAccountId),InvoiceTemplateId:r.setting.InvoiceTemplateId,InvoiceTemplateColor:r.setting.InvoiceTemplateColor}};r.promise=u.SaveInvoiceContactSettings(t),r.promise.then(function(e){0==e.statuscode?79==i.StatusTempID?(c.showToast("Template Updated successfully","bottom right","success"),i.StatusTempID=1):c.showToast("Settings Updated successfully","bottom right","success"):c.showToast(e.statusmessage,"bottom right","error")})}function y(){r.promise=u.GetInvoiceTemplates(),r.promise.then(function(e){0==e.statuscode&&(C.invoiceTemplates=e.data)})}function w(){var e={Setting:{InvoiceContacts:r.setting.InvoiceContacts,Feedback:r.setting.Feedback,IsDefaultTemplate:r.setting.IsDefaultTemplate,ShowConfirmationDialog:r.setting.ShowConfirmationDialog,InvoiceReceiptDialog:r.setting.InvoiceReceiptDialog,EmailReceiptDialog:r.setting.EmailReceiptDialog,DepositAccountId:parseInt(r.setting.DepositAccountId),InvoiceTemplateId:r.setting.InvoiceTemplateId,InvoiceTemplateColor:r.setting.InvoiceTemplateColor}};r.promise=u.SaveEmailSettings(e),r.promise.then(function(e){0==e.statuscode?c.showToast(e.statusmessage,"bottom right","success"):c.showToast(e.statusmessage,"bottom right","error")})}r.innerHeight=t.innerHeight+0,sessionStorage.removeItem("invoice_search");var C=this;C.saveInvoiceContactSettings=b,C.SaveEmailSettings=w,r.setting,C.invoice_templates=[],C.fabDirections=["up","down","left","right"],C.fabDirection=C.fabDirections[2],C.fabAnimations=["md-fling","md-scale"],C.fabAnimation=C.fabAnimations[1],C.fabStatuses=[!1,!0],C.fabStatus=!1,C.template_color="",C.readonly=!1,r.selectedtemplate,r.email_temp={},i.selectedTemplate,i.selectedTemplateemail,i.StatusTempID=1,r.socialOption=[{value:"facebook",name:"Facebook",image:"assets/images/social/facebook.png"},{value:"googlemap",name:"Google Maps",image:"assets/images/social/googlemap.png"},{value:"yelp",name:"Yelp",image:"assets/images/social/yelp.png"},{value:"thumbtack",name:"Thumbtack",image:"assets/images/social/thumbtack.png"},{value:"trip_advisor",name:"Trip Advisor",image:"assets/images/social/trip_advisor.png"},{value:"amazon",name:"Amazon",image:"assets/images/social/amazon.png"},{value:"airbnb",name:"Airbnb",image:"assets/images/social/airbnb.png"},{value:"kudzu",name:"Kudzu",image:"assets/images/social/kudzu.png"},{value:"capterra",name:"Capterra",image:"assets/images/social/capterra.png"},{value:"homeadvisor",name:"Home Advisor",image:"assets/images/social/homeadvisor.png"},{value:"angieslist",name:"Angie's List",image:"assets/images/social/angies-list.png"},{value:"bbb",name:"Better Business Bureau",image:"assets/images/social/bbb.png"}],v(),C.palettes=h.palettes,r.colourRGBA=function(e){var n=h.rgba(e);return{"background-color":n}},r.setTemplateTheme=function(e,n,t,i){r.setButtonColor(n),sessionStorage.setItem("template_color",n),r.setTemplateDefault(e,i)},r.validateChip=function(e,n){if(e){"bcc"==n?angular.isArray(r.setting.InvoiceContacts.cc_email)&&(r.setting.InvoiceContacts.cc_email.indexOf(e)>=0||r.setting.InvoiceContacts.sender_email.indexOf(e)>=0)&&(c.showToast("Email already defined","bottom right","error"),r.setting.InvoiceContacts.bcc_email.pop()):"cc"==n&&angular.isArray(r.setting.InvoiceContacts.bcc_email)&&(r.setting.InvoiceContacts.bcc_email.indexOf(e)>=0||r.setting.InvoiceContacts.sender_email.indexOf(e)>=0)&&(c.showToast("Email already defined","bottom right","error"),r.setting.InvoiceContacts.cc_email.pop());var t=/^[_a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/;t.test(e)||("bcc"==n&&r.setting.InvoiceContacts.bcc_email.pop(),"cc"==n&&r.setting.InvoiceContacts.cc_email.pop())}},r.myClassObj={},r.setButtonColor=function(e){var n=C.palettes[e],t=n[500].value,i={r:t[0],g:t[1],b:t[2],a:1};r.myClassObj.style={"background-color":"rgba("+i.r+", "+i.g+", "+i.b+", "+i.a+")"}},r.promise=u.GetAccount(),r.promise.then(function(e){0==e.statuscode&&a(function(){r.account=e.data.items})}),r.showTemplatePreview=function(e,t){i.selectedTemplate=t,p.show({controller:n,templateUrl:"app/modules/settings/invoice_preview.tmpl.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0}).then(function(e){r.status='You said the information was "'+e+'".'},function(){r.status="You cancelled the dialog."})},r.setTemplateDefault=function(e,n){var t="cyan";null!=sessionStorage.getItem("template_color")&&(t=sessionStorage.getItem("template_color")),r.setting.InvoiceTemplateId=n,r.setting.InvoiceTemplateColor=t,i.StatusTempID=79,i.StatusTemplate="Template Updated Successfully",b()},r.AddNewTemplate=function(n){p.show({controller:e,templateUrl:"app/modules/settings/add_template.tmpl.html",parent:angular.element(document.body),targetEvent:n,clickOutsideToClose:!1})},r.updateEmailTemplateList=function(){r.promise=u.GetSettings(),r.promise.then(function(e){0==e.statuscode&&(r.setting=e.data)})},r.SaveTemplateSetting=function(){if("template_email"in r.setting.InvoiceContacts==1)r.emailtempid=r.setting.InvoiceContacts.template_email.length,++r.emailtempid,r.emailtemplate={id:r.emailtempid,name:r.email_temp.name,subject:r.email_temp.subject,body:r.email_temp.body,isSelected:!1},r.setting.InvoiceContacts.template_email.push(r.emailtemplate);else{var e=[];r.Defaulttemplate={},r.Defaulttemplate.id=1,r.Defaulttemplate.name=r.email_temp.name,r.Defaulttemplate.subject=r.email_temp.subject,r.Defaulttemplate.body=r.email_temp.body,r.Defaulttemplate.isSelected=!0,e=r.Defaulttemplate,r.setting.InvoiceContacts.template_email=[],r.setting.InvoiceContacts.template_email.push(r.Defaulttemplate)}var n={Setting:{InvoiceContacts:r.setting.InvoiceContacts,Feedback:r.setting.Feedback,IsDefaultTemplate:r.setting.IsDefaultTemplate,ShowConfirmationDialog:r.setting.ShowConfirmationDialog,InvoiceReceiptDialog:r.setting.InvoiceReceiptDialog,EmailReceiptDialog:r.setting.EmailReceiptDialog,DepositAccountId:parseInt(r.setting.DepositAccountId),InvoiceTemplateId:r.setting.InvoiceTemplateId,InvoiceTemplateColor:r.setting.InvoiceTemplateColor}};r.promise=u.SaveEmailSettings(n),r.promise.then(function(e){0==e.statuscode?(c.showToast("Template Added Successfully","bottom right","success"),p.hide()):c.showToast("Template Failed To Add","bottom right","error")})},r.cancel=function(){p.cancel()}}function n(e,n,t){e.invoiceTemplateUrl=n.selectedTemplate,e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.answer=function(e){t.hide(e)}}e.$inject=["$window","$scope","$rootScope","$timeout","$interval","$q","$http","$compile","Clique","InvoiceModel","SettingModel","$mdDialog","$mdToast","$state","triTheming"],n.$inject=["$scope","$rootScope","$mdDialog"],angular.module("settings").controller("SettingsController",e).directive("mdChips",function(){return{restrict:"E",require:"mdChips",link:function(e,n,t,r){r.onInputBlur=function(){this.inputHasFocus=!1;var e=this.getChipBuffer();""!=e&&(this.appendChip(e),this.resetChipBuffer())}}}})}(),function(){"use strict";function e(e,n){e.state("triangular.settings",{url:"/settings/general",templateUrl:"app/modules/settings/settings.tmpl.html",controller:"SettingsController",controllerAs:"vm"}),n.addMenu({name:"Settings",icon:"zmdi zmdi-settings",priority:5,state:"triangular.settings",type:"link"})}e.$inject=["$stateProvider","triMenuProvider"],angular.module("settings").config(e)}(),function(){"use strict";function e(e,n,t,r,i,a,o,s,l,d,c,m,u,p,g,f,h,v,b,y,w,C,S,x,I,T,D,P,_){function k(e){var n,t=e?a.customers.filter(A(e)):a.customers;return G.simulateQuery?(n=l.defer(),o(function(){n.resolve(t)},1e3*Math.random(),!1),n.promise):t}function A(e){var n=angular.lowercase(e);return function(e){var t=angular.lowercase(e.DisplayName).toString();return 0===t.indexOf(n)}}function $(){G.customerInfo={id:"",name:"",email:"",phone:"",website:"",company_name:"",notes:"",billing:{line1:"",city:"",countryCode:"",postal_code:"",country:""},shipping:{line1:"",city:"",countryCode:"",country:""}}}function R(e){null==e&&void 0==e||($(),G.customerInfo.id=e.Id,G.customerInfo.name=e.DisplayName,G.customerInfo.company_name=e.CompanyName,G.customerInfo.website=null!=e.WebAddr?e.WebAddr.URI:"",G.customerInfo.phone=null!=e.PrimaryPhone?e.PrimaryPhone.FreeFormNumber:"",G.customerInfo.email=null!=e.PrimaryEmailAddr?e.PrimaryEmailAddr.Address:"",null!=e.ShipAddr&&(G.customerInfo.shipping.line1=e.ShipAddr.Line1,G.customerInfo.shipping.city=e.ShipAddr.City,G.customerInfo.shipping.countryCode=e.ShipAddr.CountrySubDivisionCode,G.customerInfo.shipping.country=e.ShipAddr.Country),null!=e.BillAddr&&(G.customerInfo.billing.line1=e.BillAddr.Line1,G.customerInfo.billing.city=e.BillAddr.City,G.customerInfo.billing.countryCode=e.BillAddr.CountrySubDivisionCode,G.customerInfo.billing.postal_code=e.BillAddr.PostalCode,G.customerInfo.billing.country=e.BillAddr.Country),a.showBillingInfo=!0,a.invoice.CustomerRef.value=e.Id,a.invoice.CustomerRef.name=e.DisplayName,a.invoice.BillEmail.Address=null!=e.PrimaryEmailAddr?e.PrimaryEmailAddr.Address:"",j())}function M(e){var n,t=e?a.items.filter(E(e)):a.items;return G.simulateQuery?(n=l.defer(),o(function(){n.resolve(t)},1e3*Math.random(),!1),n.promise):t}function E(e){var n=angular.lowercase(e);return function(e){var t=angular.lowercase(e.Name).toString();return 0===t.indexOf(n)}}function O(e,n){a.invoice.Line[n].SalesItemLineDetail.ItemRef.value=e.Id,a.invoice.Line[n].SalesItemLineDetail.ItemRef.name=e.FullyQualifiedName,a.invoice.Line[n].Description=e.Description,a.invoice.Line[n].SalesItemLineDetail.ClassRef.value=e.SalesItemLineDetail.ClassRef.value,a.invoice.Line[n].SalesItemLineDetail.UnitPrice=parseFloat(e.UnitPrice),a.invoice.Line[n].Amount=parseFloat(a.invoice.Line[n].SalesItemLineDetail.Qty*a.invoice.Line[n].SalesItemLineDetail.UnitPrice),a.calculateTotal()}function L(){return G.sno++}function z(){var e=0;return angular.forEach(a.invoice.Line,function(n,t){switch(n.DetailType){case"SalesItemLineDetail":e++}}),e}function F(e){var n;return angular.forEach(a.invoice.Line,function(t,r){t.DetailType==e&&(n=parseInt(r))}),n}function N(){if(a.taxCode.length>0){angular.forEach(a.taxCode,function(e,n){if(null!=e.SalesTaxRateList&&1==e.Active){var t=0;angular.forEach(e.SalesTaxRateList.TaxRateDetail,function(e,n){var i=e.TaxRateRef,o=r("filter")(a.taxRate,{Id:i.value},!0)[0];void 0!=o&&(t+=parseFloat(o.RateValue))});var i={Id:e.Id,RateValue:t,Name:e.Name};a.taxRateDetail.push(i)}})}}function q(e,n,t,r,i){n.hideDialogActions=!1,n.customer={},n.customer.DisplayName=r,n.loadCountries=function(){return o(function(){n.countries=i},650)},n.setCustomerShipping=function(){1==n.sameAsBilling?n.customer.ShipAddr=n.customer.BillAddr:n.customer.ShipAddr={Line1:"",City:"",Country:"",CountrySubDivisionCode:"",PostalCode:""}},n.addNewCustomer=function(e){1==n.sameAsBilling&&(n.customer.ShipAddr=n.customer.BillAddr),n.showProgress=!0,n.hideDialogActions=!0,G.promise=u.AddCustomer(n.customer),G.promise.then(function(e){0==e.statuscode?(m.showToast(e.statusmessage,"bottom right","success"),C.$broadcast("add-customer-event",{data:e.data})):m.showToast(e.statusmessage,"bottom right","error"),t.hide()})}}function B(e,n,t,i,a){n.hideDialogActions=!1,n.item={},n.item.Name=i,n.account_income=[],n.account_expense=[],n.account_asset=[],n.enableMoreInventoryFields=!1,n.promise=p.GetAccount(),n.promise.then(function(e){0==e.statuscode&&o(function(){C.account=e.data.items,n.account=C.account,n.account.length>0&&(n.account_expense=r("filter")(n.account,{AccountType:"Cost of Goods Sold"},!0),n.account_income=r("filter")(n.account,{AccountType:"Income"},!0),n.account_asset=r("filter")(n.account,{AccountType:"Other Current Asset"},!0),n.item.IncomeAccountRef={value:n.account_income[0].Id},n.item.AssetAccountRef={value:n.account_asset[0].Id},n.item.ExpenseAccountRef={value:n.account_expense[0].Id})})}),void 0==C.categories?(n.promise=u.GetCategories(),n.promise.then(function(e){0==e.statuscode&&o(function(){C.categories=e.data.items,n.categories=C.categories})})):n.categories=C.categories,n.$watch("item.ParentRef.value",function(e,t){void 0!=e?n.item.SubItem=!0:(n.item.SubItem=!1,n.item.ParentRef=void 0)}),n.$watch("item.Type",function(e,t){"Inventory"==e?(n.enableMoreInventoryFields=!0,n.item.AssetAccountRef={value:n.account_asset[0].Id},n.item.TrackQtyOnHand=!0):(n.enableMoreInventoryFields=!1,n.item.QtyOnHand=void 0,n.item.InvStartDate=void 0,n.item.AssetAccountRef=void 0,n.item.TrackQtyOnHand=!1)}),n.addNew=function(e){n.showProgress=!0,n.hideDialogActions=!0,G.promise=u.AddItem(n.item),G.promise.then(function(e){0==e.statuscode?(m.showToast(e.statusmessage,"bottom right","success"),C.$broadcast("add-item-event",{data:e.data,index:a})):m.showToast(e.statusmessage,"bottom right","error"),t.hide()})}}function j(){if(null!=a.invoice.CustomerRef){a.showProfileGetProgress=!0;var e=a.invoice.CustomerRef.value,n={customer_id:e};a.CCProfileResponse={},a.isCCProfileCreated=!1,a.promise=u.ProfileGet(n),a.promise.then(function(e){0==e.statuscode&&e.data.total_item>0&&(a.CCProfileResponse=e.data.item[0],a.isCCProfileCreated=!0),a.showProfileGetProgress=!1})}}q.$inject=["$window","$scope","$mdDialog","customerData","Countries"],B.$inject=["$window","$scope","$mdDialog","itemData","index"],a.showApiProgress=!0,a.apiProgressValue=9,a.showInvoiceContent=!1,b.reset();var U=[{active:!1,icon:"zmdi zmdi-chart",name:"Create Invoice.",priority:2,state:"triangular.invoice-list",template:"app/triangular/components/menu/menu-item-link.tmpl.html",type:"link"}];angular.forEach(U,function(e,n){b.addCrumb(e)});var G=this;a.sortableOptions={"ui-floating":!0},a.showRecurringOptions=!1,a.createInvoiceBtnTitle="Create Sales Receipt";var H=JSON.parse('{"TotalAmt":0.00,"TxnDate":"","Line":[{"Amount":0.00,"DetailType":"SalesItemLineDetail","SalesItemLineDetail":{"ItemRef":{"value":"","name":""},"Qty":1}},{"Amount":0.00,"DetailType":"DiscountLineDetail","DiscountLineDetail":{"PercentBased":true,"DiscountPercent":0.00,"DiscountAccountRef":{}}},{"Amount":0.00,"DetailType":"SubTotalLineDetail","SubTotalLineDetail":{}}],"TxnTaxDetail":{"TxnTaxCodeRef":{"value":""},"TotalTax":0.00,"TaxLine":[{"Amount":0.00,"DetailType":"TaxLineDetail","TaxLineDetail":{"TaxRateRef":{"value":"0"},"PercentBased":true,"TaxPercent":0,"NetAmountTaxable":0.00}}]},"CustomerRef":{"value":"0","name":""},"CustomerMemo":{"value":""},"SalesTermRef":{"value":"0"},"DueDate":"","BillEmail":{"Address":""}}');a.invoice=H,a.customers=[],a.items=[],a.categories=[],a.preferences,a.invoiceTerm,a.discountTypes=[{value:!1,text:"Discount Value"},{value:!0,text:"Discount Percent"}],a.lastSalesReceiptDocNumber="",$(),G.simulateQuery=!0,G.selectedCustomer=null,G.searchCustomer=null,G.customerSearch=k,G.selectedCustomerChange=R,G.selectedProduct=[],G.searchProduct=[],G.itemSearch=M,G.selectedItemChange=O,G.getTotalItems=z,a.showProgress=!1,G.sno=1,G.InvoiceSno=L,e.setOption("sideMenuSize","icon"),a.taxRate=[],a.taxCode=[],a.taxRateDetail=[],a.$watch("apiProgressValue",function(e,n){e>=100&&(a.showApiProgress=!1,a.showInvoiceContent=!0,N(),1==a.preferences.SalesFormsPrefs.CustomTxnNumbers&&(a.invoice.DocNumber=P.getAutoIncrementInvoiceNo(a.lastSalesReceiptDocNumber)))}),a.$on("add-customer-event",function(e,n){a.customers.push(n.data),G.selectedCustomer=n.data}),a.addNewCustomer=function(){g.show({locals:{customerData:G.searchCustomer,Countries:_},controller:q,templateUrl:"app/modules/invoice/createnew/customer.addnew.html",parent:angular.element(document.body),targetEvent:null,clickOutsideToClose:!0,fullscreen:!0}).then(function(e){},function(){})},a.addItem=function(){var e=r("filter")(a.invoice.Line,{DetailType:"SalesItemLineDetail"}),n=parseInt(e.length),t={Amount:0,Description:"",DetailType:"SalesItemLineDetail",SalesItemLineDetail:{ItemRef:{value:"0",name:""},UnitPrice:0,Qty:1,TaxCodeRef:{value:"NON"}}};a.invoice.Line.splice(n,0,t)},a.removeItem=function(e,n){G.counter--;var t=parseInt(z());t>1?(a.invoice.Line.splice(n,1),G.selectedProduct.splice(n,1),G.searchProduct.splice(n,1)):(G.selectedProduct.splice(n,1),G.searchProduct.splice(n,1)),a.calculateTotal()},a.$on("add-item-event",function(e,n){a.items.push(n.data),G.selectedProduct[n.index]=n.data}),a.addNewItem=function(e,n){g.show({locals:{itemData:e,index:n},controller:B,templateUrl:"app/modules/invoice/createnew/item.addnew.html",parent:angular.element(document.body),targetEvent:null,clickOutsideToClose:!0,fullscreen:!0}).then(function(e){},function(){})},G.counter=0,a.getId=function(){return G.counter++,G.counter},a.calculateTotal=function(){var e,n=0,t=0,r=0,i=0;angular.forEach(a.invoice.Line,function(t,r){switch(t.DetailType){case"SalesItemLineDetail":i=t.SalesItemLineDetail.Qty*t.SalesItemLineDetail.UnitPrice,i>0&&(n+=parseFloat(i));break;case"SubTotalLineDetail":e=r}}),a.invoice.Line[e].Amount=parseFloat(n),a.calculateTax(),a.calculateDiscount();var t=parseFloat(a.invoice.TxnTaxDetail.TotalTax),o=parseInt(F("DiscountLineDetail")),r=parseFloat(a.invoice.Line[o].Amount);n-=r,t>0&&(n+=t),a.invoice.TotalAmt=parseFloat(n)},a.calculateTax=function(){var e=0;if(angular.forEach(a.invoice.Line,function(n,t){switch(n.DetailType){case"SalesItemLineDetail":if(null!=n.SalesItemLineDetail.TaxCodeRef&&"TAX"==n.SalesItemLineDetail.TaxCodeRef.value){var r=n.SalesItemLineDetail.Qty*n.SalesItemLineDetail.UnitPrice;e+=parseFloat(r)}}}),e>0){var n="",t=a.invoice.TxnTaxDetail.TaxLine[0].TaxLineDetail.TaxRateRef.value,i="",o=0,s=0;t>0&&(n=r("filter")(a.taxRateDetail,{Id:t})[0],i=n.Name,o=n.RateValue),o>0&&(s=parseFloat(e*o/100))}"0"!=t?a.invoice.TxnTaxDetail.TxnTaxCodeRef.value=t:a.invoice.TxnTaxDetail.TxnTaxCodeRef.value="",o>0?a.invoice.TxnTaxDetail.TaxLine[0].TaxLineDetail.TaxPercent=o:a.invoice.TxnTaxDetail.TaxLine[0].TaxLineDetail.TaxPercent=0,s>0?(a.invoice.TxnTaxDetail.TotalTax=s,a.invoice.TxnTaxDetail.TaxLine[0].Amount=s):(a.invoice.TxnTaxDetail.TotalTax=void 0,a.invoice.TxnTaxDetail.TaxLine[0].Amount=void 0)},a.calculateDiscount=function(){var e=parseInt(F("DiscountLineDetail")),n=a.invoice.Line[e].DiscountLineDetail,t=n.PercentBased,r=0;r=t?parseFloat(n.DiscountPercent):parseFloat(a.invoice.Line[e].Amount);var i,o=parseInt(F("SubTotalLineDetail")),s=parseFloat(a.invoice.Line[o].Amount);s>0?(t?i=parseFloat(s*r/100):(i=parseFloat(r),a.invoice.Line[e].DiscountLineDetail.DiscountPercent=""),i>s?a.invoice.Line[e].Amount=0:i>=0?a.invoice.Line[e].Amount=parseFloat(i):a.invoice.Line[e].Amount=0):a.invoice.Line[e].Amount=0},a.setTerm=function(){var e=a.invoice.SalesTermRef.value;if(0!=e){var n=r("filter")(a.invoiceTerm,{Id:e})[0],t=n.DueDays,i=new Date,o=i.getFullYear(),s=i.getMonth(),l=i.getDate();""==a.invoice.TxnDate&&(a.invoice.TxnDate=new Date(o,s,l));var d=a.invoice.TxnDate;a.invoice.DueDate=new Date(d.getFullYear(),d.getMonth(),d.getDate()+t)}},a.promise=p.GetPaymentInfo(),a.promise.then(function(e){0==e.statuscode&&e.data.total_count>0&&(a.paymentInfo=e.data.items[0],C.paymentInfo=a.paymentInfo)}),a.promise=u.GetLastSalesReceipt(),a.promise.then(function(e){0==e.statuscode&&o(function(){a.apiProgressValue+=13,a.lastSalesReceiptDocNumber=0,null!=e.data&&(a.lastSalesReceiptDocNumber=e.data[0].DocNumber)})}),a.promise=p.GetPreferences(),a.promise.then(function(e){0==e.statuscode&&o(function(){a.apiProgressValue+=13,a.preferences=e.data.Preferences[0],a.HaveClassObj=a.preferences.AccountingInfoPrefs.ClassTrackingPerTxnLine,1==a.HaveClassObj?a.HavingClassObj=!0:a.HavingClassObj=!1})}),a.promise=u.GetCustomers(),a.promise.then(function(e){0==e.statuscode&&o(function(){a.apiProgressValue+=13,a.customers=e.data.items})}),a.promise=u.GetItems(),a.promise.then(function(e){0==e.statuscode&&o(function(){a.apiProgressValue+=13,a.items=e.data.items})}),a.promise=u.GetClasses(),a.promise.then(function(e){0==e.statuscode&&o(function(){a.apiProgressValue+=13,a.ClassesItems=e.data.item,a.ClassesItemslength=e.data.length,a.ClassesItemslength>0?(a.HaveClass=!0,console.log(a.ClassesItems)):a.HaveClass=!1})}),a.SelectedClass=[],a.ClassDataGet=function(e,n){console.log(n),C.ClassRef={name:e.Name,type:"",value:e.Id},C.ClassRefName=e.Name,C.ClassRefId=e.Id,console.log(C.ClassRef)},a.promise=u.GetTaxRate(),a.promise.then(function(e){0==e.statuscode&&o(function(){a.apiProgressValue+=13,a.taxRate=e.data.items})}),a.promise=u.GetTaxCode(),a.promise.then(function(e){0==e.statuscode&&o(function(){a.apiProgressValue+=13,a.taxCode=e.data.items})}),a.promise=u.GetTerm(),a.promise.then(function(e){0==e.statuscode&&o(function(){a.apiProgressValue+=13,a.invoiceTerm=e.data.items,a.invoiceTerm.length>0&&(a.invoice.SalesTermRef.value=a.invoiceTerm[0].Id,a.setTerm())})}),a.loadingProgress=function(){return o(function(){},650)},a.createInvoice=function(e){var n=!1;a.invoice.TotalAmt<=0&&(n=!0,m.showToast("Invoice total should be greater than zero","bottom right","error")),0==n&&(a.showProgress=!0,a.paymentSaleReceipt(e))},a.paymentSaleReceipt=function(e){g.show({scope:a,preserveScope:!0,parent:angular.element(document.body),templateUrl:"app/modules/salesreceipt/payment/payment.dialog.html",clickOutsideToClose:!1,fullscreen:!0,targetEvent:e,controller:"PaymentSaleReceiptController"}).then(function(){},function(){1==a.isPaymentSuccess})},a.CCProfileResponse={},a.isCCProfileCreated=!1,a.customerSelectedProfileIndex=0,a.showProfileGetProgress=!1,a.cancelInvoice=function(){var e=g.confirm().title("Confirm").textContent("Are you sure you want to cancel without save?").ariaLabel("Lucky day").ok("Yes").cancel("No");g.show(e).then(function(){y.go("triangular.dashboard-analytics")},function(){})}}e.$inject=["triLayout","$window","triLoaderService","$filter","$log","$scope","$timeout","$interval","$q","$http","$compile","Clique","InvoiceModel","SettingModel","$mdDialog","$mdToast","$element","$stateParams","triBreadcrumbsService","$state","$mdBottomSheet","$rootScope","$mdSidenav","$anchorScroll","$location","dataService","$mdPanel","helper","Countries"],angular.module("salesreceipt").controller("SalesReceiptController",e).filter("customInfo",function(){return function(e,n){var t;return""!=e&&(t=e+" "+n),t}})}(),function(){"use strict";function e(e,n){e.state("triangular.salesreceipt",{url:"/salesreceipt",templateUrl:"app/modules/salesreceipt/salesreceipt.tmpl.html",controller:"SalesReceiptController",controllerAs:"vm",resolve:{Countries:["$http",function(e){return e.get("app/modules/invoice/data/countries.json")}]}}),n.addMenu({name:"Sales Receipt",icon:"fa fa-file-text-o",priority:3,state:"triangular.salesreceipt",type:"link",permission:"salesreceipt-addnew"})}e.$inject=["$stateProvider","triMenuProvider"],angular.module("salesreceipt").config(e)}(),function(){"use strict";angular.module("recurring",[])}(),function(){"use strict";function e(e,n,t){function r(e){return n.callService("post","/invoice_templates/",e).then(c,m)}function i(e){t(e);return n.callService("get","/recurring/","").then(c,m)}function a(e){t(query);return n.callService("get","/recurring/"+e,"").then(c,m)}function o(e){return n.callService("get","/recurring/history/"+e,"").then(c,m)}function s(e){return n.callService("post","/recurring/retry/",e).then(c,m)}function l(e){return n.callService("post","/recurring/delete/",e).then(c,m)}function d(e,t){return n.callService("post","/recurring/status/"+e,t).then(c,m)}function c(e){return e.data}function m(e){return e}var u={};return u.SetInvoiceTemplate=r,u.GetAllRecurrings=i,u.GetRecurringById=a,u.GetRecurringHistory=o,u.DeleteRecurring=l,u.DoRecurringRetry=s,u.RecurringStatus=d,u}angular.module("recurring").factory("RecurringModel",e),e.$inject=["$http","Clique","$httpParamSerializer"]}(),function(){"use strict";function e(e,n,t,r,i,a,o,s,l,d,c,m,u,p,g,f,h,v){function b(e){h(e).toggle().then(function(){})}function y(e){_.promise=c.GetAllRecurrings(e),_.promise.then(function(e){0==e.statuscode&&(_.tblData=e.data.items)})}function w(){if(e.customerProfile={},null!=e.recurringObject.CustomerId){e.showProfileGetProgress=!0;var n=e.recurringObject.CustomerId,t=e.recurringObject.ProfileId,r={customer_id:n};e.promise=l.ProfileGet(r),e.promise.then(function(n){if(0==n.statuscode){if(n.data.total_item>0){var r=n.data.item;e.customerProfile=v("filter")(r,{profile_id:t})[0];var i,a,o=e.customerProfile.expiry;void 0!=o&&(i=o.substring(0,2),a=o.substring(2,4)),_.cardInfo={ccnumber:"xxxx-xxxx-xxxx-"+e.customerProfile.last_digits,ccname:e.customerProfile.cardholder_name,ccmm:i,ccyy:a},C(_.cardInfo)}}else e.showProfileGetProgress=!1})}}function C(n){new Card({form:"form",container:".card-wrapper",placeholders:{number:n.ccnumber,name:n.ccname,expiry:n.ccmm+"/"+n.ccyy,cvc:""},width:250,formatting:!0});e.showProfileGetProgress=!1,e.showProfileCard=!0,t(function(){angular.element(".ccnumber").focus(),angular.element(".ccname").focus(),angular.element(".ccnexpiry").focus(),angular.element(".cccvc").focus(),angular.element(".ccnumber").focus()},1e3)}function S(e){switch(e){case"D":return"Monthly";case"W":return"Weekly";case"M":return"Monthly";case"Y":return"Yearly"}}function x(){var n=e.recurringObject.Id;e.showHistoryProgress=!0,e.promise=c.GetRecurringHistory(n),e.promise.then(function(n){e.showHistoryProgress=!1,0==n.statuscode&&(e.notifications=n.data.items)})}function I(n,t){h(n).toggle().then(function(){e.recurringObject=t,_.pieData=[e.recurringObject.OccurrencesCount,e.recurringObject.ErrorCount],x(),w()}),h(n).onClose(function(){e.notifications=[],y()})}function T(n){e.showHistoryProgress=!0;var t={history_id:n};e.promise=c.DoRecurringRetry(t),e.promise.then(function(n){e.showHistoryProgress=!1,
0==n.statuscode?(s.showToast(n.statusmessage,"bottom right","success"),x()):s.showToast(n.statusmessage,"bottom right","error")})}function D(n,t){e.showHistoryProgress=!0;var r={status:t};e.promise=c.RecurringStatus(n,r),e.promise.then(function(n){e.showHistoryProgress=!1,0==n.statuscode?(s.showToast(n.statusmessage,"bottom right","success"),1==t?e.recurringObject.Status=!0:e.recurringObject.Status=!1):s.showToast(n.statusmessage,"bottom right","error")})}function P(e){return 0==e.is_payment_created?"System unable to charge customer's credit card":0==e.is_invoice_created?"System unable to create invoice":0==e.is_invoice_marked?"Invoice not synced":"No error found"}var _=this;_.tblData=[],_.getIntervalType=S,_.showRecurringHistory=I,_.recurringHistoryStatus=P,_.recurringRetry=T,_.recurringStatus=D,_.openSidebar=b;var k=new Date;e.fromdate=new Date(k),e.fromdate.setMonth(k.getMonth()-1),console.log(e.fromdate),e.resetForm=function(){console.log("wroking"),e.StatusFilter=void 0,e.searchCustomer=""},_.query={order:"-Id",limit:20,page:1},_.pieLabels=["Succcess","Failed"],_.pieOptions={legend:{display:!0},showTooltips:!0},_.pieData=[0,0],e.notifications=[],e.recurring,e.showHistoryProgress=!1,e.showProfileGetProgress=!0,e.showProfileCard=!1,y(),e.deleteRecurring=function(n){var t={id:n};e.promise=c.DeleteRecurring(t),e.promise.then(function(e){0==e.statuscode?(s.showToast(e.statusmessage,"bottom right","success"),y()):s.showToast(e.statusmessage,"bottom right","error")})},e.deleteRecurringConfirm=function(n){var t=m.confirm().title("Are you sure you want delete?").textContent("").ariaLabel("Confirm Recurring").ok("Confirm!").cancel("Cancel");m.show(t).then(function(){e.deleteRecurring(n)},function(){})}}e.$inject=["$scope","$rootScope","$timeout","$interval","$q","$http","$compile","Clique","InvoiceModel","SettingModel","RecurringModel","$mdDialog","$mdToast","$element","$state","triTheming","$mdSidenav","$filter"],angular.module("recurring").controller("RecurringController",e).factory("addNewRecursion",["$rootScope","$mdBottomSheet",function(e,n){return{foo:function(){n.show({templateUrl:"app/modules/recurring/recurring.edit.html",controller:"GridBottomSheetCtrl",clickOutsideToClose:!0,parent:angular.element(document.getElementById("invoice_detail_layout"))}).then(function(e){})}}}]).filter("intervalType",function(){var e="";return function(n){switch(n){case"QuadWeekly":e="Quad Weekly";break;case"SemiAnnually":e="Semi Annually";break;default:e=n}return e}}).filter("myfilter",["$filter",function(e){return function(n,t,r){return e("filter")(n,"name",function(e){var n=moment(e);return n>=moment(t)&&n<=moment(r)})}}])}(),function(){"use strict";function e(e,n){e.state("triangular.recurring",{url:"/recurring",templateUrl:"app/modules/recurring/recurring.tmpl.html",controller:"RecurringController",controllerAs:"vm"}),n.addMenu({name:"Recurring",icon:"zmdi zmdi-refresh",priority:3,state:"triangular.recurring",type:"link",permission:"recurring-listing"})}e.$inject=["$stateProvider","triMenuProvider"],angular.module("recurring").config(e)}(),function(){"use strict";function e(e,n,t){function r(e){var r=t(e);return n.callService("get","/erp/quickbooks/invoice/?"+r,"").then(E,O)}function i(e){return n.callService("get","/erp/quickbooks/invoice/"+e,"").then(E,O)}function a(){return n.callService("get","/invoice/last/","").then(E,O)}function o(){return n.callService("get","/salesreceipt/last/","").then(E,O)}function s(e){var t=sessionStorage.getItem("invoice_template_id"),r=sessionStorage.getItem("template_color");return n.callService("get","/erp/quickbooks/invoice/preview/?invoice_id="+e+"&temp_id="+t+"&temp_color="+r,"").then(E,O)}function l(e){return n.callService("post","/erp/quickbooks/invoice/send",e).then(E,O)}function d(e){return n.callService("post","/erp/quickbooks/invoice/link/",e).then(E,O)}function c(){return n.callService("get","/erp/quickbooks/status/","").then(E,O)}function m(){return n.callService("get","/erp/quickbooks/contact","").then(E,O)}function u(e){return n.callService("post","/erp/quickbooks/contact",e).then(E,O)}function p(e){var r=t(e);return n.callService("get","/quickbooks/invoice/statistics/?"+r,"").then(E,O)}function g(){return n.callService("get","/erp/quickbooks/allitems","").then(E,O)}function f(){return n.callService("get","/erp/item/categories","").then(E,O)}function h(e){return n.callService("post","/erp/quickbooks/allitems",e).then(E,O)}function v(){return n.callService("get","/erp/quickbooks/taxrate","").then(E,O)}function b(){return n.callService("get","/erp/quickbooks/taxcode","").then(E,O)}function y(){return n.callService("get","/erp/quickbooks/term","").then(E,O)}function w(e){return n.callService("post","/erp/quickbooks/invoice/create/",e).then(E,O)}function C(e){return n.callService("post","/erp/invoice/recurring/create/",e).then(E,O)}function S(e){return n.callService("get","/invoice/recurring/legaldocument","").then(E,O)}function x(){return n.callService("get","/erp/quickbooks/classes","").then(E,O)}function I(e){return n.callService("post","/invoice/sendstatement/",e).then(E,O)}function T(e){var r=t(e);return n.callService("get","/invoice/openbalance?"+r,"").then(E,O)}function D(e){return n.callService("get","/invoice/statementpreview?"+e,"").then(E,O)}function P(e){return n.callService("post","/cardconnect/partialsale/",e).then(E,O)}function _(e){return n.callService("post","/cardconnect/sale/",e).then(E,O)}function k(e){return n.callService("post","/profile/add/",e).then(E,O)}function A(e){return n.callService("post","/profile/delete/",e).then(E,O)}function $(e){return n.callService("post","/profile/get/",e).then(E,O)}function R(e){return n.callService("post","/cardconnect/authorizetoken/",e).then(E,O)}function M(e){return n.callService("post","/bolt/readcard/",e).then(E,O)}function E(e){return e.data}function O(e){return e}var L={};return L.GetAllInvoice=r,L.GetInvoiceById=i,L.GetInvoicePreviewById=s,L.GetLastInvoice=a,L.GetLastSalesReceipt=o,L.SendInvoice=l,L.GetInvoiceLink=d,L.GetQuickBooksConnectionStatus=c,L.GetCustomers=m,L.AddCustomer=u,L.GetInvoiceStatistics=p,L.GetItems=g,L.GetCategories=f,L.AddItem=h,L.GetTaxRate=v,L.GetTaxCode=b,L.GetTerm=y,L.createInvoice=w,L.createRecurringInvoice=C,L.GetInvoiceLegalDocument=S,L.GetClasses=x,L.SendStatement=I,L.GetOpenBalance=T,L.GetStatementPreview=D,L.CCSale=_,L.CCPartialSale=P,L.ProfileAdd=k,L.ProfileDelete=A,L.ProfileGet=$,L.CardConnectAuthorizeToken=R,L.BoltReadCard=M,L}angular.module("invoice").factory("InvoiceModel",e),e.$inject=["$http","Clique","$httpParamSerializer"]}(),function(){"use strict";function e(e,n){e.state("triangular.invoice-list",{url:"/invoice/list/:type",templateUrl:"app/modules/invoice/listing/invoice-listing.tmpl.html",controller:"InvoiceController",controllerAs:"vm",data:{permissions:{only:"viewEmail"}}}).state("triangular.invoice-detail",{url:"/invoice/detail/:id",templateUrl:"app/modules/invoice/detail/invoice.detail.tmpl.html",controller:"InvoiceDetailController",params:{id:""},controllerAs:"vm"}).state("triangular.invoice-create",{url:"/invoice/create/",templateUrl:"app/modules/invoice/createnew/invoice.create.tmpl.html",controller:"InvoiceCreateController",controllerAs:"vm",params:{action:"createinvoice"},data:{layout:{sideMenuSize:"icon"}},resolve:{Countries:["$http",function(e){return e.get("app/modules/invoice/data/countries.json")}]}}).state("triangular.invoice-payment",{url:"/invoice/payment",templateUrl:"app/modules/invoice/payment/profile_creditcard.html",controller:"PaymentInvoiceContoller",controllerAs:"vm"}),n.addMenu({name:"Invoices",icon:"zmdi zmdi-collection-text",priority:2,state:"triangular.invoice-list",type:"link",permission:"invoice-listing"})}e.$inject=["$stateProvider","triMenuProvider"],angular.module("invoice").config(e)}(),function(){"use strict";function e(e,n){e.state("triangular.dashboard-analytics",{url:"/dashboards/analytics",templateUrl:"app/modules/dashboards/analytics/dashboard-analytics.tmpl.html",controller:"DashboardAnalyticsController",controllerAs:"vm"}),n.addMenu({name:"Dashboard",icon:"zmdi zmdi-home",type:"link",state:"triangular.dashboard-analytics",priority:1.1,permission:"dashboard"})}e.$inject=["$stateProvider","triMenuProvider"],angular.module("dashboard").config(e)}(),function(){"use strict";function e(e,n,t){function r(e){var r=t(e);return n.callService("get","/invoice/dashboard/?"+r,"").then(i,a)}function i(e){return e.data}function a(e){return e}var o={};return o.GetInvoiceStatistics=r,o}angular.module("dashboard").factory("DashboardModel",e),e.$inject=["$http","Clique","$httpParamSerializer"]}(),function(){"use strict";function e(e,n,t,r,i,a,o,s,l,d,c,m,u,p,g,f,h){function v(e){s.debounce(function(){l(e).toggle()},300)()}function b(e){h.location.assign(e.url)}function y(e){if(n.has("$translate")){var r=n.get("$translate");r.use(e).then(function(){d.show(d.simple().content(o("triTranslate")("Language Changed")).position("bottom right").hideDelay(500)),t.$emit("changeTitle")})}}function w(){switch(g.layout.sideMenuSize){case"hidden":return!1;case"off":return!0;default:return r("gt-sm")}}function C(e){t.$broadcast("triSwitchNotificationTab",e),x.openSideNav("notifications")}function S(){x.isFullScreen=!x.isFullScreen,x.fullScreenIcon=x.isFullScreen?"zmdi zmdi-fullscreen-exit":"zmdi zmdi-fullscreen";var e=m[0];e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement?e.exitFullscreen?e.exitFullscreen():e.msExitFullscreen?e.msExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitExitFullscreen&&e.webkitExitFullscreen():e.documentElement.requestFullscreen?e.documentElement.requestFullscreen():e.documentElement.msRequestFullscreen?e.documentElement.msRequestFullscreen():e.documentElement.mozRequestFullScreen?e.documentElement.mozRequestFullScreen():e.documentElement.webkitRequestFullscreen&&e.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}var x=this;x.breadcrumbs=u.breadcrumbs,x.emailNew=!1,x.languages=p.languages,x.openSideNav=v,x.hideMenuButton=w,x.switchLanguage=y,x.toggleNotificationsTab=C,x.isFullScreen=!1,x.fullScreenIcon="zmdi zmdi-fullscreen",x.toggleFullScreen=S,x.topMenuList=f.topMenus,x.TopMenu=b,x.currentUser={displayName:f.getUserName(),username:f.getUserName(),avatar:"assets/images/avatars/avatar-5.png",roles:[]},e.$on("newMailNotification",function(){x.emailNew=!0})}e.$inject=["$scope","$injector","$rootScope","$mdMedia","$state","$element","$filter","$mdUtil","$mdSidenav","$mdToast","$timeout","$document","triBreadcrumbsService","triSettings","triLayout","Clique","$window"],angular.module("triangular.components").controller("ToolbarController",e)}(),function(){"use strict";angular.module("app",["ui.router","triangular","ngAnimate","ngCookies","ngSanitize","ngMessages","ngMaterial","googlechart","chart.js","linkify","ui.calendar","angularMoment","uiGmapgoogle-maps","hljs","md.data.table",angularDragula(angular),"ngFileUpload","pdfjsViewer","app.translate","dashboard","invoice","settings","transactions","recurring","statement","salesreceipt","angular-clipboard","app.permission","angularTrix"]).constant("API_CONFIG",{url:""})}(),function(){"use strict";function e(e){var n=this;n.triSettings=e}e.$inject=["triSettings"],angular.module("app").controller("LoaderController",e)}(),function(){"use strict";function e(e,n,t,r,i){function a(){r.go("triangular-no-scroll.email.inbox"),s.close()}function o(){t("notifications").close()}var s=this;s.close=o,s.currentTab=0,s.notificationGroups=[{name:"Twitter",notifications:[{title:"Mention from oxygenna",icon:"fa fa-twitter",iconColor:"#55acee",date:moment().startOf("hour")},{title:"Oxygenna",icon:"fa fa-twitter",iconColor:"#55acee",date:moment().startOf("hour")},{title:"Oxygenna",icon:"fa fa-twitter",iconColor:"#55acee",date:moment().startOf("hour")},{title:"Followed by Oxygenna",icon:"fa fa-twitter",iconColor:"#55acee",date:moment().startOf("hour")}]},{name:"Server",notifications:[{title:"Server Down",icon:"zmdi zmdi-alert-circle",iconColor:"rgb(244, 67, 54)",date:moment().startOf("hour")},{title:"Slow Response Time",icon:"zmdi zmdi-alert-triangle",iconColor:"rgb(255, 152, 0)",date:moment().startOf("hour")},{title:"Server Down",icon:"zmdi zmdi-alert-circle",iconColor:"rgb(244, 67, 54)",date:moment().startOf("hour")}]},{name:"Sales",notifications:[{title:"Triangular Admin $21",icon:"zmdi zmdi-shopping-cart",iconColor:"rgb(76, 175, 80)",date:moment().startOf("hour")},{title:"Lambda WordPress $60",icon:"zmdi zmdi-shopping-cart",iconColor:"rgb(76, 175, 80)",date:moment().startOf("hour")},{title:"Triangular Admin $21",icon:"zmdi zmdi-shopping-cart",iconColor:"rgb(76, 175, 80)",date:moment().startOf("hour")},{title:"Triangular Admin $21",icon:"zmdi zmdi-shopping-cart",iconColor:"rgb(76, 175, 80)",date:moment().startOf("hour")},{title:"Lambda WordPress $60",icon:"zmdi zmdi-shopping-cart",iconColor:"rgb(76, 175, 80)",date:moment().startOf("hour")},{title:"Triangular Admin $21",icon:"zmdi zmdi-shopping-cart",iconColor:"rgb(76, 175, 80)",date:moment().startOf("hour")}]}],s.openMail=a,s.settingsGroups=[{name:"Account Settings",settings:[{title:"Show my location",icon:"zmdi zmdi-pin",enabled:!0},{title:"Show my avatar",icon:"zmdi zmdi-face",enabled:!1},{title:"Send me notifications",icon:"zmdi zmdi-notifications-active",enabled:!0}]},{name:"Chat Settings",settings:[{title:"Show my username",icon:"zmdi zmdi-account",enabled:!0},{title:"Make my profile public",icon:"zmdi zmdi-account-box",enabled:!1},{title:"Allow cloud backups",icon:"zmdi zmdi-cloud-upload",enabled:!0}]}],s.statisticsGroups=[{name:"User Statistics",stats:[{title:"Storage Space (120/160 Gb)",mdClass:"md-primary",value:60},{title:"Bandwidth Usage (10/100 Gb)",mdClass:"md-accent",value:10},{title:"Memory Usage (1/8 Gb)",mdClass:"md-warn",value:100}]},{name:"Server Statistics",stats:[{title:"Storage Space (120/160 Gb)",mdClass:"md-primary",value:60},{title:"Bandwidth Usage (10/100 Gb)",mdClass:"md-accent",value:10},{title:"Memory Usage (1/8 Gb)",mdClass:"md-warn",value:100}]}],e.$on("triSwitchNotificationTab",function(e,n){s.currentTab=n}),n({method:"GET",url:i.url+"email/inbox"}).then(function(e){s.emails=e.data.slice(1,20)})}e.$inject=["$scope","$http","$mdSidenav","$state","API_CONFIG"],angular.module("triangular.components").controller("RightSidenavController",e)}(),function(){"use strict";function e(e,n){function t(){var e="icon"===r.layout.sideMenuSize?"full":"icon";n.setOption("sideMenuSize",e)}var r=this;r.layout=n.layout,r.sidebarInfo={appName:e.name,appLogo:e.logo},r.toggleIconMenu=t}e.$inject=["triSettings","triLayout"],angular.module("triangular.components").controller("LeftSidenavController",e)}(),function(){"use strict";function e(e,n){var t=this;t.layout=e,t.settings=n}e.$inject=["triLayout","triSettings"],angular.module("app").controller("AppFooterController",e)}(),angular.module("invoice").factory("VantivTriPOSiPP350",["$rootScope","$compile","$http","$timeout","$q",function(e,n,t,r,i){var a=this;return a.config={tpAuthorizationCredential:"",tpAuthorizationSecret:"",serviceAddress:"",application_id:""},a.makeSaleRequest=function(e,n,r){var o=i.defer(),s={url:e.serviceAddress,method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","tp-application-id":e.application_id,"tp-application-name":"TriPOSProcessor","tp-application-version":"1.0.0","tp-authorization":"Version="+e.tpAuthorizationVersion+", Credential="+e.tpAuthorizationCredential,"tp-return-logs":!1,APPID:void 0,DEBUG:void 0,TOKEN:void 0,"x-csrftoken":void 0},json:n};a.createAuthHeader(s,e.tpAuthorizationCredential,e.tpAuthorizationSecret,function(e,n){if(e)return r(e);s.headers["tp-authorization"]=n;({headers:s.headers});console.log("---MAKE SALE REQUEST------"),console.log(s);var i=t.defaults.headers.common;t.defaults.headers.common="",t({url:s.url+"api/v1/sale",method:s.method,data:s.json,headers:s.headers}).then(function(e){return o.resolve(e),t.defaults.headers.common=i,r(e)})["catch"](function(e){console.log("--Make Sale RESPONSE---"),console.log(e),o.reject(e);var n=[];n.push({developerMessage:"Service not available /api/v1/sale"});var a={_hasErrors:!0,_errors:n},s={};return s={data:a,header:{},status:404,statusText:"Resource not found"},t.defaults.headers.common=i,r(s)})})},a.getLaneInfo=function(e,n){var r=i.defer(),o={url:e.serviceAddress,method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","tp-application-id":e.application_id,"tp-application-name":"TriPOSProcessor","tp-application-version":"1.0.0","tp-authorization":"Version="+e.tpAuthorizationVersion+", Credential="+e.tpAuthorizationCredential,"tp-return-logs":!1,APPID:void 0,DEBUG:void 0,TOKEN:void 0,"x-csrftoken":void 0}};a.createAuthHeader(o,e.tpAuthorizationCredential,e.tpAuthorizationSecret,function(e,i){if(e)return n(e);o.headers["tp-authorization"]=i;({headers:o.headers});t({url:o.url+"api/v1/configuration/lanes/",method:o.method,data:"",headers:o.headers}).then(function(e){return r.resolve(e),n(e)})["catch"](function(e){r.reject(e);var t=[];t.push({developerMessage:"Service not available /api/v1/configuration/lane"});var i={_hasErrors:!0,_errors:t},a={};return a={data:i,header:{},status:404,statusText:"Resource not found"},n(a)})})},a.paymentAccount=function(e,n){var r=i.defer(),o={url:e.serviceAddress,method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json","tp-application-id":e.application_id,"tp-application-name":"TriPOSProcessor","tp-application-version":"1.0.0","tp-authorization":"Version="+e.tpAuthorizationVersion+", Credential="+e.tpAuthorizationCredential,"tp-return-logs":!1,APPID:void 0,DEBUG:void 0,TOKEN:void 0,"x-csrftoken":void 0}};a.createAuthHeader(o,e.tpAuthorizationCredential,e.tpAuthorizationSecret,function(e,i){if(e)return n(e);o.headers["tp-authorization"]=i;var a=({headers:o.headers},{laneId:"1",paymentAccountReferenceNumber:"1050119"});t({url:o.url+"/api/v1/paymentAccount/FBDBB2E7-1672-49EF-AD63-0E109304CB2E",method:o.method,data:a,headers:o.headers}).then(function(e){return r.resolve(e),n(e)})["catch"](function(e){r.reject(e);var t=[];t.push({developerMessage:"Service not available /api/v1/paymentAccount"});var i={_hasErrors:!0,_errors:t},a={};return a={data:i,header:{},status:404,statusText:"Resource not found"},n(a)})})},a.processVoidRefund=function(e,n,r,o){console.log("--Config---"),console.log(r);var s=i.defer(),l={url:r.serviceAddress,method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","tp-application-id":r.application_id,"tp-application-name":"TriPOSProcessor","tp-application-version":"1.0.0","tp-authorization":"Version="+r.tpAuthorizationVersion+", Credential="+r.tpAuthorizationCredential,"tp-return-logs":!1,APPID:void 0,DEBUG:void 0,TOKEN:void 0}};a.createAuthHeader(l,r.tpAuthorizationCredential,r.tpAuthorizationSecret,function(r,i){if(r)return o(r);l.headers["tp-authorization"]=i;var a=({headers:l.headers},t.defaults.headers.common);t.defaults.headers.common="",t({url:e,method:l.method,data:n,headers:l.headers}).then(function(e){return s.resolve(e),t.defaults.headers.common=a,o(e)})["catch"](function(n){s.reject(n);var r=[];r.push({developerMessage:"Service not available "+e});var i={_hasErrors:!0,_errors:r},l={};return l={data:i,header:{},status:404,statusText:"Resource not found"},t.defaults.headers.common=a,o(l)})})},a.createAuthHeader=function(e,n,t,r){var i="tp-hmac-md5",o=a.guid(),s=(new Date).toISOString();console.log("Request Date"),console.log(s);var l=a.urlParse(e.url),d=l.path,c=l.query,m=e.method,u=a.getBodyHash(JSON.stringify(e.json)),p=a.getCanonicalHeaderInfo(e.headers),g=p.canonicalSignedHeaders,f=p.canonicalHeaderStr,h=a.getCanonicalRequestHash(m,d,c,f,g,u),v=a.getKeySignatureHash(s,o+t),b=i.toUpperCase()+"\n"+s+"\n"+n+"\n"+h,y=(a.getKeySignatureHash(v,b),["Version=1.0","Algorithm="+i.toUpperCase(),"Credential="+n,"SignedHeaders="+g,"Nonce="+o,"RequestDate="+s,"Signature="].join(","));return r(null,y)},a.getBodyHash=function(e){return CryptoJS.MD5(a.utf8_encode(e))},a.getCanonicalHeaderInfo=function(e){var n=[],t={},r=[];_.each(e,function(e,i){if(0!==i.indexOf("tp-"))if(n.push(i),r.indexOf(i)===-1){r.push(i);t[i]=[e]}else t[i].push(e)}),n=n.sort().join(";");var i="",a=[];return _.each(t,function(e,n){a.push(n+":"+e.join(", "))}),i=a.sort().join("\n"),{canonicalSignedHeaders:n,canonicalHeaderStr:i}},a.getCanonicalRequestHash=function(e,n,t,r,i,o){var s=e+"\n";return s+=n+"\n",null===t&&(t=""),s+=t+"\n",s+=r+"\n",s+=i+"\n",s+=o,CryptoJS.MD5(a.utf8_encode(s))},a.getKeySignatureHash=function(e,n){var t=a.utf8_encode(e),r=a.utf8_encode(n);return CryptoJS.HmacMD5(r,t)},a.urlParse=function(e){var n=document.createElement("a");return n.href=e,n},a.utf8_encode=function(e){return unescape(encodeURIComponent(e))},a.utf8_decode=function(e){return decodeURIComponent(escape(e))},a.ksort=function(e){var n=Object.keys(e).sort(),t={};for(var r in n)t[n[r]]=e[n[r]];return t},a.rtrim=function(e){return void 0==e&&(e="\\s"),e.replace(new RegExp("["+e+"]*$"),"")},a.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},a.array_search=function(e,n){if("array"==typeof n||"object"==typeof n){var t;for(var r in n)if(n[r]==e){t=r;break}return t}},a.explode=function(e,n,t){var r=e.split(n);return t&&r.push(r.splice(t-1,r.length-(t-1)).join(n)),r},a.strrpos=function(e,n,t){var r=-1;return t?(r=(e+"").slice(t).lastIndexOf(n),r!==-1&&(r+=t)):r=(e+"").lastIndexOf(n),r>=0&&r},{config:a.config,makeSaleRequest:a.makeSaleRequest,getLaneInfo:a.getLaneInfo,paymentAccount:a.paymentAccount,processVoidRefund:a.processVoidRefund,createAuthHeader:a.createAuthHeader,getBodyHash:a.getBodyHash,getCanonicalHeaderInfo:a.getCanonicalHeaderInfo,getCanonicalRequestHash:a.getCanonicalRequestHash,getKeySignatureHash:a.getKeySignatureHash}}]),function(){"use strict";function e(e,n,t){t.navigator.platform.indexOf("Win")!==-1&&(e.bodyClasses=["os-windows"])}e.$inject=["$rootScope","$timeout","$window"],angular.module("triangular").run(e)}(),function(){"use strict";function e(){function e(e){a.languages.push(e)}function n(e){a.logo=e}function t(e){a.name=e}function r(e){a.copyright=e}function i(e){a.version=e}var a={languages:[],name:"",logo:"",copyright:"",version:""};this.addLanguage=e,this.setLogo=n,this.setName=t,this.setCopyright=r,this.setVersion=i,this.$get=function(){return{languages:a.languages,name:a.name,copyright:a.copyright,logo:a.logo,version:a.version,defaultSkin:a.defaultSkin}}}angular.module("triangular").provider("triSettings",e)}(),function(){"use strict";function e(e){e.state("triangular",{"abstract":!1,views:{root:{templateUrl:"app/triangular/layouts/states/triangular/triangular.tmpl.html",controller:"TriangularStateController",controllerAs:"stateController"},"sidebarLeft@triangular":{templateProvider:["$templateRequest","triLayout",function(e,n){if(angular.isDefined(n.layout.sidebarLeftTemplateUrl))return e(n.layout.sidebarLeftTemplateUrl)}],controllerProvider:["triLayout",function(e){return e.layout.sidebarLeftController}],controllerAs:"vm"},"sidebarRight@triangular":{templateProvider:["$templateRequest","triLayout",function(e,n){if(angular.isDefined(n.layout.sidebarRightTemplateUrl))return e(n.layout.sidebarRightTemplateUrl)}],controllerProvider:["triLayout",function(e){return e.layout.sidebarRightController}],controllerAs:"vm"},"toolbar@triangular":{templateProvider:["$templateRequest","triLayout",function(e,n){if(angular.isDefined(n.layout.toolbarTemplateUrl))return e(n.layout.toolbarTemplateUrl)}],controllerProvider:["triLayout",function(e){return e.layout.toolbarController}],controllerAs:"vm"},"loader@triangular":{templateProvider:["$templateRequest","triLayout",function(e,n){if(angular.isDefined(n.layout.loaderTemplateUrl))return e(n.layout.loaderTemplateUrl)}],controllerProvider:["triLayout",function(e){return e.layout.loaderController}],controllerAs:"loader"}}})}e.$inject=["$stateProvider"],angular.module("triangular").config(e)}(),function(){"use strict";angular.module("app.translate",["pascalprecht.translate","LocalStorageModule"])}(),function(){"use strict";function e(e,n,t){var r=[{name:"Chinese",key:"zh"},{name:"English",key:"en"},{name:"French",key:"fr"},{name:"Portuguese",key:"pt"}];e.useLoader("$translatePartialLoader",{urlTemplate:"{part}/i18n/{lang}.json"}),n.addPart("app"),e.useSanitizeValueStrategy("sanitize"),e.useLoaderCache(!0);var i=[];for(var a in r)i.push(r[a].key),t.addLanguage({name:r[a].name,key:r[a].key});e.registerAvailableLanguageKeys(i,{en_US:"en",en_UK:"en"}).use("en"),e.useLocalStorage()}e.$inject=["$translateProvider","$translatePartialLoaderProvider","triSettingsProvider"],angular.module("app.translate").config(e)}(),function(){"use strict";angular.module("app.permission",["permission"])}(),function(){"use strict";function e(e,n,t){function r(){return s}function i(){return n.get("app/permission/data/users.json")}function a(n){var r=e.defer(),i=!1;return angular.forEach(s.roles,function(e){if(t.hasRoleDefinition(e)){var r=t.getStore();angular.isDefined(r[e])&&-1!==r[e].validationFunction.indexOf(n)&&(i=!0)}}),i?r.resolve():r.reject(),r.promise}function o(e){return i().then(function(n){var t=r();return angular.forEach(n.data,function(n){n.username===e&&(t=n,s=n)}),t})}var s={displayName:"Christos",username:"christos",avatar:"assets/images/avatars/avatar-5.png",roles:["SUPERADMIN"]},l={getCurrentUser:r,getUsers:i,hasPermission:a,login:o};return l}e.$inject=["$q","$http","RoleStore"],angular.module("app.permission").factory("UserService",e)}(),function(){"use strict";function e(e,n,t,r,i,a,o,s,l){function d(){t.go("401")}var c=n.get("tri-user");angular.isDefined(c)&&a.login(c);var m=[];e.promise=o.GetErpStatus(),e.promise.then(function(e){if(0==e.statuscode){var n=e.data.erp.app_features;console.log(n),n.length>0&&angular.forEach(n,function(e,n){angular.isObject(e)?angular.forEach(e,function(e,n){angular.forEach(e,function(e,t){m.push(n+"-"+e.toString())})}):m.push(e.toString())}),r.defineManyPermissions(m,function(e){return!0}),t.reload()}}),i.defineManyRoles({SUPERADMIN:["viewEmail","viewGitHub","viewCalendar","viewLayouts","viewTodo","viewElements","viewAuthentication","viewCharts","viewMaps"],ADMIN:["viewLayouts","viewTodo","viewElements","viewAuthentication","viewCharts","viewMaps"],USER:["viewAuthentication","viewCharts","viewMaps"],ANONYMOUS:[]});var u=e.$on("$stateChangePermissionDenied",d);e.$on("$destroy",function(){u()})}e.$inject=["$rootScope","$cookies","$state","PermissionStore","RoleStore","UserService","SettingModel","Clique","triMenu"],angular.module("app.permission").run(e)}(),angular.module("transactions").factory("printer",["$rootScope","$compile","$http","$timeout","$q",function(e,n,t,r,i){var a=function(e){var n=i.defer(),t=$('<iframe style="display: block; width:0px; height:0px;"></iframe>').appendTo("body")[0];t.contentWindow.printAndRemove=function(){t.contentWindow.print(),$(t).remove(),n.resolve()};var a='<!doctype html><html><body onload="window.print();">'+e+"</body></html>",o=t.contentWindow.document.open("text/html","replace");return o.write(a),o.close(),r(function(){},1e3),n.promise},o=function(o,s){e.isBeingPrinted=!0,t.get(o).then(function(o){var l=o.data,d=e.$new();angular.extend(d,s);var c=n($("<div>"+l+"</div>"))(d),m=i.defer(),u=function(){return d.$$phase||t.pendingRequests.length?r(u,1e3):(a(c.html()).then(function(){e.isBeingPrinted=!1,m.resolve()}),d.$destroy()),m.promise};u()})},s=function(o,s,l){e.isBeingPrinted=!0,t.get(o).then(function(o){var d=o.data,c=s,m=n($("<div>"+d+"</div>"))(c),u=i.defer(),p=function(){return c.$$phase||t.pendingRequests.length?r(p):a(m.html()).then(function(){e.isBeingPrinted=!1,l&&l(),u.resolve()}),u.promise};p()})};return{print:o,printFromScope:s}}]),function(){"use strict";angular.module("app").value("googleChartApiConfig",{version:"1.1",optionalSettings:{packages:["line","bar","geochart","scatter"],language:"en"}})}(),function(){"use strict";function e(e,n){return function(t){return e.has("translateFilter")?n("translate")(t):t}}e.$inject=["$injector","$filter"],angular.module("triangular").filter("triTranslate",e)}(),function(){function e(e){function n(){e.go("triangular.dashboard-analytics")}var t=this;t.goHome=n}e.$inject=["$state"],angular.module("app").controller("ErrorPageController",e)}(),function(){"use strict";function e(e,n,t){e.definePalette("white",{50:"ffffff",100:"ffffff",200:"ffffff",300:"ffffff",400:"ffffff",500:"ffffff",600:"ffffff",700:"ffffff",800:"ffffff",900:"ffffff",A100:"ffffff",A200:"ffffff",A400:"ffffff",A700:"ffffff",contrastDefaultColor:"dark"}),e.definePalette("black",{50:"e1e1e1",100:"b6b6b6",200:"8c8c8c",300:"646464",400:"3a3a3a",500:"e1e1e1",600:"e1e1e1",700:"232323",800:"1a1a1a",900:"121212",A100:"3a3a3a",A200:"ffffff",A400:"ffffff",A700:"ffffff",contrastDefaultColor:"light"});var r=e.extendPalette("cyan",{contrastDefaultColor:"light",contrastLightColors:"500 700 800 900",contrastStrongLightColors:"500 700 800 900"});e.definePalette("triCyan",r),n.theme("cyan").primaryPalette("triCyan").accentPalette("amber").warnPalette("deep-orange"),n.theme("cyan-white").primaryPalette("white").accentPalette("triCyan",{"default":"500"}).warnPalette("deep-orange"),t.skin("cyan-cloud","Cyan Cloud").sidebarTheme("cyan").toolbarTheme("cyan-white").logoTheme("cyan").contentTheme("cyan"),n.theme("red").primaryPalette("red").accentPalette("amber").warnPalette("purple"),n.theme("white-red").primaryPalette("white").accentPalette("red",{"default":"500"}).warnPalette("purple"),t.skin("red-dwarf","Red Dwarf").sidebarTheme("red").toolbarTheme("white-red").logoTheme("red").contentTheme("red"),n.theme("purple").primaryPalette("purple").accentPalette("deep-orange").warnPalette("amber"),n.theme("white-purple").primaryPalette("white").accentPalette("purple",{"default":"400"}).warnPalette("deep-orange"),t.skin("plumb-purple","Plumb Purple").sidebarTheme("purple").toolbarTheme("white-purple").logoTheme("purple").contentTheme("purple"),n.theme("dark").primaryPalette("black",{"default":"300","hue-1":"400"}).accentPalette("amber").warnPalette("deep-orange").backgroundPalette("black").dark(),t.skin("dark-knight","Dark Knight").sidebarTheme("dark").toolbarTheme("dark").logoTheme("dark").contentTheme("dark"),n.theme("blue-grey").primaryPalette("blue-grey").accentPalette("amber").warnPalette("orange"),n.theme("white-blue-grey").primaryPalette("white").accentPalette("blue-grey",{"default":"400"}).warnPalette("orange"),t.skin("battleship-grey","Battleship Grey").sidebarTheme("blue-grey").toolbarTheme("white-blue-grey").logoTheme("blue-grey").contentTheme("blue-grey"),n.theme("orange").primaryPalette("orange",{"default":"800"}).accentPalette("lime").warnPalette("amber"),n.theme("white-orange").primaryPalette("white").accentPalette("orange",{"default":"500"}).warnPalette("lime"),t.skin("zesty-orange","Zesty Orange").sidebarTheme("orange").toolbarTheme("white-orange").logoTheme("orange").contentTheme("orange"),n.theme("indigo").primaryPalette("indigo",{"default":"600"}).accentPalette("red").warnPalette("lime"),t.skin("indigo-island","Indigo Island").sidebarTheme("indigo").toolbarTheme("indigo").logoTheme("indigo").contentTheme("indigo"),n.theme("light-green").primaryPalette("light-green",{"default":"400"}).accentPalette("amber").warnPalette("deep-orange"),n.theme("white-light-green").primaryPalette("white").accentPalette("light-green",{"default":"400"}).warnPalette("deep-orange"),t.skin("kermit-green","Kermit Green").sidebarTheme("light-green").toolbarTheme("white-light-green").logoTheme("light-green").contentTheme("light-green"),t.useSkinCookie(!0),t.setSkin("cyan-cloud")}e.$inject=["$mdThemingProvider","triThemingProvider","triSkinsProvider"],angular.module("app").config(e)}(),function(){"use strict";function e(e,n){var t=new Date;e.setName("Clique"),e.setCopyright("&copy;"+t.getFullYear()+" clique.center"),
e.setLogo("assets/images/logo.png"),e.setVersion("2.7.1"),n.setTitle("Clique"),n.setSeparator("|")}e.$inject=["triSettingsProvider","triRouteProvider"],angular.module("app").config(e)}(),function(){"use strict";function e(e){e.setDefaultOption("loaderTemplateUrl","app/layouts/loader/loader.tmpl.html"),e.setDefaultOption("loaderController","LoaderController"),e.setDefaultOption("sidebarLeftTemplateUrl","app/layouts/leftsidenav/leftsidenav.tmpl.html"),e.setDefaultOption("sidebarLeftController","LeftSidenavController"),e.setDefaultOption("sidebarRightTemplateUrl","app/layouts/rightsidenav/rightsidenav.tmpl.html"),e.setDefaultOption("sidebarRightController","RightSidenavController"),e.setDefaultOption("toolbarTemplateUrl","app/layouts/toolbar/toolbar.tmpl.html"),e.setDefaultOption("toolbarController","ToolbarController"),e.setDefaultOption("footerTemplateUrl","app/layouts/footer/footer.tmpl.html"),e.setDefaultOption("toolbarSize","default"),e.setDefaultOption("toolbarShrink",!1),e.setDefaultOption("toolbarClass",""),e.setDefaultOption("contentClass",""),e.setDefaultOption("sideMenuSize","full"),e.setDefaultOption("showToolbar",!0),e.setDefaultOption("footer",!1)}e.$inject=["triLayoutProvider"],angular.module("app").config(e)}(),function(){"use strict";function e(e,n){e.state("404",{url:"/404",views:{root:{templateUrl:"404.tmpl.html",controller:"ErrorPageController",controllerAs:"vm"}}}).state("401",{url:"/401",views:{root:{templateUrl:"401.tmpl.html",controller:"ErrorPageController",controllerAs:"vm"}}}).state("500",{url:"/500",views:{root:{templateUrl:"500.tmpl.html",controller:"ErrorPageController",controllerAs:"vm"}}}),n.when("","/dashboards/analytics"),n.when("/","/dashboards/analytics"),n.otherwise(function(e){var n=e.get("$state");n.go("/404")})}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app").config(e)}(),function(){"use strict";function e(e){e.setOptions({colours:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0"],responsive:!0})}e.$inject=["ChartJsProvider"],angular.module("app").config(e)}(),function(){"use strict";function e(e,n,t,r,i,a){function o(){n.go("500")}a.defaults.headers.common.DEBUG="Token 9c4f7039d8fc5117e92905642fa7f144ac66363f";var s=e.$on("$stateChangeError",o);e.$on("$destroy",function(){s()});JSON.parse(localStorage.getItem("customers"))}e.$inject=["$rootScope","$state","$location","InvoiceModel","SettingModel","$http"],angular.module("app").run(e).constant("api","/some/api/info").config(["$mdDateLocaleProvider",function(e){e.formatDate=function(e){return moment(e).format("MM/DD/YYYY")}}]).service("dataService",function(){var e={};this.dataObj=e}).directive("numberFormatter",["$filter",function(e){var n=2,t=function(e){return e?Number(e):""},r=function(t){return e("number")(t,n)};return{restrict:"A",require:"ngModel",link:function(e,n,i,a){a.$parsers.push(t),a.$formatters.push(r),n.bind("blur",function(){n.val(r(a.$modelValue))}),n.bind("focus",function(){n.val(a.$modelValue)})}}}]).directive("ngEnter",function(){return function(e,n,t){n.bind("keydown keypress",function(n){13===n.which&&(e.$apply(function(){e.$eval(t.ngEnter)}),n.preventDefault())})}}).directive("creditCardType",function(){var e={require:"ngModel",link:function(e,n,t,r){r.$parsers.unshift(function(n){return e.ccinfo.type=/^5[1-5]/.test(n)?"master":/^4/.test(n)?"visa":/^3[47]/.test(n)?"amex":/^6011|65|64[4-9]|622(1(2[6-9]|[3-9]\d)|[2-8]\d{2}|9([01]\d|2[0-5]))/.test(n)?"discover":void 0,r.$setValidity("inavalid",!!e.ccinfo.type),n})}};return e}).service("helper",function(){var e=function(e,n){return!!(e.hasOwnProperty("configuration")&&e.configuration.hasOwnProperty("hardware")&&e.configuration.hardware.hasOwnProperty(n))},n=function(e){var n=/\d+/g,t=[],r=[];if(null!=e.split(n)&&(t=e.split(n)),null!=e.match(n)&&(r=e.match(n)),null!=r){var a=parseInt(r[r.length-1]);a=++a,r[r.length-1]=a.toString()}var o="";if(t.length>r.length)for(i=0;i<t.length;i++)o+=t[i],i<r.length&&(o+=r[i]);else for(i=0;i<r.length;i++)o+=r[i],i<t.length&&(o+=t[i]);return""==o?"1":o};return{getAutoIncrementInvoiceNo:n,checkHardwareModel:e}}).directive("stickyText",["$mdSticky","$compile",function(e,n){return{restrict:"E",template:"<span>Sticky Text</span>",link:function(n,t){e(n,t)}}}]).directive("scrolly",function(){return{restrict:"A",link:function(e,n,t){var r=n[0];console.log("---scroll-----"),console.log(r),n.bind("scroll",function(){var n=parseInt(t.recordleft);r.scrollTop+r.offsetHeight==r.scrollHeight&&n>0?(r.scrollTop=r.scrollHeight-700,e.activated=!0,e.$apply(t.scrolly)):e.activated=!1})}}})}(),function(){"use strict";function e(e){e.preAssignBindingsEnabled(!0)}e.$inject=["$compileProvider"],angular.module("app").config(e)}(),angular.module("app").run(["$templateCache",function(e){e.put("app/layouts/footer/footer.tmpl.html",'<div flex="noshrink" layout="column" layout-align="end none">\r\n    <md-toolbar ng-controller="AppFooterController as footer" md-theme="{{triSkin.elements.toolbar}}">\r\n        <div class="md-toolbar-tools md-body-1" layout="row" layout-align="space-between center">\r\n            <h2>{{footer.settings.name}}</h2>\r\n            <h2 hide-xs ng-bind-html="footer.settings.copyright"></h2>\r\n            <h2>v{{footer.settings.version}}</h2>\r\n        </div>\r\n    </md-toolbar>\r\n</div>\r\n'),e.put("app/layouts/leftsidenav/leftsidenav.tmpl.html",'<md-toolbar class="sidebar-left-toolbar" md-theme="{{::triSkin.elements.logo}}">\r\n    <div class="md-toolbar-tools" layout="row" layout-align="start center">\r\n\r\n        <div class="sidebar-left-logo">\r\n            <a href="/apps/dashboard/"><img ng-src="{{::vm.sidebarInfo.appLogo}}" alt="{{::vm.sidebarInfo.appName}}"></a>\r\n        </div>\r\n\r\n        <h2 flex class="sidebar-left-title" onclick="document.window.href=\'/apps/dashboard/\'">{{::vm.sidebarInfo.appName}}</h2>\r\n\r\n        <md-button class="md-icon-button sidebar-left-icon" ng-click="vm.toggleIconMenu()" aria-label="Open side menu">\r\n            <md-icon md-font-icon ng-class="{ \'zmdi zmdi-chevron-right\' : vm.layout.sideMenuSize == \'icon\', \'zmdi zmdi-chevron-left\' : vm.layout.sideMenuSize == \'full\' }"></md-icon>\r\n        </md-button>\r\n\r\n    </div>\r\n</md-toolbar>\r\n\r\n<tri-menu md-theme="{{triSkin.elements.sidebar}}" flex layout="column"></tri-menu>\r\n'),e.put("app/layouts/loader/loader.tmpl.html",'<div class="app-loader" flex layout="column" layout-align="center center">\r\n    <img src="{{loader.triSettings.logo}}" alt="">\r\n    <md-progress-linear class="padding-bottom-10" md-mode="indeterminate"></md-progress-linear>\r\n    <h2 class="padding-bottom-100">{{loader.triSettings.name}}</h2>\r\n</div>\r\n'),e.put("app/layouts/rightsidenav/rightsidenav.tmpl.html",'<md-content flex layout class="admin-notifications">\r\n    <md-tabs flex md-stretch-tabs="always" md-selected="vm.currentTab">\r\n        <md-tab>\r\n            <md-tab-label>\r\n                <md-icon md-font-icon="zmdi zmdi-email"></md-icon>\r\n            </md-tab-label>\r\n            <md-tab-body>\r\n                <md-content>\r\n                    <md-list class="md-dense">\r\n                        <md-list-item class="md-2-line" ng-repeat="email in ::vm.emails" ng-click="vm.openMail(email)">\r\n                            <img class="md-avatar" ng-src="{{::email.from.image}}" alt="{{::email.from.name}}">\r\n                            <div class="md-list-item-text">\r\n                                <h3>{{::email.from.name}}</h3>\r\n                                <h4>{{::email.subject}}</h4>\r\n                                <p class="md-caption" am-time-ago="::email.date"></p>\r\n                            </div>\r\n                            <md-divider ng-hide="$last"></md-divider>\r\n                        </md-list-item>\r\n                    </md-list>\r\n                </md-content>\r\n            </md-tab-body>\r\n        </md-tab>\r\n        <md-tab>\r\n            <md-tab-label>\r\n                <md-icon md-font-icon="fa fa-bell-o"></md-icon>\r\n            </md-tab-label>\r\n            <md-tab-body>\r\n                <md-content>\r\n                    <md-list>\r\n                        <div ng-repeat="group in ::vm.notificationGroups">\r\n                            <md-subheader class="md-primary">{{::group.name}}</md-subheader>\r\n                            <md-list-item ng-repeat="notification in ::group.notifications" layout="row" layout-align="space-between center">\r\n                                <md-icon md-font-icon="{{::notification.icon}}" ng-style="{ color: notification.iconColor }"></md-icon>\r\n                                <p>{{::notification.title}}</p>\r\n                                <span class="md-caption" am-time-ago="::notification.date"></span>\r\n                            </md-list-item>\r\n                        </div>\r\n                    </md-list>\r\n                </md-content>\r\n            </md-tab-body>\r\n        </md-tab>\r\n        <md-tab>\r\n            <md-tab-label>\r\n                <md-icon md-font-icon="zmdi zmdi-account"></md-icon>\r\n            </md-tab-label>\r\n            <md-tab-body>\r\n                <md-content>\r\n                    <md-list>\r\n                        <div ng-repeat="group in ::vm.settingsGroups">\r\n                            <md-subheader class="md-primary"><span translate>{{::group.name}}</span></md-subheader>\r\n                            <md-list-item ng-repeat="setting in ::group.settings" layout="row" layout-align="space-around center">\r\n                                <md-icon md-font-icon="{{::setting.icon}}"></md-icon>\r\n                                <p translate>{{::setting.title}}</p>\r\n                                <md-switch class="md-secondary" ng-model="setting.enabled"></md-switch>\r\n                            </md-list-item>\r\n                        </div>\r\n                        <div ng-repeat="group in ::vm.statisticsGroups">\r\n                            <md-subheader class="md-primary"><span translate>{{::group.name}}</span></md-subheader>\r\n                            <md-list-item ng-repeat="stat in ::group.stats" layout="column" layout-align="space-around start">\r\n                                <md-progress-linear class="margin-top-20" ng-class="::stat.mdClass" md-mode="determinate" ng-value="::stat.value"></md-progress-linear>\r\n                                <p translate>{{::stat.title}}</p>\r\n                            </md-list-item>\r\n                        </div>\r\n                    </md-list>\r\n                </md-content>\r\n            </md-tab-body>\r\n        </md-tab>\r\n    </md-tabs>\r\n</md-content>\r\n'),e.put("app/layouts/toolbar/toolbar.tmpl.html",'<div class="md-toolbar-tools">\r\n    <md-button class="md-icon-button" ng-if="!vm.hideMenuButton()" ng-click="vm.openSideNav(\'left\')" aria-label="side navigation">\r\n        <md-icon md-font-icon="zmdi zmdi-menu"></md-icon>\r\n    </md-button>\r\n\r\n    <h2 hide-xs flex>\r\n        <span ng-repeat="crumb in vm.breadcrumbs.crumbs">\r\n            <a href="javascript:history.go(-1)" ng-if="!$last" >{{crumb.name}}</a>\r\n            <span translate ng-if="$last">{{crumb.name}}</span>\r\n            <md-icon md-font-icon="zmdi zmdi-chevron-right" ng-if="!$last"></md-icon>\r\n        </span>\r\n    </h2>\r\n\r\n    <md-button class="md-icon-button toolbar-button" ng-click="vm.toggleFullScreen()" aria-label="toggle fullscreen">\r\n        <md-icon md-font-icon ng-class="vm.fullScreenIcon"></md-icon>\r\n    </md-button>\r\n    <md-menu>\r\n        <md-button aria-label="Open user menu" ng-click="$mdOpenMenu()" aria-label="side navigation" style="text-transform:capitalize !important;">\r\n                <md-icon md-font-icon="zmdi zmdi-account-circle"></md-icon>\r\n                {{vm.currentUser.displayName}}\r\n        </md-button>\r\n        <md-menu-content width="3">\r\n             <md-menu-item ng-repeat="menu in vm.topMenuList">\r\n                <md-button  ng-click="vm.TopMenu(menu)" aria-label="side navigation">\r\n                    <md-icon md-font-icon="{{menu.icon}}"></md-icon>\r\n                    <span translate="{{menu.name}}"></span>\r\n                </md-button>\r\n            </md-menu-item>\r\n               \r\n        </md-menu-content>\r\n    </md-menu>\r\n</div>\r\n'),e.put("app/modules/recurring/recurring.tmpl.html",'<style>\r\n    md-chips.md-cyan-theme .md-chips {\r\n        box-shadow: none !important;\r\n    }\r\n    .jp-card-container{\r\n\r\n    }\r\n</style>\r\n<md-sidenav class="md-sidenav-right md-whiteframe-z4" md-component-id="recurring_notification" style="min-width:340px !important;">\r\n    <md-progress-linear md-mode="indeterminate" ng-show="showHistoryProgress"></md-progress-linear>\r\n    <md-toolbar class="md-theme-light">\r\n        <div layout="row" layout-align="center center">\r\n            <div flex="100">\r\n                <h3 class="md-toolbar-tools">{{recurringObject.RecurringParams.Name}}</h3>\r\n            </div>\r\n\r\n        </div>\r\n    </md-toolbar>\r\n    <md-content>\r\n    <md-tabs md-dynamic-height md-border-bottom>\r\n      <md-tab>\r\n        <md-tab-label>\r\n        Info\r\n        </md-tab-label>\r\n        <md-tab-body>\r\n          <md-content >\r\n               <div layout="column" class="md-padding" layout-align="start center">\r\n\r\n\r\n\r\n                    <div flex="100" >\r\n                        <md-button\r\n                        class=" md-primary"\r\n                        style="border:1px dashed #ccc;"\r\n                        ng-disabled="recurringObject.Status==true"\r\n                        ng-click="vm.recurringStatus(recurringObject.Id,1)"\r\n                        >\r\n                            <md-icon md-font-icon="zmdi zmdi-play"></md-icon>\r\n                            Start\r\n                        </md-button>\r\n                        <md-button\r\n                        class="md-primary"\r\n                        style="border:1px dashed #ccc;"\r\n                        ng-click="vm.recurringStatus(recurringObject.Id,0)"\r\n                        ng-disabled="recurringObject.Status==false"\r\n                        >\r\n                        <md-icon md-font-icon="zmdi zmdi-pause"></md-icon>\r\n                        Pause</md-button>\r\n                    </div>\r\n                     <div flex="100" >\r\n                        <md-progress-linear md-mode="indeterminate" ng-show="showProfileGetProgress"></md-progress-linear>\r\n                        <div class=\'card-wrapper\' ng-show="showProfileCard"></div>\r\n                        <form id="form">\r\n                            <input type="text" class="ccnumber hide_field" name="number" value="{{vm.cardInfo.ccnumber}}"  >\r\n                            <input type="text" class="ccname hide_field" name="name" value="{{vm.cardInfo.ccname}}"  />\r\n                            <input type="text" class="ccnexpiry hide_field" name="expiry" value="{{vm.cardInfo.ccmm}}/{{vm.cardInfo.ccyy}}"  />\r\n                            <input type="text" class="cccvc hide_field" name="cvc" value=""  />\r\n                        </form>\r\n                    </div>\r\n                    <div flex="100">\r\n                        &nbsp;\r\n                    </div>\r\n                    <div flex="100" ng-if="recurringObject.ErrorCount > 0 || recurringObject.OccurrencesCount > 0">\r\n                         <div style="width:100% !important; margin:0 auto;" align="center">\r\n                            <canvas class="chart-doughnut" chart-data="vm.pieData" chart-labels="vm.pieLabels" chart-legend="true" chart-options="vm.pieOptions"></canvas>\r\n                        </div>\r\n                    </div>\r\n\r\n               </div>\r\n            </md-content>\r\n        </md-tab-body>\r\n\r\n      </md-tab>\r\n      <md-tab ng-disabled="recurringObject.ErrorCount<=0">\r\n          <md-tab-label >\r\n            Error\r\n            <span class="toolbar-button-badge ng-scope md-cyan-white-theme"\r\n            theme-background="warn"\r\n            style="background-color: #FA7044; color:white"\r\n            ng-show="recurringObject.ErrorCount > 0"\r\n            >{{recurringObject.ErrorCount}}</span>\r\n        </md-tab-label>\r\n        <md-tab-body>\r\n                <md-content style="max-height:450px;">\r\n                    <md-list class="md-dense notification" flex>\r\n                        <div ng-repeat="notification in notifications">\r\n                            <md-subheader class="md-sticky md-primary md-hue-2 md-caption">\r\n                                <md-icon md-font-icon="zmdi zmdi-alert-triangle" style="color: rgb(255, 152, 0)"></md-icon>\r\n                                #{{notification.id}} | Queued At: {{notification.date | date:\'medium\'}}</md-subheader>\r\n                            <md-list-item class="secondary-button-padding">\r\n                                <p class="md-padding">{{vm.recurringHistoryStatus(notification)}}</p>\r\n                                <md-button class="md-primary" ng-click="vm.recurringRetry(notification.id)">\r\n                                    <md-icon md-font-icon="zmdi zmdi-refresh-alt" style="color: rgb(255, 152, 0)"></md-icon>\r\n                                    Retry\r\n                                </md-button>\r\n\r\n                            </md-list-item>\r\n                            <p class="md-padding md-margin md-caption rhistory_error">{{notification.error_message}}</p>\r\n                            <md-divider></md-divider>\r\n\r\n                        </div>\r\n                    </md-list>\r\n                </md-content>\r\n            </md-tab-body>\r\n      </md-tab>\r\n    </md-tabs>\r\n    </md-content>\r\n</md-sidenav>\r\n<md-sidenav class="md-sidenav-left md-whiteframe-z4" md-component-id="filter" style="min-width:280px !important;">\r\n    <md-toolbar class="md-theme-light">\r\n        <h1 class="md-toolbar-tools">Search</h1>\r\n    </md-toolbar>\r\n    <form flex="" name="vm.filter.form">\r\n        <md-content class="md-padding">\r\n            <div class="margin-bottom-20" layout="row" layout-align="space-around center">\r\n                <label>From</label>\r\n                <md-datepicker ng-model="fromdate" md-placeholder=""></md-datepicker>\r\n            </div>\r\n            <div class="margin-bottom-20" layout="row" layout-align="space-around center">\r\n                <label>To &nbsp;</label>\r\n                <md-datepicker ng-model="todate" md-placeholder=""></md-datepicker>\r\n            </div>\r\n            <md-input-container class="md-block"></md-input-container>\r\n            <md-input-container class="md-block">\r\n                <label>Status</label>\r\n                <md-select placeholder="Status" ng-model="StatusFilter">\r\n                    <md-option value="{{undefined}}">All</md-option>\r\n                    <md-option value="false">Running</md-option>\r\n                    <md-option value="true">Completed</md-option>\r\n                    <!-- <md-option value="dues">DUE</md-option>\r\n                    <md-option value="overdues">OVERDUE</md-option> -->\r\n                </md-select>\r\n            </md-input-container>\r\n            <md-input-container class="md-block"></md-input-container>\r\n            <md-input-container class="md-block">\r\n                <label>Customer Name</label>\r\n                <input\r\n                    name="Customer Name"\r\n\r\n                    type="text"\r\n                    ng-model="searchCustomer"\r\n\r\n                    >\r\n            </md-input-container>\r\n\r\n\r\n            <!-- <md-button class="md-primary md-raised width-100" ng-click="vm.getInvoices(); vm.openSidebar(\'filter\')">\r\n                Search\r\n                <md-icon md-font-icon="zmdi zmdi-search"></md-icon>\r\n\r\n            </md-button> -->\r\n            <md-button class="md-primary md-raised width-100" ng-click="resetForm()">\r\n                Clear\r\n                <md-icon md-font-icon="zmdi zmdi-delete"></md-icon>\r\n            </md-button>\r\n\r\n        </md-content>\r\n    </form>\r\n</md-sidenav>\r\n<div layout="row" flex  layout-align="start start" class="" style="padding:10px 0px 0px 10px !important;">\r\n    <div flex="90">\r\n\r\n   <md-button aria-label="search" class="md-primary md-raised md-small" ng-click="vm.openSidebar(\'filter\')"\r\n   >\r\n         <md-icon md-font-icon="fa fa-search" style="font-size:14px;"></md-icon>\r\n         <md-tooltip>Search Invoice</md-tooltip>\r\n   </md-button>\r\n\r\n\r\n   </div>\r\n    <div flex="10" ng-show="false">\r\n       <div class="md-toolbar-tools-">\r\n       <md-button class="md-icon-button toolbar-button animated"\r\n       ng-click="vm.openSidebar(\'gateway_sync\')" aria-label="side navigation" ng-hide="vm.tblData">\r\n               <md-icon md-font-icon="fa fa-bell-o"></md-icon>\r\n               <span class="toolbar-button-badge ng-scope md-cyan-white-theme" theme-background="warn" style="background-color: red; color:white">{{vm.notifications.length}}</span>\r\n           </md-button>\r\n       </div>\r\n   </div>\r\n</div>\r\n<div layout="row" layout-xs="column" layout-margin>\r\n    <tri-widget flex title="" content-layout="column" content-layout-align="center">\r\n        <md-table-container>\r\n            <table md-table class="md-data-table" md-progress="vm.promise">\r\n\r\n                <thead md-head md-order="vm.query.order" md-on-reorder="vm.tblData">\r\n                    <tr md-row>\r\n                        <th md-column></th>\r\n                        <th md-column md-order-by="RecurringParams.Name">TASK NAME</th>\r\n                        <th md-column md-order-by="RecurringParams.Interval.Mode">INTERVAL</th>\r\n                        <th md-column md-order-by="RecurringParams.StartDate" class="col5">START DATE</th>\r\n                        <th md-column md-order-by="RecurringParams.StartDate" class="col5">LAST RUN DATE</th>\r\n                        <th md-column md-order-by="CustomerName">CUSTOMER</th>\r\n                        <th md-column md-order-by="Amount" class="col4">AMOUNT</th>\r\n                        <th md-column md-order-by="Status">STATUS</th>\r\n                        <th md-column md-order-by="remain_amount">ACTION</th>\r\n\r\n                    </tr>\r\n                </thead>\r\n                <tbody md-body>\r\n\r\n                    <tr md-row ng-repeat="item in vm.tblData | filter: searchCustomer | filter:StatusFilter | myfilter:fromdate:todate | orderBy: vm.query.order | limitTo: vm.query.limit : (vm.query.page -1) * vm.query.limit">\r\n                        <td md-cell></td>\r\n                        <td md-cell>{{item.RecurringParams.Name }}</td>\r\n                        <td md-cell>{{item.RecurringParams.Interval.Mode  | intervalType}}</td>\r\n                        <td md-cell>\r\n                            {{::item.RecurringParams.StartDate | date}}\r\n\r\n                            <br>\r\n                            <div ng-if="item.IsCompleted==false">\r\n                                <span ng-if="item.RecurringParams.End==\'none\'" class="badge processed">Unlimited</span>\r\n                                <span ng-if="item.RecurringParams.End==\'by\'" class="badge processed">End By {{::item.RecurringParams.EndDate  | date}}</span>\r\n                                <span ng-if="item.RecurringParams.End==\'after\'" class="badge processed">End After {{item.RecurringParams.occurrence-item.OccurrencesCount}} Occurrences</span>\r\n                            </div>\r\n                             <span ng-if="item.IsCompleted==true" class="badge approved">Completed</span>\r\n\r\n\r\n                        </td>\r\n\r\n                        <td md-cell>\r\n                            {{item.LastRunDate | date:\'MM/dd/yyyy\'}}\r\n                            <span ng-show="item.LastRunDate==null">N/A</span>\r\n                        </td>\r\n                        <td md-cell>{{::item.CustomerName}}</td>\r\n                        <td md-cell>{{::item.Amount | currency}}</td>\r\n                        <td md-cell class="col3">\r\n\r\n\r\n                            <div ng-show="item.Status"  ng-if="item.IsCompleted==false"><i class="zmdi zmdi-check-circle zmdi-hc-fw" style="color:#2FC65A !important;"></i> <span class="md-subtitle">Running</span></div>\r\n\r\n                            <div ng-hide="item.Status" ng-if="item.IsCompleted==false"><i class="zmdi zmdi-pause-circle" style="color:#FA7044"></i> <span>Pause</span></div>\r\n\r\n                            <div ng-show="item.IsCompleted"><i class="zmdi zmdi-check-circle zmdi-hc-fw" style="color:#2FC65A !important;"></i> <span class="md-subtitle">Completed</span></div>\r\n\r\n\r\n                        </td>\r\n                        <td md-cell class="col3">\r\n                            <md-button class="md-icon-button" ng-click="deleteRecurringConfirm(item.Id)" aria-label="Delete">\r\n                                <md-icon md-font-icon="zmdi zmdi-close"></md-icon>\r\n                            </md-button>\r\n\r\n\r\n                            <md-button\r\n\r\n                            class="md-icon-button toolbar-button animated"\r\n                            ng-click="vm.showRecurringHistory(\'recurring_notification\',item)"\r\n                            aria-label="side navigation"\r\n\r\n                            >\r\n                                <md-icon md-font-icon="zmdi zmdi-menu"></md-icon>\r\n                                <span class="toolbar-button-badge ng-scope md-cyan-white-theme" theme-background="warn" style="background-color: #FA7044; color:white" ng-show="item.ErrorCount > 0">{{item.ErrorCount}}</span>\r\n                            </md-button>\r\n\r\n                        </td>\r\n                    </tr>\r\n\r\n\r\n                </tbody>\r\n                <tr md-row ng-show="vm.tblData.length==0">\r\n                    <td md-cell colspan="10" style="text-align:center !important;text-transform:none;">There is no data to display</td>\r\n                </tr>\r\n            </table>\r\n        </md-table-container>\r\n        <md-table-pagination md-limit="vm.query.limit" md-page="vm.query.page" md-total="{{vm.tblData.length}}" md-page-select></md-table-pagination>\r\n    </tri-widget>\r\n</div>\r\n'),e.put("app/modules/salesreceipt/salesreceipt.tmpl.html",'<!--<tri-loader ng-show="true"></tri-loader>-->\r\n\r\n<div  ng-show="showApiProgress" class="loader padding-100" layout="column" layout-fill="" layout-align="center center">\r\n    <md-progress-linear md-mode="determinate" value="{{apiProgressValue}}"></md-progress-linear>\r\n</div>\r\n<!--createnew.$valid &&-->\r\n<form name="createnew"  ng-submit=" createInvoice($event);">\r\n<md-progress-linear class="md-primary" md-mode="indeterminate" ng-show="showProgress"></md-progress-linear>\r\n<md-content flex layout-padding class="invoice createinvoice" ng-show="showInvoiceContent">\r\n\r\n        <div layout="row" layout-xs="column" layout-align="start start" class="md-padding">\r\n            <div flex>\r\n                  <md-autocomplete\r\n                      md-input-name="searchCustomerField"\r\n                      md-selected-item="vm.selectedCustomer"\r\n                      md-search-text="vm.searchCustomer"\r\n                      md-selected-item-change="vm.selectedCustomerChange(item)"\r\n                      md-items="item in vm.customerSearch(vm.searchCustomer)"\r\n                      md-item-text="item.DisplayName"\r\n\r\n                      md-no-cache="true"\r\n                      md-min-length="0"\r\n                      required\r\n                      md-require-match\r\n                      placeholder="Customer"\r\n                      md-floating-label="Select a customer"\r\n                      >\r\n                     <md-item-template>\r\n                        <span md-highlight-text="vm.searchCustomer" md-highlight-flags="^i">{{item.DisplayName}}</span>\r\n                    </md-item-template>\r\n                     <md-not-found>\r\n                        <a ng-click="addNewCustomer(vm.searchCustomer)" class="md-primary md-raised md-subtitle addnew_link" permission permission-only="\'customer-addnew\'">\r\n                            <md-icon md-font-icon="fa fa-plus" class="md-primary" style="font-size:14px;"></md-icon>&nbsp; Add {{vm.searchCustomer}}</a>\r\n                    </md-not-found>\r\n                     <div ng-messages="createnew.searchCustomerField.$error" >\r\n                        <div ng-message="required">You <b>must</b> have a customer.</div>\r\n                        <div ng-message="md-require-match">Please select an existing customer.</div>\r\n                        <div ng-message="minlength">Your entry is not long enough.</div>\r\n                        <div ng-message="maxlength">Your entry is too long.</div>\r\n                    </div>\r\n                  </md-autocomplete>\r\n                <!--Customer Search-->\r\n\r\n            </div>\r\n            <div flex>\r\n                <md-input-container class="md-block">\r\n                    <label>Email Address</label>\r\n                    <input\r\n                    name="BillEmail"\r\n                    type="email"\r\n                    ng-model="invoice.BillEmail.Address"\r\n\r\n                    >\r\n                     <div ng-messages="createnew.BillEmail.$error" md-auto-hide="false" >\r\n                        <div ng-message when="required">\r\n                            <span translate>Required field</span>\r\n                        </div>\r\n                        <div ng-message when="email">\r\n                            <span translate>Please enter a valid email address</span>\r\n                        </div>\r\n                    </div>\r\n                </md-input-container>\r\n\r\n                <!--Customer Search-->\r\n            </div>\r\n             <div flex>\r\n                &nbsp;\r\n             </div>\r\n            <div flex>\r\n\r\n            </div>\r\n        </div>\r\n        <!--Row 1-->\r\n        <div layout="row" layout-xs="column" layout-align="start start">\r\n            <div flex class="md-padding" style="padding-bottom:0px !important;">\r\n               <div class="address" ng-show="vm.customerInfo.billing.line1!=\'\'">\r\n                    <h4 class="md-subtitle">Billing Address</h4>\r\n                    <p class="md-caption">\r\n                        <b>{{vm.customerInfo.company_name | customInfo:\'\'}}</b><br>\r\n                        {{vm.customerInfo.billing.line1 | customInfo:\',\'}}<br>\r\n                        {{vm.customerInfo.billing.city | customInfo:\',\'}}\r\n                        {{vm.customerInfo.billing.countryCode | customInfo:\',\'}}\r\n                        {{vm.customerInfo.billing.country | customInfo:\',\'}}\r\n                        {{vm.customerInfo.billing.postal_code | customInfo:\'\'}}\r\n                    </p>\r\n                </div>\r\n            </div>\r\n            <div flex >\r\n                 <md-input-container ng-show="preferences.SalesFormsPrefs.CustomTxnNumbers">\r\n                    <label >Sales Receipt no.</label>\r\n                    <input\r\n                    name="DocNumber"\r\n                    type="text"\r\n                    ng-model="invoice.DocNumber"\r\n                    ng-maxlength="1000"\r\n                    ng-required="preferences.SalesFormsPrefs.CustomTxnNumbers"\r\n                    >\r\n                    <div ng-messages="createnew.DocNumber.$error" ng-if="createnew.DocNumber.$touched" md-auto-hide="false">\r\n                        <div ng-message="required">You <b>must</b> have a Invoice number.</div>\r\n                        <p ng-message when="maxlength">Invoice number should not be greater than 1000 characters</p>\r\n                    </div>\r\n                </md-input-container>\r\n                <!--<md-input-container>\r\n                    <label>Terms</label>\r\n                    <md-select placeholder="Term" ng-model="invoice.SalesTermRef.value" md-on-open="loadingProgress()" style="width:100px;" ng-change="setTerm();">\r\n                        <md-option ng-value="term.Id" ng-repeat="term in invoiceTerm">{{term.Name}}</md-option>\r\n                    </md-select>\r\n                </md-input-container>-->\r\n            </div>\r\n            <div flex >\r\n\r\n                <md-input-container ng-hide="showRecurringOptions" style="min-width:220px;border:0px solid;">\r\n                <label >Sales Receipt date</label>\r\n                <md-datepicker\r\n                ng-model="invoice.TxnDate"\r\n                md-placeholder="Invoice Date"\r\n                aria-label="Invoice Date"\r\n                ng-change="setTerm();"\r\n\r\n                ></md-datepicker>\r\n                </md-input-container>\r\n            </div>\r\n        </div>\r\n\r\n        <div layout="row" layout-xs="column" layout-align="center start">\r\n\r\n            <div flex="100" class="md-padding">\r\n\r\n                <tri-widget flex title="" content-layout="column" content-layout-align="center">\r\n\r\n                    <md-table-container id="addnew-invoice-listing">\r\n                        <table md-table class="md-data-table">\r\n                            <thead md-head>\r\n                                <tr md-row>\r\n                                    <th md-column width="10%" style="text-align:center !important;">S #.</th>\r\n                                    <th md-column width="25%">PRODUCT/SERVICES</th>\r\n                                    <th md-column class="col5" width="25%">DESCRIPTION</th>\r\n\t\t\t\t\t\t\t\t\t<th md-column class="" width="10%">QTY</th>\r\n                                    <th md-column class="col4" width="10%">RATE/PRICE</th>\r\n                                    <th md-column class="" width="10%">AMOUNT</th>\r\n                                    <th md-column class="" width="10%">TAX</th>\r\n                                    <th md-column  ng-show="HavingClassObj" >Class</th>\r\n                                    <th md-column class="" width="10%"></th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody md-body ng-model="invoice.items" ng-init="current=1">\r\n                                <tr\r\n                                md-row\r\n                                ui-sortable="sortableOptions"\r\n                                ng-repeat="(key,item) in invoice.Line"\r\n                                ng-if="item.DetailType==\'SalesItemLineDetail\'"\r\n\r\n                                >\r\n                                    <td md-cell ng-init="current=getId()"  align="center" style="text-align:center !important;">\r\n                                        {{$index+1}}\r\n                                        <!--{{vm.sno}}-->\r\n                                        <!--\r\n                                        <i class="fa fa-bars fa-1x tDrag">&nbsp;</i>\r\n                                           -->\r\n                                    </td>\r\n                                    <td md-cell>\r\n\r\n                                        <md-autocomplete\r\n\r\n                                        md-input-name="searchProductField{{$index}}"\r\n                                        md-selected-item="vm.selectedProduct[$index]"\r\n                                        md-search-text="vm.searchProduct[$index]"\r\n                                        md-items="item in vm.itemSearch(vm.searchProduct[$index])"\r\n                                        md-selected-item-change="vm.selectedItemChange(item,key)"\r\n                                        md-item-text="item.Name"\r\n                                        md-no-cache="true"\r\n                                        md-min-length="0"\r\n                                        required\r\n                                        md-require-match\r\n                                        placeholder="Customer"\r\n                                        md-floating-label="Select a product/service"\r\n                                        >\r\n                                            <md-item-template>\r\n                                                <span md-highlight-text="vm.searchProduct">{{item.Name}}</span>\r\n                                            </md-item-template>\r\n                                            <md-not-found>\r\n                                                <a ng-click="addNewItem(vm.searchProduct[key],key)" class="md-primary md-raised md-subtitle addnew_link" permission permission-only="\'item-addnew\'">\r\n                                                    <md-icon md-font-icon="fa fa-plus" class="md-primary" style="font-size:14px;"></md-icon>&nbsp; Add {{vm.searchProduct[key]}}</a>\r\n                                            </md-not-found>\r\n\r\n                                            <div ng-messages="true" >\r\n                                            <div ng-message="required">You <b>must</b> have a item selected.</div>\r\n                                            <div ng-message="md-require-match">Please select an existing Item.</div>\r\n                                            <div ng-message="minlength">Your entry is not long enough.</div>\r\n                                            <div ng-message="maxlength">Your entry is too long.</div>\r\n                                          </div>\r\n                                        </md-autocomplete>\r\n\r\n\r\n                                    </td>\r\n                                    <td md-cell class="col5">\r\n\r\n                                        <md-input-container  class="md-block">\r\n                                            <input\r\n                                            name="Description{{$index}}"\r\n                                            type="text"\r\n                                            placeholder="Description"\r\n                                            ng-model="item.Description"\r\n                                            ng-maxlength="1000"\r\n                                            >\r\n                                            <div ng-messages="createnew[\'Description\'+$index].$error">\r\n                                            <p ng-message when="maxlength">Description cannot be greater than 1000 characters</p>\r\n                                        </div>\r\n                                        </md-input-container>\r\n                                    </td>\r\n\t\t\t\t\t\t\t\t\t<td md-cell class="text-right">\r\n                                        <md-input-container>\r\n                                            <input\r\n                                            name="QTY{{$index}}"\r\n                                            type="number"\r\n                                            placeholder="QTY"\r\n                                            ng-model="item.SalesItemLineDetail.Qty"\r\n                                            ng-change="calculateTotal();"\r\n                                            min="1"\r\n                                            >\r\n                                            <div ng-messages="createnew[\'QTY\'+$index].$error" md-auto-hide="false">\r\n\r\n                                                <p ng-message when="min">Should be greater than 0</p>\r\n                                            </div>\r\n                                        </md-input-container>\r\n\r\n\r\n                                    </td>\r\n                                    <td md-cell class="text-right col4">\r\n                                        <md-input-container>\r\n                                            <input\r\n                                            name="UnitPrice{{$index}}"\r\n                                            type="text"\r\n                                            placeholder="RATE/PRICE"\r\n                                            ng-model="item.SalesItemLineDetail.UnitPrice"\r\n                                            ng-change="calculateTotal();"\r\n                                            number-formatter\r\n                                            ng-pattern="/^[0-9.,]+$/"\r\n                                            min="1"\r\n                                            step="any"\r\n                                            >\r\n                                            <div ng-messages="createnew[\'UnitPrice\'+$index].$error" md-auto-hide="false">\r\n                                            <p ng-message when="number">Provide a valid rate / price</p>\r\n                                            <p ng-message when="min">Should be greater than 0</p>\r\n                                            <p ng-message when="pattern">Invalid input</p>\r\n                                        </div>\r\n                                        </md-input-container>\r\n\r\n                                    </td>\r\n\r\n                                    <td md-cell class="text-right">\r\n                                        <md-input-container>\r\n                                            {{item.Amount=item.SalesItemLineDetail.UnitPrice*item.SalesItemLineDetail.Qty | currency}}\r\n                                        </md-input-container>\r\n                                    </td>\r\n                                    <td md-cell class="text-right" ng-mouseenter="showTaxable=true;showCheck=false" ng-mouseleave="showTaxable=false;showCheck=true">\r\n\r\n                                        <md-checkbox\r\n\r\n                                        ng-model="item.SalesItemLineDetail.TaxCodeRef.value"\r\n\r\n                                        ng-true-value="\'TAX\'"\r\n                                        ng-false-value="\'NON\'"\r\n                                        ng-change="calculateTotal();"\r\n                                        >\r\n                                        </md-checkbox>\r\n\r\n                                        <!-- ng-show="showTaxable" <i class="fa fa-check"\r\n                                        aria-hidden="true"\r\n                                        ng-show="item.SalesItemLineDetail.TaxCodeRef.value==\'TAX\' && showCheck"\r\n\r\n\r\n                                        ></i>-->\r\n                                    </td>\r\n                                    <td md-cell class="text-right"  ng-show="HavingClassObj">\r\n\r\n\r\n\r\n                                        <md-input-container >\r\n\r\n                                            <md-select ng-model="item.SalesItemLineDetail.ClassRef.value" ng-model-options="{trackBy: \'$value.Id\'}"\r\n                                            style="\r\n                                          margin-top: -21px;\r\n                                          font-size: 16px;\r\n                                          min-width: 0;\r\n                                          min-height: 24px;\r\n                                          /* border-bottom: 1px !important; */\r\n                                          border-bottom-color: gray !important;border-bottom: 1 !important;"\r\n                                         >\r\n                                              <md-option ng-repeat="Class in ClassesItems" value="{{Class.Id}}"\r\n                                              ng-click="ClassDataGet(Class,$index)">{{Class.Name}}\r\n                                            <input type="hidden" ng-model="item.SalesItemLineDetail.ClassRef.Value" ng-value="{{Class.Id}}"/>\r\n                                              </md-option>\r\n                                            </md-select>\r\n                                          </md-input-container>\r\n\r\n                                  </td>\r\n\r\n\r\n                                    <td md-cell>\r\n\r\n                                        <md-button class="md-mini md-fab md-small" ng-click="removeItem(item,$index)" aria-label="Remove Item">\r\n\r\n                                            <md-icon md-font-icon="fa fa-trash-o"></md-icon>\r\n                                        </md-button>\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                            <tbody md-body>\r\n                                <!-- SUB TOTAL -->\r\n                                <tr\r\n                                md-row\r\n                                ng-repeat="(key,item) in invoice.Line"\r\n                                ng-if="item.DetailType==\'SubTotalLineDetail\' && item.Amount > 0"\r\n                                >\r\n                                    <td md-cell colspan="5" style="text-align:right !important">\r\n\r\n                                        <h4 class="md-body-2">Subtotal</h4>\r\n                                    </td>\r\n                                    <td md-cell>\r\n                                        <h4 class="md-body-2">{{item.Amount | currency}}</h4>\r\n                                    </td>\r\n                                    <td md-cell colspan="2"></td>\r\n                                </tr>\r\n                                <!-- TAX -->\r\n                                <tr md-row ng-show="preferences.TaxPrefs.UsingSalesTax && invoice.TotalAmt > 0">\r\n                                    <td md-cell colspan="4"></td>\r\n                                    <td md-cell style="text-align:right !important">\r\n\r\n                                        <md-select\r\n                                        placeholder="Select a sales tax rate"\r\n                                        ng-model="invoice.TxnTaxDetail.TaxLine[0].TaxLineDetail.TaxRateRef.value"\r\n\r\n                                        md-on-open="loadingProgress()"\r\n                                        ng-change="calculateTotal()"\r\n                                        align="right"\r\n\r\n                                        >\r\n                                        <md-option ng-value="tax.Id" ng-repeat="tax in taxRateDetail">{{tax.Name}} ({{tax.RateValue | number : 2}} %)</md-option>\r\n                                        </md-select>\r\n\r\n                                    </td>\r\n                                    <td md-cell>\r\n                                        <h4 class="md-body-2">{{invoice.TxnTaxDetail.TotalTax | currency}}</h4>\r\n                                    </td>\r\n                                    <td md-cell></td>\r\n                                </tr>\r\n                                <!-- DISCOUNT -->\r\n                                <tr\r\n                                md-row\r\n                                ng-repeat="(key,item) in invoice.Line"\r\n                                ng-if="item.DetailType==\'DiscountLineDetail\'"\r\n                                ng-show="preferences.SalesFormsPrefs.AllowDiscount && invoice.TotalAmt > 0"\r\n                                >\r\n\r\n                                    <td md-cell colspan="4" style="text-align:right !important"></td>\r\n                                    <td md-cell style="text-align:right !important">\r\n                                        <md-select\r\n                                            placeholder="Discount"\r\n                                            ng-model="item.DiscountLineDetail.PercentBased"\r\n                                            style="width:100px;"\r\n                                            ng-change="calculateTotal()"\r\n                                            >\r\n                                            <md-option\r\n                                            ng-value="discountType.value"\r\n                                            ng-repeat="discountType in discountTypes"\r\n                                            >{{discountType.text}}</md-option>\r\n                                        </md-select>\r\n                                    </td>\r\n                                    <td md-cell>\r\n\r\n                                        <md-input-container ng-if="item.DiscountLineDetail.PercentBased==true">\r\n                                            <input\r\n\r\n                                            type="number"\r\n                                            placeholder="Discount"\r\n                                            ng-model="item.DiscountLineDetail.DiscountPercent"\r\n                                            ng-change="calculateTotal();"\r\n                                            min="0"\r\n                                            >\r\n                                        </md-input-container>\r\n                                         <md-input-container ng-if="item.DiscountLineDetail.PercentBased==false">\r\n                                            <input\r\n                                            type="number"\r\n                                            placeholder="Discount"\r\n                                            ng-model="item.Amount"\r\n                                            ng-change="calculateTotal();"\r\n                                            min="0"\r\n                                            >\r\n                                        </md-input-container>\r\n\r\n                                    </td>\r\n                                    <td md-cell>\r\n                                        <h4 class="md-body-2">{{item.Amount | currency}}</h4>\r\n                                    </td>\r\n                                    <td md-cell></td>\r\n                                </tr>\r\n                                <!-- TOTAL -->\r\n                                <tr md-row ng-show="invoice.TotalAmt > 0">\r\n                                    <td md-cell colspan="5" style="text-align:right !important">\r\n                                        <h4 class="md-body-2">Total</h4>\r\n                                    </td>\r\n                                    <td md-cell>\r\n                                        <h4 class="md-body-2">{{invoice.TotalAmt | currency}}</h4>\r\n                                    </td>\r\n                                    <td md-cell colspan="2"></td>\r\n                                </tr>\r\n\r\n                                <!-- Add Lines -->\r\n                                <tr md-row>\r\n                                    <td md-cell colspan="7" class="add-new-item">\r\n                                        <md-button class="md-primary md-raised md-add-new" ng-click="addItem()">\r\n                                            <md-icon md-font-icon="fa fa-plus" style="font-size:14px;"></md-icon>&nbsp;Add Lines\r\n                                        </md-button>\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </md-table-container>\r\n                </tri-widget>\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div layout="row">\r\n            <div flex="100" class="md-padding">\r\n                <md-input-container class="md-block">\r\n                    <label>Message displayed on Sales Receipt</label>\r\n\r\n                    <input\r\n                    name="CustomerMemo"\r\n                    md-maxlength="150"\r\n                    md-no-asterisk\r\n                    name="description"\r\n                    ng-model="invoice.CustomerMemo.value"\r\n                    >\r\n                    <div ng-messages="createnew.CustomerMemo.$error">\r\n                      <div ng-message="md-maxlength">The Message must be less than 60 characters long.</div>\r\n                    </div>\r\n\r\n                </md-input-container>\r\n            </div>\r\n        </div>\r\n        <div style="width:90%;border:0px solid; position:fixed;bottom:5px;">\r\n            <div layout="row" layout-xs="column" layout-align="end end" >\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n</md-content>\r\n<div style="border:1px solid #000; bottom:0px; width:95% !important; height:50px; position:fixed;" palette-background="blue-grey:500">\r\n <div layout="row">\r\n        <div flex="33">\r\n             <md-button class="md-warn md-hue-2 md-raised md-add-new" ng-click="cancelInvoice()" >\r\n                <md-icon md-font-icon="fa fa-times " style="font-size:14px;"></md-icon>&nbsp;Cancel\r\n            </md-button>\r\n        </div>\r\n        <div flex="33">&nbsp;</div>\r\n        <div flex="33" align="right">\r\n                <md-button\r\n                    class="md-add-new"\r\n                    type="submit"\r\n                    ng-class="{ \'md-primary md-raised\': createnew.$valid}"\r\n\r\n                    >\r\n                    <md-icon md-font-icon="fa fa-paper-plane-o" style="font-size:14px;"></md-icon>&nbsp;{{createInvoiceBtnTitle}}\r\n                </md-button>\r\n        </div>\r\n </dvv>\r\n</div>\r\n</form>\r\n'),
e.put("app/modules/salesreceipt/swiper.panel.tmpl.html",'<div role="dialog" aria-label="Eat me!" layout="column" layout-align="center center">\r\n  \r\n  <div class="demo-dialog-content">\r\n      <h3 class="md-padding">{{swipeText}}</h3>\r\n        <div layout="row" layout-align="end end"> \r\n            <div flex="100" style="text-align:center !important;">\r\n              <md-input-container class="md-block" md-no-float style="border:1px solid #ccc; position:absolute; top:-500px; width:100%; height:50px;">\r\n                  <input type="text" id="swipeInfo" name="swipeInfo" ng-model="swipeInfo" class="md-padding" placeholder="Swipe Data" md-autofocus ng-keyup="handle_swipe();">\r\n              </md-input-container>\r\n                  <img src="assets/images/icons/swiper-static.png" width="200" ng-show="showStatic">\r\n                  <img src="assets/images/icons/swiper-animated.gif" width="200" ng-show="showAnimation">\r\n            </div>\r\n            \r\n        </div>\r\n        <div layout="row" layout-align="center center"> \r\n          <div flex="100" align="center">\r\n              <span class="md-caption">press Ecs to manually enter card no .</span>\r\n          </div>\r\n        </div>\r\n\r\n  </div>\r\n  \r\n</div>'),e.put("app/modules/settings/add_template.tmpl.html",'<style>\r\n    md-dialog-content::-webkit-scrollbar {\r\n        width: 8px;\r\n        background: rgba(0, 0, 0, 0.1);\r\n        -webkit-transition: all .2s;\r\n        transition: all .2s;\r\n    }\r\n\r\n    md-dialog-content::-webkit-scrollbar-thumb {\r\n        border-radius: 0px;\r\n        background: rgba(0, 0, 0, 0.15);\r\n        border-radius: 4px;\r\n        -webkit-transition: all .2s;\r\n        transition: all .2s;\r\n    }\r\n\tmd-input-container.md-block {\r\n    \twidth: 86%;\r\n    }\r\n\r\n\r\n    #header\r\n    {\r\n\r\n        background: rgb(0, 188, 212);\r\n    }\r\n    md-checkbox.md-light-green-theme.md-checked .md-icon {\r\n    background-color: rgb(0, 188, 212) !important;\r\n}\r\n#create1{\r\n    background-color: rgb(0, 188, 212) !important;\r\n    color:pink !important;\r\n}\r\n.md-button.md-light-green-theme.md-raised[disabled], .md-button.md-light-green-theme.md-fab[disabled] {\r\n\r\n    background-color: rgb(0, 188, 212) !important;\r\n    color: #b5b5b5 !important;\r\n}\r\n.md-button.md-light-green-theme.md-primary.md-raised[disabled]:hover, .md-button.md-light-green-theme.md-primary.md-fab:hover {\r\n    cursor: not-allowed;\r\n    color:rgb(0, 188, 212);\r\n}\r\n\r\n    /* md-button #create\r\n    {\r\n        background-color: rgb(243, 26, 99) !important;\r\n    } */\r\n\r\n\r\n\r\n</style>\r\n<md-dialog class="order-dialog mobile-fullwidth-dialog" flex="45" flex-xs="100">\r\n    <md-toolbar>\r\n        <div class="md-toolbar-tools" id="header">\r\n            <h2 flex>\r\n                <span translate>Email Template</span>\r\n            </h2>\r\n\r\n\r\n            <!--<md-button class="md-icon-button" ng-click="vm.printClick()" aria-label="print">\r\n                <md-icon md-font-icon="zmdi zmdi-print"></md-icon>\r\n            </md-button>-->\r\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\r\n                <md-icon md-font-icon="zmdi zmdi-close"></md-icon>\r\n            </md-button>\r\n        </div>\r\n\r\n    </md-toolbar>\r\n\r\n    <div>\r\n        <span flex ng-show="showProgress"><md-progress-linear md-mode="indeterminate" style="width:100%;" ></md-progress-linear></span>\r\n    </div>\r\n\r\n\t<form name="TemplateForm" >\r\n    <md-dialog-content class="md-dialog-content">\r\n\r\n\r\n\r\n\t\t<div>\r\n\r\n\r\n\r\n\t\t<div layout="column" layout-align="center start">\r\n\t\t\t<md-input-container class="md-block">\r\n\t\t\t\t\t\t<label for="sender_name">Name</label>\r\n                        <input id="subject" label="name" name="name" type="text"\r\n                        ng-model="email_temp.name"\r\n                        style="width:100%;" required/>\r\n\t\t\t\t\t\t<div ng-messages="email_temp.name.$error" md-auto-hide="false" ng-show="setting.InvoiceContacts.template_email.name.$touched">\r\n                        <div ng-message="required">\r\n                            Please enter your template name.\r\n                        </div>\r\n\r\n                    </div>\r\n\t\t\t</md-input-container>\r\n\t\t</div>\r\n\r\n\r\n\t\t<div layout="column" layout-align="center start">\r\n\t\t\t<md-input-container class="md-block">\r\n\t\t\t\t\t\t<label for="sender_name">Subject</label>\r\n\t\t\t\t\t\t<input id="subject" label="subject" name="subject" type="text" ng-model="email_temp.subject" style="width:100%;" required/>\r\n\t\t\t\t\t\t<div ng-messages="email_temp.$error" md-auto-hide="false" ng-show="setting.InvoiceContacts.template_email.subject.$touched">\r\n                        <div ng-message="required">\r\n                            Please enter your  subject.\r\n                        </div>\r\n\r\n                    </div>\r\n\t\t\t</md-input-container>\r\n\t\t</div>\r\n\t\t<div>\r\n\t\t\t <div layout="column" layout-align="center start">\r\n\t\t\t\t<label for="email_body"> Body </label>\r\n\t\t\t\t<br>\r\n\t\t\t\t<trix-editor angular-trix ng-model="email_temp.body" style="min-width:525px;"></trix-editor>\r\n\t\t\t </div>\r\n\t\t\t <br />\r\n\t\t  \t<label>Supported tags</label>\r\n\t\t\t<md-chips>\r\n\t\t\t\t <md-chip>[customer_name]</md-chip>\r\n\t\t\t\t <md-chip>[invoice_number]</md-chip>\r\n\t\t\t\t <md-chip>[amount]</md-chip>\r\n\t\t\t\t <md-chip>[full_name]</md-chip>\r\n\t\t\t\t <md-chip>[company_name]</md-chip>\r\n\t\t\t\t <md-chip>[company_phone]</md-chip>\r\n\t\t\t\t <md-chip>[company_weburl]</md-chip>\r\n\t\t\t\t <md-chip>[date]</md-chip>\r\n\t\t\t</md-chips>\r\n\t\t</div>\r\n        <!--<md-divider class="margin-bottom-40 margin-top-40"></md-divider>-->\r\n\t\t<br />\r\n\r\n\t\t</div>\r\n\r\n\r\n\r\n\r\n    </md-dialog-content>\r\n\r\n    <md-dialog-actions layout="row">\r\n\r\n        <!-- <span flex ng-show="showProgress"><md-progress-linear md-mode="indeterminate" style="width:90%;" ></md-progress-linear></span> -->\r\n\r\n        <md-button style="background-color:rgb(0, 188, 212)!important;color:white;" ng-click="SaveTemplateSetting()" ng-disabled="TemplateForm.$invalid" >Create</md-button>\r\n    </md-dialog-actions>\r\n</form>\r\n</md-dialog>\r\n<!-- style="background-color:rgb(243, 26, 99) !important;"\r\n\r\n\r\n class="md-primary md-raised "\r\n-->\r\n'),e.put("app/modules/settings/invoice_preview.tmpl.html",'<md-dialog aria-label="Invoice Template Preview"  ng-cloak style="max-height:590px; min-width:360px;">\r\n     <md-dialog-content >\r\n      <div class="md-dialog-content" style="padding:0px !important; margin:0px !important;overflow:hidden; height:590px;">\r\n          <img src="{{invoiceTemplateUrl}}" style="border:0px solid #000;">\r\n      </div>\r\n    </md-dialog-content>\r\n\r\n</md-dialog>\r\n'),e.put("app/modules/settings/settings.tmpl.html",'<style class="ng-scope">\r\n    md-card.default {\r\n        background: url(\'assets/images/elements/ribbon.png\') no-repeat top right;\r\n    }\r\n\r\n</style>\r\n\r\n<md-content style="height:100%">\r\n\r\n    <md-tabs md-border-bottom style="min-height:550px;">\r\n        <md-tab label="General">\r\n            <md-content class="md-padding">\r\n                <form name="invoicecontact" ng-submit="vm.saveInvoiceContactSettings()">\r\n                    <md-content class="md-padding">\r\n\r\n                        <md-card style="padding:25px">\r\n                            <span class="md-caption">BCC Email: </span>\r\n\r\n                            <md-chips ng-model="setting.InvoiceContacts.bcc_email" readonly="false" md-removable="true"\r\n                                md-enable-chip-edit="false" md-max-chips="4" name="bcc_email" md-add-on-blur="true"\r\n                                md-on-add="validateChip($chip,\'bcc\')" ng-blur="validateChip($chip,\'bcc\')" placeholder="Add upto 3 CC emails"\r\n                                secondary-placeholder="+Email">\r\n                            </md-chips>\r\n\r\n\r\n                            <div class="errors" ng-messages="invoicecontact.bcc_email.$error">\r\n                                <div ng-message="md-max-chips">maximum 3 email address allowed</div>\r\n                            </div>\r\n\r\n                            <span class="md-caption">CC Email: </span>\r\n                            <md-chips ng-model="setting.InvoiceContacts.cc_email" readonly="false" md-removable="true"\r\n                                md-enable-chip-edit="false" md-max-chips="4" name="cc_email" md-on-add="validateChip($chip,\'cc\')"\r\n                                placeholder="Add upto 3 CC emails" secondary-placeholder="+Email" md-add-on-blur="true">\r\n                            </md-chips>\r\n                            <div class="errors" ng-messages="invoicecontact.cc_email.$error">\r\n                                <div ng-message="md-max-chips">maximum 3 email address allowed</div>\r\n                            </div>\r\n\r\n                            <h2 class="md-title">&nbsp;</h2>\r\n                            <md-input-container class="md-block">\r\n                                <label for="sender_name">Sender Name</label>\r\n                                <input id="sender_name" label="sender_name" name="sender_name" type="text" ng-model="setting.InvoiceContacts.sender_name"\r\n                                    required />\r\n                                <div ng-messages="invoicecontact.sender_name.$error" md-auto-hide="false" ng-show="invoicecontact.sender_name.$touched">\r\n                                    <div ng-message="required">\r\n                                        Please enter your sender name.\r\n                                    </div>\r\n                                </div>\r\n                            </md-input-container>\r\n                            <md-input-container class="md-block">\r\n                                <label for="sender_email">Sender Email Address</label>\r\n                                <input id="sender_email" label="sender_email" name="sender_email" type="email" ng-model="setting.InvoiceContacts.sender_email"\r\n                                    required />\r\n                                <div ng-messages="invoicecontact.sender_email.$error" md-auto-hide="false" ng-show="invoicecontact.sender_email.$touched">\r\n                                    <div ng-message="required">\r\n                                        Please enter your sender email address.\r\n                                    </div>\r\n                                    <div ng-message="email">\r\n                                        Please enter a valid email address.\r\n                                    </div>\r\n                                </div>\r\n                            </md-input-container>\r\n                            <div layout="row">\r\n                                <md-input-container flex="30">\r\n                                    <label>Template</label>\r\n                                    <md-select ng-model="selectedtemplate" name="type" ng-click="updateEmailTemplateList()">\r\n                                        <md-option ng-selected="template.isSelected == true" ng-repeat="template in setting.InvoiceContacts.template_email track by $index"\r\n                                            ng-value="{{template}}">{{template.name}}</md-option>\r\n                                        <!-- <md-option ng-click="AddNewTemplate($event);" >Add New Template</md-option> -->\r\n                                    </md-select>\r\n                                </md-input-container>\r\n                                <!-- <md-button style="background-color:rgb(0, 188, 212)!important;color:white;">Add New</md-button> -->\r\n                                <!-- <md-button ng-click="AddNewTemplate($event);" style="height: 0px;"  class="md-primary md-raised"><md-icon md-font-icon="add"></md-icon>\r\n</md-button> -->\r\n\r\n                                <md-button aria-label="search" class="md-primary md-raised md-small md-fab" ng-click="AddNewTemplate($event);"\r\n                                    style="height: 30px; width: 30px; padding-top: 3px; padding-left: 5px; margin-top: 20px; background-color:#ff4081;">\r\n                                    <md-icon md-font-icon="fa fa-plus" style="font-size:12px;"></md-icon>>\r\n                                    <md-tooltip>Add New Template</md-tooltip>\r\n                                </md-button>\r\n\r\n\r\n                            </div>\r\n                            <md-input-container class="md-block">\r\n                                <label for="sender_name">Subject</label>\r\n                                <input id="subject" label="subject" name="subject" type="text" ng-model="selectedtemplate.subject" />\r\n                            </md-input-container>\r\n\r\n                            <div ng-hide="false">\r\n\r\n                                <div layout="column" layout-align="center start">\r\n                                    <label for="email_body" class="md-caption">Body </label>\r\n                                    <br>\r\n                                    <trix-editor angular-trix ng-model="selectedtemplate.body" style="min-width:525px;"></trix-editor>\r\n                                </div>\r\n                                <br>\r\n                                <br>\r\n                                <label>Supported tags</label>\r\n                                <md-chips>\r\n                                    <md-chip>[customer_name]</md-chip>\r\n                                    <md-chip>[invoice_number]</md-chip>\r\n                                    <md-chip>[amount]</md-chip>\r\n                                    <md-chip>[full_name]</md-chip>\r\n                                    <md-chip>[first_name]</md-chip>\r\n                                    <md-chip>[last_name]</md-chip>\r\n                                    <md-chip>[company_name]</md-chip>\r\n                                    <md-chip>[company_phone]</md-chip>\r\n                                    <md-chip>[company_weburl]</md-chip>\r\n                                    <md-chip>[date]</md-chip>\r\n                                </md-chips>\r\n                            </div>\r\n                            <div layout="column" layout-align="center start">\r\n                                <div flex="66">\r\n                                    <md-checkbox ng-model="selectedtemplate.isSelected" ng-selected="selectedTemplate.isSelected == true"\r\n                                        aria-label="Set As Default">\r\n                                        Set As Default\r\n                                    </md-checkbox>\r\n                                </div>\r\n                            </div>\r\n                            <div layout="column" layout-align="center start">\r\n                                &nbsp;\r\n                            </div>\r\n                            <div layout="column" layout-align="center start">\r\n                                &nbsp;\r\n                            </div>\r\n\r\n                        </md-card>\r\n\r\n                        <md-card style="padding:25px">\r\n                            <h3 class="md-title"> Other Options</h3>\r\n                            <div layout="column" layout-align="center start">\r\n                                <div flex="66">\r\n                                    <md-checkbox ng-model="setting.ShowConfirmationDialog" aria-label="Multiple Email Address">\r\n                                        Show confirmation before sending invoice.\r\n                                    </md-checkbox>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div layout="column" layout-align="center start">\r\n                                <div flex="66">\r\n                                    <md-checkbox ng-model="setting.EmailReceiptDialog" aria-label="Multiple Email Address">\r\n                                        Send payment receipt after trasnsaction.\r\n                                    </md-checkbox>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div layout="column" layout-align="center start">\r\n                                <div flex="66">\r\n                                    <md-checkbox ng-model="setting.InvoiceReceiptDialog" aria-label="Multiple Email Address">\r\n                                        Show receipt after transaction.\r\n                                    </md-checkbox>\r\n                                </div>\r\n                            </div>\r\n                            <div class="md-padding" style="border:0px dotted; padding:2px;">\r\n                                <!--<h3>Feedback</h3>-->\r\n                                <div layout="row" layout-align="start start">\r\n                                    <div flex="100">\r\n                                        <md-checkbox ng-model="setting.Feedback.isenable" aria-label="Feedback">\r\n                                            Enable Feedback on customer portal.\r\n                                        </md-checkbox>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <!-- PDF template -->\r\n                                <div layout="row" layout-align="start start">\r\n                                    <div flex="100">\r\n                                        <md-checkbox ng-model="setting.IsDefaultTemplate" aria-label="Feedback">\r\n                                            Enable invoice default template.\r\n                                        </md-checkbox>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div layout="row" layout-align="start start" class="2md-padding" style="margin-left:40px;">\r\n                                    <md-input-container>\r\n                                        <label>Type</label>\r\n                                        <md-select ng-model="setting.Feedback.type" placeholder="Type" class="md-no-underline">\r\n                                            <md-option ng-repeat="option in socialOption" id="{{option.value}}" value="{{option.value}}">\r\n                                                <img src="{{option.image}}" width="32" style="vertical-align:middle" />\r\n                                                &nbsp;{{option.name}}</md-option>\r\n                                        </md-select>\r\n                                    </md-input-container>\r\n                                    <md-input-container flex>\r\n                                        <label>Url</label>\r\n                                        <input name="url" ng-pattern="/^https?://.+$/" type="text" ng-model="setting.Feedback.url"\r\n                                            ng-maxlength="200">\r\n                                        <div ng-messages="invoicecontact.url.$error " md-auto-hide="false">\r\n                                            <p ng-message when="pattern">Invalid web address </p>\r\n                                            <p ng-message when="maxlength">Webaddress should not be greater then 200\r\n                                                characters</p>\r\n                                        </div>\r\n\r\n                                    </md-input-container>\r\n\r\n                                </div>\r\n                            </div>\r\n                            <div layout="column" layout-align="center start">\r\n                                &nbsp;\r\n                            </div>\r\n\r\n                            <div layout="column" layout-align="center start" permission permission-only="\'settings-depositToAccount\'">\r\n                                <h3>Deposit To Account</h3>\r\n                                <!--{{setting.account_id}}-->\r\n                                <md-input-container class="md-block">\r\n                                    <!--<label>DepositTo Account</label>-->\r\n                                    <md-select name="Account" ng-model="setting.DepositAccountId" style="min-width: 200px;"\r\n                                        placeholder="Please select Deposit To Account">\r\n\r\n                                        <md-option ng-value="account_name.Id" ng-repeat="account_name in account">{{\r\n                                            account_name.Name}}&nbsp;&nbsp;&nbsp;{{ account_name.AccountType}}</md-option>\r\n                                    </md-select>\r\n                                </md-input-container>\r\n                            </div>\r\n                            <div layout="column" layout-align="center start">\r\n                                <div flex>\r\n                                    <md-button type="submit" ng-disabled="invoicecontact.$invalid" class="md-primary md-raised">Save</md-button>\r\n                                </div>\r\n                            </div>\r\n                        </md-card>\r\n                    </md-content>\r\n                </form>\r\n            </md-content>\r\n        </md-tab>\r\n        <md-tab label="Templates" style="border:1px solid;">\r\n            <md-content class="md-padding">\r\n\r\n                <div layout="row" layout-wrap layout-align="start center">\r\n                    <div flex-xs="70" flex-sm="33" flex-gt-sm="25" flex="25" flex-lg="25" flex-md="25" ng-repeat="invoiceTemplate in vm.invoiceTemplates">\r\n                        <md-card ng-class="{{invoiceTemplate.id==setting.InvoiceTemplateId ? \'default\' : \'\'}}"\r\n                            palette-background="white:500">\r\n                            <md-card-header>\r\n                                <md-card-avatar>\r\n\r\n                                    <img src="assets/images/logo.png" />\r\n                                </md-card-avatar>\r\n                                <md-card-header-text>\r\n                                    <span class="md-title">{{invoiceTemplate.name}}</span>\r\n                                    <span class="md-subhead">Service</span>\r\n                                </md-card-header-text>\r\n                            </md-card-header>\r\n                            <div style="border:0px solid; max-height:200px; overflow:hidden">\r\n                                <img ng-click="showTemplatePreview($event,invoiceTemplate.image_url)" ng-src="{{invoiceTemplate.image_url}}"\r\n                                    style="cursor:pointer" class="2md-card-image" alt="{{invoiceTemplate.name}}" align="center">\r\n                            </div>\r\n                            <md-card-title>\r\n                                <md-card-title-text>\r\n                                </md-card-title-text>\r\n                            </md-card-title>\r\n                            <md-card-content>\r\n                            </md-card-content>\r\n                            <md-card-actions layout="row" layout-align="end center">\r\n                                <md-fab-speed-dial md-direction="up" md-open="vm.fabStatus" ng-class="vm.fabAnimation"\r\n                                    ng-show="invoiceTemplate.id==setting.InvoiceTemplateId">\r\n                                    <md-fab-trigger>\r\n\r\n                                        <md-button aria-label="share this post" class="md-fab md-mini" id="templateButton"\r\n                                            palette-background="{{setting.InvoiceTemplateColor}}:500" ng-style="myClassObj.style">\r\n                                            <md-icon md-font-icon="fa fa-paint-brush" style="color:#fff;"></md-icon>\r\n                                        </md-button>\r\n                                    </md-fab-trigger>\r\n                                    <md-fab-actions style="position:absolute;bottom:50px;right:-71px;border:0px solid;width:214px;">\r\n                                        <md-button aria-label="Button" class="md-fab md-raised md-mini" ng-hide="true">\r\n                                        </md-button>\r\n                                        <div class="md-whiteframe-z1">\r\n                                            <md-button aria-label="{{name}}" class="md-fab md-raised md-mini md-padding"\r\n                                                ng-repeat="(name,palette) in vm.palettes" palette-background="{{name}}:500"\r\n                                                ng-click="setTemplateTheme($event,name,palette,invoiceTemplate.id)"\r\n                                                style="height:10px; margin:5px;">\r\n                                            </md-button>\r\n                                        </div>\r\n                                    </md-fab-actions>\r\n                                </md-fab-speed-dial>\r\n\r\n                                <md-button class="md-icon-button" aria-label="Set Default" ng-click="setTemplateDefault($event,invoiceTemplate.id)"\r\n                                    ng-disabled="invoiceTemplate.id==setting.InvoiceTemplateId">\r\n                                    <md-icon md-font-icon="fa fa-star" style="color: {{invoiceTemplate.id==setting.InvoiceTemplateId ? \'green\' : \'gray\'}};"></md-icon>\r\n                                    <md-tooltip>Set Default Template</md-tooltip>\r\n                                </md-button>\r\n                            </md-card-actions>\r\n                        </md-card>\r\n                    </div>\r\n                </div>\r\n\r\n            </md-content>\r\n        </md-tab>\r\n    </md-tabs>\r\n</md-content>\r\n'),e.put("app/modules/statement/sendConfirmationDialog.html",'<md-dialog class="mobile-fullwidth-dialog">\r\n<md-progress-linear class="md-primary" md-mode="indeterminate" ng-show="showProgress"></md-progress-linear>\r\n    <form name="emailForm" novalidate ng-submit="submit()">\r\n        <md-toolbar class="toolbar-default" md-theme="default">\r\n\r\n            <div class="md-toolbar-tools">\r\n                <h2>\r\n                    <span>{{settings.title}}</span>\r\n                </h2>\r\n                <span flex></span>\r\n                <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\r\n                    <md-icon md-font-icon="zmdi zmdi-close"></md-icon>\r\n                </md-button>\r\n            </div>\r\n        </md-toolbar>\r\n\r\n        <md-divider></md-divider>\r\n\r\n        <md-dialog-content class="email-dialog md-padding">\r\n\r\n            <div layout="row">\r\n                <div layout="column" flex>\r\n                    <span class="md-caption">To: </span>\r\n                    <md-chips ng-model="settings.InvoiceContacts.to_email" readonly="false" md-removable="true" md-enable-chip-edit="true" name="to_email" md-on-add="validateChip($chip,\'to\')" md-on-remove="validateChip($chip,\'to\')" placeholder="{{\'TO\' | triTranslate}}" secondary-placeholder="">\r\n                    </md-chips>\r\n\r\n                    <div class="email-dialog-ccs ng-hide" layout="column" ng-show="showCCS">\r\n                        <span class="md-caption">CC: </span>\r\n                        <md-chips ng-model="settings.InvoiceContacts.cc_email" readonly="false" md-removable="true" md-enable-chip-edit="false" md-max-chips="3" name="bcc_email" md-on-add="validateChip($chip,\'cc\')" placeholder="{{\'CC\' | triTranslate}}" secondary-placeholder="">\r\n                        </md-chips>\r\n                        <span class="md-caption">BCC: </span>\r\n                        <md-chips ng-model="settings.InvoiceContacts.bcc_email" readonly="false" md-removable="true" md-enable-chip-edit="false" md-max-chips="3" name="bcc_email" md-on-add="validateChip($chip,\'bcc\')" placeholder="{{\'BCC\' | triTranslate}}" secondary-placeholder="">\r\n                        </md-chips>\r\n                    </div>\r\n                    <span class="md-caption">From: </span>\r\n                    <md-chips secondary-placeholder="{{\'From\' | triTranslate}}">\r\n                        <md-chip secondary-placeholder="{{\'From\' | triTranslate}}">{{settings.InvoiceContacts.sender_name}}\r\n                            <{{settings.InvoiceContacts.sender_email}}>\r\n                        </md-chip>\r\n\r\n                    </md-chips>\r\n                    <!-- <md-input-container flex="30" style="width:50%">\r\n                            <label>Template</label>\r\n                            <md-select ng-model="selectedTemplate"  name="type" >\r\n                            <md-option ng-click="SelectedTemplateValue(template)" ng-repeat="template in settings.InvoiceContacts.template_email track by $index"\r\n                            ng-value="{{template}}" ng-selected="template.isSelected == true">{{template.name}}</md-option>\r\n\r\n                            </md-select>\r\n                          </md-input-container> -->\r\n\r\n                </div>\r\n                <md-button class="md-icon-button md-raised" ng-click="toggleCCS($event)" aria-label="toggle ccs">\r\n                    <md-icon md-font-icon ng-class="showCCSIcon"></md-icon>\r\n                </md-button>\r\n            </div>\r\n        </md-dialog-content>\r\n        <md-dialog-actions layout="row">\r\n            <span flex></span>\r\n            <md-button class="md-primary md-raised" type=\'submit\' ng-disabled="disabledSubmitButton" aria-label="send" translate="Send" >Send</md-button>\r\n        </md-dialog-actions>\r\n    </form>\r\n</md-dialog>\r\n'),e.put("app/modules/statement/statement.detail.tmpl.html",'\r\n\r\n<div  ng-show="showProgress" class="loader padding-100" layout="column" layout-fill="" layout-align="center center">\r\n    <md-progress-linear md-mode="indeterminate"></md-progress-linear>\r\n</div>\r\n\r\n<div class="invoice_container">\r\n    <div flex layout="row" id="invoice_detail_layout">\r\n\r\n        <md-content flex="100" flex-gt-xs="100" flex-gt-lg="40" layout-padding>\r\n\r\n           <div flex layout="row" layout-align="end end" ng-show="showProgress==false">\r\n\r\n                <md-button aria-label="Send Email" class="md-fab md-primary md-mini" ng-click="sendEmailStatement();" permission="">\r\n                    <md-icon md-font-icon="fa fa-paper-plane-o"></md-icon>\r\n                    <md-tooltip>Send Statement</md-tooltip>\r\n                </md-button>\r\n                <md-button aria-label="Invoice Template" class="md-fab md-raised md-mini md-primary" ng-click="download();" permission="">\r\n                     <md-icon md-font-icon="{{downloadProgress==true ? \'zmdi zmdi-refresh zmdi-hc-spin\' : \'zmdi zmdi-download\'}}" style="color:white"></md-icon>\r\n                    <md-tooltip>Download Statement</md-tooltip>\r\n                </md-button>\r\n\r\n                <md-button aria-label="Invoice Print" class="md-fab md-raised md-mini md-primary" ng-click="print();" permission="">\r\n                    <md-icon md-font-icon="{{printProcess==true ? \'fa fa-refresh fa-spin fa-3x\' : \'fa fa-print\'}}"></md-icon>\r\n                    <md-tooltip>Print Statement</md-tooltip>\r\n                </md-button>\r\n\r\n            </div>\r\n\r\n           <!--<div ng-show="isInvoicePaid"  style="position:absolute; top:130px; right:100px;z-index:9999;opacity:0.4" align="center">\r\n                <img src="assets/images/elements/paid.png" width="500" ng-show="displayPaidStamp">\r\n            </div>-->\r\n            <md-card class="page" layout-padding id="invoice_template" style="min-height:540px;overflow:auto;">\r\n                <div flex layout="row" layout-align="center center">\r\n                    <div layout="row" layout-sm="column" layout-align="space-around">\r\n                        <md-progress-circular md-mode="indeterminate"></md-progress-circular>\r\n\r\n                    </div>\r\n\r\n                </div>\r\n            </md-card>\r\n        </md-content>\r\n    </div>\r\n    \r\n</div>'),
e.put("app/modules/statement/statement.preview.tmpl.html",'<md-dialog aria-label="Statment">\r\n  <form>\r\n    <md-dialog-content style="max-width:800px;max-height:810px; ">\r\n       <div id="statement_template">\r\n          <md-progress-linear md-mode="indeterminate" ng-show="showProgress"></md-progress-linear>\r\n        </div>\r\n    </md-dialog-content>\r\n    <md-dialog-actions layout="row" palette-background="grey:200" ng-hide="showProgress">\r\n      <md-button class="md-primary" palette-background="triCyan:500" ng-click="print();" style="border:1px dashed #ccc" permission="" permission-only="\'statement-print\'">\r\n      <md-icon md-font-icon="zmdi zmdi-print" style="color:white"></md-icon>\r\n       Print\r\n      </md-button>\r\n      <md-button class="md-primary" ng-click="download();"  palette-background="triCyan:500" style="border:1px dashed #ccc" ng-disabled="downloadProgress" permission="" permission-only="\'statement-download\'">\r\n      <md-icon md-font-icon="{{downloadProgress==true ? \'zmdi zmdi-refresh zmdi-hc-spin\' : \'zmdi zmdi-download\'}}" style="color:white"></md-icon>\r\n        Download\r\n      </md-button>\r\n    </md-dialog-actions>\r\n  </form>\r\n</md-dialog>'),e.put("app/modules/statement/statement.tmpl.html",'<div  ng-show="vm.isStatementLoaded" class="loader padding-100" layout="column" layout-fill="" layout-align="center center">\t\t\r\n\t<md-progress-linear class="margin-bottom-20" md-mode="indeterminate" ng-show="vm.isStatementLoaded"></md-progress-linear>\r\n</div>\r\n\r\n<div ng-show="!vm.isStatementLoaded">\r\n<md-sidenav class="md-sidenav-left md-whiteframe-z4" md-component-id="filter" style="min-width:280px !important;">\r\n    <md-toolbar class="md-theme-light">\r\n        <h1 class="md-toolbar-tools">Search</h1>\r\n    </md-toolbar>\r\n    <form name="DateFilter" style="padding:0px;" class="dateFilter">\r\n\t\r\n\t<md-content class="md-padding">\r\n            <div class="margin-bottom-20" layout="row" layout-align="space-around center">\r\n                <label>From</label>\r\n                <md-datepicker ng-model="from" md-placeholder=""></md-datepicker>\r\n            </div>\r\n            <div class="margin-bottom-20" layout="row" layout-align="space-around center">\r\n                <label>To &nbsp;</label>\r\n                <md-datepicker ng-model="to" md-placeholder=""></md-datepicker>\r\n            </div>\r\n           \r\n           \r\n\r\n            <md-button class="md-primary md-raised width-100" ng-click="vm.FilterStatement(); vm.openSidebar(\'filter\')" ng-disabled="DateFilter.$invalid">\r\n                Search\r\n                <md-icon md-font-icon="zmdi zmdi-search"></md-icon>\r\n\r\n            </md-button>\r\n            <md-button class="md-primary md-raised width-100" ng-click="resetForm()">\r\n                Clear\r\n                <md-icon md-font-icon="zmdi zmdi-delete"></md-icon>\r\n            </md-button>\r\n        </md-content>\r\n</form>\r\n</md-sidenav>\r\n\r\n<div layout="row" flex  layout-align="start start" class="" style="padding:10px 0px 0px 10px !important;">\r\n             <div flex="80">\r\n            <md-button aria-label="search" class="md-primary md-raised md-small" ng-click="vm.openSidebar(\'filter\')">\r\n                  <md-icon md-font-icon="fa fa-search" style="font-size:14px;"></md-icon>\r\n                  <md-tooltip>Search Statement</md-tooltip>\r\n            </md-button>\r\n\t\t\t<md-button aria-label="send" class="md-primary md-raised md-small" ng-click="vm.showSendConfirmationDialog();" ng-show="CustomerSelection.length > 0" permission-only="\'statement-send\'">\r\n                  <md-icon md-font-icon="fa fa-paper-plane" style="font-size:14px;"></md-icon>\r\n                  <md-tooltip>Send Statement</md-tooltip>\r\n            </md-button>\r\n            </div>\r\n\t\t\t\r\n\t\t\t<!--<div flex="20" style="font-size:18px; font-weight:bold;">Total Amount: {{totalCheckedAmount | currency }}</div>-->\r\n        </div>\r\n\t\t\r\n\r\n\r\n<div layout="row" layout-xs="column" layout-margin  id="transaction" ng-show="ShowGrid">\r\n<tri-widget flex title="" content-layout="column" content-layout-align="center">\r\n  \t<md-table-container>\r\n          <table md-table md-row-select multiple ng-model="CustomerSelection" md-progress="vm.promise">\r\n            <thead md-head md-order="vm.query.order" md-on-reorder="logOrder">\r\n              <tr md-row>\r\n                <th md-column md-order-by="name"><span>CUSTOMER</span></th>\r\n                <th md-column><span>EMAIL</span></th>\r\n                <th md-column><span>BALANCE</span></th>\r\n                <th md-column><span>ACTION</span></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody md-body>\r\n              <tr md-row md-select="customer.Id" md-select-id="customer.Id" md-on-select="vm.MultipleSelection()" md-auto-select="vm.query.autoSelect" ng-disabled="dessert.calories.value > 400" ng-repeat="(key, customer) in vm.customerInvoices | orderBy: vm.query.order | limitTo: vm.query.limit : (vm.query.page -1) * vm.query.limit">\r\n                <td md-cell>{{customer.Name}}</td>\r\n\t\t\t\t<td md-cell>\r\n\t\t\t\t\t <md-input-container class="md-block">\r\n\t\t\t\t\t\t<label>Email Address</label>\r\n\t\t\t\t\t\t<input \r\n\t\t\t\t\t\tname="BillEmail" \r\n\t\t\t\t\t\ttype="email" \r\n\t\t\t\t\t\tng-model="customer.Email"\r\n\t\t\t\t\t\tstyle="width:200px;"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t <div ng-messages="createnew.BillEmail.$error" md-auto-hide="false" >\r\n\t\t\t\t\t\t\t<div ng-message when="email">\r\n\t\t\t\t\t\t\t\t<span translate>Please enter a valid email address</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</md-input-container>\r\n\t\t\t\t</td>\r\n\t\t\t\t<td md-cell class="title"><h4>{{customer.OpenBalance | currency}}</h4></td>\r\n\t\t\t\t<td md-cell class="col3">\r\n\t\t\t\t   <!--<md-button class="md-primary md-hue-2 " style="border:1px dashed #ccc" ng-click="vm.showStatement(customer);" permission="" permission-only="\'statement-view\'">\r\n\t\t\t\t\t  <md-icon \r\n\t\t\t\t\t\tmd-font-icon="zmdi zmdi-view-toc" \r\n\t\t\t\t\t\tmd-menu-align-target \r\n\t\t\t\t\t\tstyle="font-size:12px; margin-bottom:2px;"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t  </md-icon >&nbsp;View Statement\r\n\t\t\t\t  </md-button>-->\r\n\t\t\t\t  \r\n\t\t\t\t  <md-button class="md-primary md-fab md-mini" ng-class="[vm.buttonClass, vm.buttonHue]" aria-label="fab button" ng-click="vm.openStatementDetail(customer);" permission="" permission-only="\'statement-view\'">\r\n\t\t\t\t\t\t\t<md-icon md-font-icon="zmdi zmdi-mail-send"></md-icon>\r\n\t\t\t\t   </md-button>\r\n\t\t\t\t</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </md-table-container>\r\n    <md-table-pagination md-limit="vm.query.limit" md-limit-options="limitOptions" md-page="vm.query.page" md-total="{{vm.customerInvoices.length}}" md-page-select="options.pageSelect" md-boundary-links="options.boundaryLinks" md-on-paginate="logPagination"></md-table-pagination>\t\r\n\t  </tri-widget>\t\t\t   \r\n</div>\r\n</div>'),e.put("app/modules/transactions/sendConfirmationDialog.html",'<md-dialog class="mobile-fullwidth-dialog">\r\n<md-progress-linear class="md-primary" md-mode="indeterminate" ng-show="showProgress"></md-progress-linear>\r\n    <form name="emailForm" novalidate ng-submit="submit()">\r\n        <md-toolbar class="toolbar-default" md-theme="default">\r\n\r\n            <div class="md-toolbar-tools">\r\n                <h2>\r\n                    <span>{{settings.title}}</span>\r\n                </h2>\r\n                <span flex></span>\r\n                <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\r\n                    <md-icon md-font-icon="zmdi zmdi-close"></md-icon>\r\n                </md-button>\r\n            </div>\r\n        </md-toolbar>\r\n\r\n        <md-divider></md-divider>\r\n\r\n        <md-dialog-content class="email-dialog md-padding">\r\n\r\n            <div layout="row">\r\n                <div layout="column" flex>\r\n                    <span class="md-caption">To: </span>\r\n                    <md-chips ng-model="settings.InvoiceContacts.to_email" readonly="false" md-removable="true" md-enable-chip-edit="true" name="to_email" md-on-add="validateChip($chip,\'to\')" md-on-remove="validateChip($chip,\'to\')" placeholder="{{\'TO\' | triTranslate}}" secondary-placeholder="">\r\n                    </md-chips>\r\n\r\n                    <div class="email-dialog-ccs ng-hide" layout="column" ng-show="showCCS">\r\n                        <span class="md-caption">CC: </span>\r\n                        <md-chips ng-model="settings.InvoiceContacts.cc_email" readonly="false" md-removable="true" md-enable-chip-edit="false" md-max-chips="3" name="bcc_email" md-on-add="validateChip($chip,\'cc\')" placeholder="{{\'CC\' | triTranslate}}" secondary-placeholder="">\r\n                        </md-chips>\r\n                        <span class="md-caption">BCC: </span>\r\n                        <md-chips ng-model="settings.InvoiceContacts.bcc_email" readonly="false" md-removable="true" md-enable-chip-edit="false" md-max-chips="3" name="bcc_email" md-on-add="validateChip($chip,\'bcc\')" placeholder="{{\'BCC\' | triTranslate}}" secondary-placeholder="">\r\n                        </md-chips>\r\n                    </div>\r\n                    <span class="md-caption">From: </span>\r\n                    <md-chips secondary-placeholder="{{\'From\' | triTranslate}}">\r\n                        <md-chip secondary-placeholder="{{\'From\' | triTranslate}}">{{settings.InvoiceContacts.sender_name}}\r\n                            <{{settings.InvoiceContacts.sender_email}}>\r\n                        </md-chip>\r\n\r\n                    </md-chips>\r\n                    <!-- <md-input-container flex="30" style="width:50%">\r\n                            <label>Template</label>\r\n                            <md-select ng-model="selectedTemplate"  name="type" >\r\n                            <md-option ng-click="SelectedTemplateValue(template)" ng-repeat="template in settings.InvoiceContacts.template_email track by $index"\r\n                            ng-value="{{template}}" ng-selected="template.isSelected == true">{{template.name}}</md-option>\r\n\r\n                            </md-select>\r\n                          </md-input-container> -->\r\n\r\n                </div>\r\n                <md-button class="md-icon-button md-raised" ng-click="toggleCCS($event)" aria-label="toggle ccs">\r\n                    <md-icon md-font-icon ng-class="showCCSIcon"></md-icon>\r\n                </md-button>\r\n            </div>\r\n        </md-dialog-content>\r\n        <md-dialog-actions layout="row">\r\n            <span flex></span>\r\n            <md-button class="md-primary md-raised" type=\'submit\' ng-disabled="disabledSubmitButton" aria-label="send" translate="Send" >Send</md-button>\r\n        </md-dialog-actions>\r\n    </form>\r\n</md-dialog>\r\n'),e.put("app/modules/transactions/transaction-listing.tmpl.html",'\r\n<md-progress-linear class="margin-bottom-20" md-mode="indeterminate" ng-show="vm.isTransactionLoaded"></md-progress-linear>\r\n<md-progress-linear class="margin-bottom-20" md-mode="indeterminate" ng-show="showProgress"></md-progress-linear>\r\n<div>\r\n    <md-sidenav class="md-sidenav-left md-whiteframe-z4 md-sidenav-transaction" md-component-id="filter" style="width:300px !important;">\r\n        <md-toolbar class="md-theme-light" >\r\n            <h1 class="md-toolbar-tools">Search</h1>\r\n        </md-toolbar>\r\n        <form flex="" name="vm.filter.form">\r\n            <md-content class="md-padding">\r\n                <div class="margin-bottom-20" layout="row" layout-align="space-around center">\r\n                    <label>From</label>\r\n                    <md-datepicker ng-model="from" md-placeholder=""></md-datepicker>\r\n                </div>\r\n                <div class="margin-bottom-20" layout="row" layout-align="space-around center">\r\n                    <label>To &nbsp;</label>\r\n                    <md-datepicker ng-model="to" md-placeholder=""></md-datepicker>\r\n                </div>\r\n                <md-input-container class="md-block"></md-input-container>\r\n                <md-input-container class="md-block">\r\n                    <label>Status</label>\r\n                    <md-select placeholder="Status" ng-model="vm.query.status">\r\n                        <md-option value="approved">Approved</md-option>\r\n                        <md-option value="declined">Declined</md-option>\r\n                    </md-select>\r\n                </md-input-container>\r\n                <md-input-container class="md-block"></md-input-container>\r\n                <md-input-container class="md-block">\r\n                    <label>Customer</label>\r\n                    <input md-maxlength="30" required md-no-asterisk name="customer name" ng-model="vm.query.customer">\r\n\r\n                </md-input-container>\r\n                <md-button class="md-primary md-raised width-100" ng-click="vm.getTransaction(); vm.openSidebar(\'filter\')">\r\n                    Search\r\n                    <md-icon md-font-icon="zmdi zmdi-search"></md-icon>\r\n                </md-button>\r\n                <md-button class="md-primary md-raised width-100" ng-click="resetForm()">\r\n                    Clear\r\n                    <md-icon md-font-icon="zmdi zmdi-delete"></md-icon>\r\n                </md-button>\r\n                </md-input-container>\r\n\r\n            </md-content>\r\n        </form>\r\n    </md-sidenav>\r\n    <div layout="row" flex  layout-align="start start" style="padding:10px 0px 0px 10px !important;" >\r\n            <md-button aria-label="search" class="md-primary md-raised md-small" ng-click="vm.openSidebar(\'filter\')" ng-hide="vm.isTransactionLoaded" >\r\n                  <md-icon md-font-icon="fa fa-search" style="font-size:14px;"></md-icon>\r\n\r\n            </md-button>\r\n            <md-button  aria-label="export" type="button" class="md-primary md-raised md-small"\r\n             ng-csv="vm.tblData"\r\n             csv-header="[\'TRANS. ID\', \'DATE\', \'AMOUNT\',\'REMAINING\',\'TRANS TYPE\',\'STATUS\',\'CUSTOMER\',\'TYPE\',\'Invoice NO #.\']"\r\n             csv-column-order="[\'ref_id\',\'trans_date\',\'trans_amount\',\'remain_amount\',\'trans_type\',\'status\',\'customer_name\',\'process_type\',\'invoice_no\']"\r\n             filename="test.csv"\r\n             export-csv-ignore="ignore"\r\n             ng-hide="vm.isTransactionLoaded"\r\n             >\r\n             <md-icon md-font-icon="fa fa-file" style="font-size:14px;"></md-icon>\r\n             <md-tooltip>Export</md-tooltip>\r\n\r\n            </md-button>\r\n    </div>\r\n      <div layout="row" flex layout-align="center center" ng-show="triPOSLaneInfo._hasErrors">\r\n            <div  ng-class="{fade:doFade}" class="error">\r\n                <strong>Error:</strong>\r\n                {{triPOSLaneInfo.errorMessage}}\r\n                <br>\r\n                <span class="md-caption">you are not able do void or refund transaction, please check triPOS services or device ipaddress</span>\r\n            </div>\r\n        </div>\r\n     <div layout="row" layout-xs="column" layout-margin ng-hide="vm.isTransactionLoaded" id="transaction">\r\n\r\n\r\n        <tri-widget flex title="" content-layout="column" content-layout-align="center">\r\n            <md-table-container>\r\n                <table md-table class="md-data-table" md-progress="vm.promise">\r\n                    <!--md-on-reorder="vm.tblData"-->\r\n                    <thead md-head md-order="vm.query.order"  md-on-reorder="getDesserts">\r\n                        <tr md-row>\r\n                            <th></th>\r\n                            <th md-column md-order-by="ref_id" decend-first>TRANS. ID</th>\r\n                            <th md-column md-order-by="trans_timestamp"  class="col5" style="width:90px;">DATE</th>\r\n                            <th md-column md-order-by="trans_amount" >AMOUNT</th>\r\n                            <th md-column md-order-by="remain_amount">REMAINING</th>\r\n                            <th md-column md-order-by="trans_type" class="col4">TRANS TYPE</th>\r\n                            <th md-column md-order-by="status" class="col3">STATUS</th>\r\n                            <th md-column md-order-by="customer_name" class="col2">CUSTOMER</th>\r\n                            <th md-column md-order-by="process_type" class="col1">TYPE</th>\r\n                            <th md-column md-order-by="invoice_no" class="col1">NO #.</th>\r\n                            <th md-column align="center">ACTION</th>\r\n                        </tr>\r\n                    </thead>\r\n\r\n                    <tbody md-body ng-repeat="item in vm.tblData | orderBy: vm.query.order | limitTo: vm.query.limit : (vm.query.page -1) * vm.query.limit">\r\n\r\n                            <tr md-row >\r\n                                <td md-cell >\r\n                                     <md-button ng-show="item.subtrans.length > 0" ng-click="close = !close" class="md-primary md-small md-mini" aria-label="Show Sub Transaction" >\r\n                                    <md-icon   md-font-icon="{{close==true ? \'fa fa-minus\' : \'fa fa-plus\'}}"></md-icon>\r\n                                    </md-button>\r\n                                </td>\r\n                                <td md-cell >\r\n                                    {{::item.ref_id}}\r\n                                </td>\r\n                                <td md-cell class="col5">{{::item.trans_timestamp * 1000 | date: \'medium\'}}</td>\r\n                                <td md-cell>{{::item.trans_amount | currency}}</td>\r\n                                <td md-cell>{{::item.remain_amount | currency}}</td>\r\n                                <td md-cell class="col4">{{::item.trans_type | transType}}</td>\r\n                                <td md-cell class="col3">\r\n                                    <md-chips class="status" ng-hide="item.status==\'\'"><md-chip class="status {{::item.status}}">{{::item.status}}</md-chip></md-chips>\r\n                                    <span class="status" ng-class="\'status-\' + item.status">\r\n\r\n                                    </span>\r\n                                </td>\r\n                                <td md-cell class="col2">{{::item.customer_name}}</td>\r\n                                <td md-cell class="col1 capitalize">{{item.process_type | processType}}</td>\r\n                                <td md-cell class="col1">{{item.invoice_no}}</td>\r\n                                <td md-cell>\r\n                                    <div layout="row" layout-align="center center">\r\n                                        <div palette-background="grey:300">\r\n\r\n                                              <md-button ng-click="emailReceipt(item,item.trans_type)" style="margin:0px !important;height:25px; color:rgba(0, 0, 0, 0.54) !important;font-size:12px;  min-width:18px; "\r\n                                              permission\r\n                                              permission-only="\'transaction-emailreceipt\'">\r\n                                                <md-icon md-font-icon="fa fa-envelope-o" md-menu-align-target style="font-size:12px; margin-bottom:2px;"></md-icon >\r\n                                                Receipt\r\n                                              </md-button>\r\n                                        </div>\r\n                                        <div style="border:0px solid;" palette-background="grey:300">\r\n                                            <md-menu md-offset="0 60">\r\n                                                <md-button\r\n                                                ng-click="$mdOpenMenu()"\r\n                                                class=""\r\n                                                style="margin:0px !important; min-width:13px; height:25px; color:rgba(0, 0, 0, 0.54) !important;">\r\n                                                       <md-icon md-font-icon="fa fa-caret-down"></md-icon>\r\n                                                </md-button>\r\n                                                <md-menu-content width="3">\r\n                                                    <md-menu-item\r\n                                                       permission\r\n                                                       permission-only="\'transaction-print\'"\r\n                                                       >\r\n                                                    <md-button\r\n                                                       class=""\r\n                                                       ng-click="printReceipt(item)"\r\n                                                       >\r\n                                                        <md-icon md-font-icon="fa fa-print"  md-menu-align-target></md-icon>\r\n                                                        Print\r\n                                                      </md-button>\r\n\r\n                                                    </md-menu-item>\r\n                                                    <md-menu-divider></md-menu-divider>\r\n                                                    <md-menu-item\r\n                                                       permission\r\n                                                       permission-only="\'transaction-void\'"\r\n\r\n                                                     >\r\n                                                      <md-button ng-disabled="vm.disabledVoidOption(item)" ng-click="callVoid(item,item.trans_type)">\r\n                                                        <md-icon md-font-icon="fa fa-ban" md-menu-align-target></md-icon>\r\n                                                        Void\r\n                                                      </md-button>\r\n                                                    </md-menu-item>\r\n                                                    <md-menu-divider ></md-menu-divider>\r\n                                                    <md-menu-item\r\n                                                       permission\r\n                                                       permission-only="\'transaction-refund\'"\r\n\r\n\r\n                                                      >\r\n                                                      <md-button ng-disabled="item.remain_amount <=0" ng-click="callRefund(item,item.trans_type)" >\r\n                                                        <md-icon md-font-icon="fa fa-reply-all"></md-icon>\r\n                                                        Refund\r\n                                                      </md-button>\r\n                                                    </md-menu-item>\r\n                                                  </md-menu-content>\r\n                                              </md-menu>\r\n                                        </div>\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n                            <tr md-row ng-show="close" class="ignore">\r\n                                <td md-cell>&nbsp;</td>\r\n                                <td md-cell colspan="8" class="md-padding" style="padding:10px;">\r\n                                    <table md-table class="subtrans" cellpadding="2" cellspacing="2">\r\n                                        <thead md-head >\r\n                                            <tr md-row>\r\n                                                <th>&nbsp;TRANSID</th>\r\n                                                <th>DATE</th>\r\n                                                <th>AMOUNT</th>\r\n                                                <th>TRANS TYPE</th>\r\n                                                <th style="text-align:left !important">STATUS</th>\r\n                                                <th style="text-align:left !important">ACTION</th>\r\n\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody md-body style="text-align:center;">\r\n                                            <tr md-row  ng-repeat="subtrans in item.subtrans">\r\n                                                <td md-cell>{{::subtrans.ref_id}}</td>\r\n                                                <td md-cell>{{::subtrans.trans_timestamp * 1000 | date:\'medium\'}}</td>\r\n                                                <td md-cell>{{::subtrans.trans_amount | currency}}</td>\r\n                                                <td md-cell>{{::subtrans.trans_type | transType}}</td>\r\n                                                <td md-cell >\r\n\r\n                                                    <md-chips class="status" ng-hide="subtrans.status==\'\'"><md-chip class="status {{subtrans.status}}">{{subtrans.status}}</md-chip></md-chips>\r\n                                                    <span class="status" ng-class="\'status-\' + subtrans.status">\r\n                                                    </span>\r\n                                                </td>\r\n                                                <td md-cell>\r\n\r\n                                                     <md-button class="md-mini md-fab md-small-trans" ng-click="    printReceipt(subtrans,item.trans_type)"\r\n                                                       permission\r\n                                                       permission-only="\'transaction-print\'"\r\n\r\n                                                     >\r\n                                                        <md-icon md-font-icon="fa fa-print" style="color:#2ec6a6"></md-icon>\r\n                                                    </md-button>\r\n                                                        <md-button class="md-mini md-fab md-small-trans" ng-click="emailReceipt(subtrans,item.trans_type)"\r\n                                                         permission\r\n                                                         permission-only="\'transaction-emailreceipt\'"\r\n\r\n                                                        >\r\n                                                         <md-icon md-font-icon="fa fa-envelope-o" style="color:#2ec6a6"></md-icon>\r\n                                                      </md-button>\r\n                                                </td>\r\n                                            </tr>\r\n                                        </tbody>\r\n                                    </table>\r\n                                </td>\r\n                            </tr>\r\n\r\n                    </tbody>\r\n                    <tr md-row ng-show="vm.tblData.length==0"><td md-cell colspan="10" style="text-align:center !important;text-transform:none;">There is no data to display</td></tr>\r\n                </table>\r\n            </md-table-container>\r\n            <md-table-pagination md-limit="vm.query.limit" md-page="vm.query.page"  md-total="{{vm.tblData.length}}" md-page-select></md-table-pagination>\r\n        </tri-widget>\r\n    </div>\r\n</div>\r\n'),e.put("app/modules/transactions/transaction.refund.tmpl.html",'\r\n<md-dialog aria-label="Refund Transaction" >\r\n<md-progress-linear md-mode="indeterminate" ng-show="showProgress"></md-progress-linear>\r\n  <form name="refundForm">\r\n    \r\n    <md-dialog-content class="md-padding">\r\n      \r\n      <h2>Refund Transaction</h2>\r\n      <div class="md-dialog-content">\r\n         <md-input-container class="md-block bigClass">\r\n          <label for="refund_amount">Enter Refund Amount </label>\r\n          <input id="refund_amount" label="refund_amount" name="refund_amount" type="number" ng-model="refund_amount " ng-min="0.01" max="{{transData.remain_amount}}" required/>\r\n          <div ng-messages="refundForm.refund_amount.$error" md-auto-hide="false" ng-show="refundForm.refund_amount.$touched">\r\n              <div ng-message="required">\r\n                  Please enter refund amount.\r\n              </div>\r\n              <div ng-message="min">\r\n                  Refund amount should be greater than 0\r\n              </div>\r\n              <div ng-message="max">\r\n                  Refund amount should not be greater than <span>{{transData.remain_amount | currency}}</span>\r\n              </div>\r\n\r\n              \r\n          </div>\r\n      </md-input-container>\r\n      </div>\r\n    </md-dialog-content>\r\n\r\n    <md-dialog-actions layout="row" ng-hide="hideDialogActions">\r\n      <md-button ng-disabled="refundForm.$invalid" ng-click="confirm(\'refund\')" class="md-primary md-raised">\r\n         <!--<md-icon md-font-icon="fa fa-check"></md-icon></md-icon>-->Refund\r\n      </md-button>\r\n    </md-dialog-actions>\r\n  </form>\r\n</md-dialog>'),e.put("app/modules/transactions/transaction.void.tmpl.html",'\r\n<md-dialog aria-label="Void Transaction">\r\n<md-progress-linear md-mode="indeterminate" ng-show="showProgress"></md-progress-linear>\r\n  <form name="VoidForm">\r\n    <md-dialog-content class="md-padding">\r\n      \r\n       <h2 ng-if="transData.trans_amount==transData.remain_amount">Are you sure you want to void this payment?</h2>\r\n        <div class="md-dialog-content">\r\n        <div ng-if="transData.trans_amount!=transData.remain_amount" align="center" class="md-padding title" style="color:red">\r\n                <span ><md-icon md-font-icon="fa fa-warning"></md-icon>This Transaction cannot be voided</span>\r\n        </div>\r\n      </div>\r\n    \r\n    </md-dialog-content>\r\n\r\n    <md-dialog-actions layout="row" ng-hide="hideDialogActions">\r\n      \r\n      <md-button ng-disabled="transData.trans_amount!=transData.remain_amount" ng-click="cancel(\'void\')" class="md-primary">\r\n         Cancel\r\n      </md-button>\r\n      <span>&nbsp;</span>\r\n      <md-button ng-click="confirm(\'void\')" class="md-primary">\r\n         Confirm\r\n      </md-button\r\n    </md-dialog-actions>\r\n  </form>\r\n</md-dialog>\r\n\r\n'),e.put("app/modules/dashboards/analytics/dashboard-analytics.tmpl.html",'<form name="DateFilter" style="padding:0px;" class="dateFilter">\r\n                \r\n    <div layout="row" layout-xs="column" layout-align"center center" class="md-padding" style="padding-bottom:0px; margin-bottom:0px;">\r\n        <div flex>\r\n            <md-input-container>\r\n                <md-datepicker name="startDate" ng-model="vm.fromDate" md-placeholder="From date" ng-blur="vm.validateDate()" required>\r\n                </md-datepicker>\r\n                <div class="validation-messages" ng-messages="DateFilter.startDate.$error">\r\n                    <div ng-message="valid">Invalid Date</div>\r\n                    <div ng-message="required">date is required!</div>\r\n                </div>\r\n            </md-input-container>\r\n        </div>\r\n        <div flex>\r\n            <md-input-container>\r\n                <md-datepicker name="endDate" ng-model="vm.toDate" md-placeholder="To date" md-min-date="minDate" md-max-date="maxDate" required>\r\n                </md-datepicker>\r\n\r\n                <div class="validation-messages" ng-messages="DateFilter.endDate.$error">\r\n                    <div ng-message="valid">Invalid Date</div>\r\n                    <div ng-message="required">date is required!</div>\r\n                    <div ng-message="mindate">Year should be same as in From Date</div>\r\n                    <div ng-message="maxdate">Year should be same as in From Date</div>\r\n\r\n                </div>\r\n            </md-input-container>\r\n        </div>\r\n        <div flex="60">\r\n            <md-input-container>\r\n                <md-button class="md-primary md-raised" ng-click="vm.FilterDashboard();" ng-disabled="DateFilter.$invalid" >\r\n                    Search\r\n                    <md-icon md-font-icon="zmdi zmdi-search"></md-icon>\r\n                </md-button>\r\n            </md-input-container>\r\n        </div>\r\n                \r\n    </div>\r\n</form>\r\n<div class="dashboard-container padded-content-page" layout="column" style="padding-right:8px !important;padding-left:8px !important;" palette-background="grey:100">\r\n    <div class="drag-container" layout="row" layout-xs="row" layout-margin dragula=\'"drag-analytics-container"\'>\r\n        <tri-widget ng-click="vm.showInvoiceList(\'paid\');" palette-background="blue:700" content-layout="row" content-layout-align="space-between center"   style="cursor:pointer;padding:8px;" >\r\n            <div>\r\n                <md-icon class=" opacity-50 margin-left-5" md-font-icon="fa fa-paper-plane"></md-icon>\r\n            </div>\r\n\r\n            <div layout="column" layout-align="center end">\r\n                <p class="md-display-1 font-weight-100 margin-top-0 margin-bottom-0 text-ellipsis" countupto="invoice.statistics.paid" decimals="0"></p>\r\n                <p class="md-body-1 opacity-100 margin-top-0 margin-bottom-0" translate>PAID</p>\r\n            </div>\r\n        </tri-widget>\r\n\r\n        <tri-widget ng-click="vm.showInvoiceList(\'dues\');" palette-background="triCyan:300" content-layout="row" content-layout-align="space-between center"  style="cursor:pointer;padding:8px;" >\r\n            <div>\r\n                <md-icon class="opacity-50 margin-left-5" md-font-icon="fa fa-calendar-o"></md-icon>\r\n            </div>\r\n            <div layout="column" layout-align="center end">\r\n                <p class="md-display-1 font-weight-100 margin-top-0 margin-bottom-0 text-ellipsis"  countupto="invoice.statistics.due" decimals="0"></p>\r\n                <p class="md-body-1 opacity-100 margin-top-0 margin-bottom-0" translate>DUE</p>\r\n            </div>\r\n        </tri-widget>\r\n\r\n        <tri-widget ng-click="vm.showInvoiceList(\'overdues\');" palette-background="pink:300" content-layout="row" content-layout-align="space-between center"  style="cursor:pointer;padding:10px;" >\r\n            <div>\r\n                <md-icon class="opacity-50 margin-left-0" md-font-icon="fa fa-calendar-times-o"></md-icon>\r\n            </div>\r\n            <div layout="column" layout-align="center end" class="widget-caption">\r\n                <p class="md-display-1 font-weight-100 margin-top-0 margin-bottom-0 text-ellipsis" countupto="invoice.statistics.overdue" decimals="0" ></p>\r\n                <p class="md-caption opacity-100 margin-top-0 margin-bottom-0 margin-right-0 margin-left-0"  translate>OVERDUE</p>\r\n            </div>\r\n        </tri-widget>\r\n    </div>\r\n\r\n    <div layout="row" layout-xs="column" layout-margin >\r\n         <tri-widget chartjs-line-widget title="Payments" subtitle="{{vm.fromDate  | date:\'MM/dd/yyyy\'}} - {{vm.toDate  | date:\'MM/dd/yyyy\'}}" content-layout="row" content-padding>\r\n            <canvas class="chart-line" chart-data="invoice.lineChart.data" chart-labels="invoice.lineChart.labels" chart-legend="true" chart-series="invoice.lineChart.series" chart-options="vm.options" ></canvas>\r\n        </tri-widget>\r\n\r\n\r\n        <tri-widget chartjs-pie-widget title="Invoices" subtitle="{{vm.fromDate  | date:\'MM/dd/yyyy\'}} - {{vm.toDate  | date:\'MM/dd/yyyy\'}}" content-padding>\r\n            <div style="width:100% !important; margin:0 auto;" align="center">\r\n                <canvas class="chart-doughnut" chart-data="invoice.pieChart.data" chart-legend="true" chart-labels="invoice.pieChart.labels" chart-options="vm.options"></canvas>\r\n            </div>\r\n        </tri-widget>\r\n    </div>\r\n    <div layout="row" layout-xs="column" layout-margin ng-show="showSubPieChart">\r\n        <tri-widget chartjs-pie-widget title="{{invoice.subPieChart1.heading}}" subtitle="" content-padding>\r\n            <div style="width:100% !important; margin:0 auto;" align="center">\r\n                <canvas class="chart-doughnut" chart-data="invoice.subPieChart1.data" chart-legend="true" chart-labels="invoice.subPieChart1.labels" chart-options="vm.options"></canvas>\r\n            </div>\r\n        </tri-widget>\r\n        <tri-widget chartjs-pie-widget title="{{invoice.subPieChart2.heading}}" subtitle="" content-padding>\r\n            <div style="width:100% !important; margin:0 auto;" align="center">\r\n                <canvas class="chart-doughnut" chart-data="invoice.subPieChart2.data" chart-legend="true" chart-labels="invoice.subPieChart2.labels" chart-options="vm.options"></canvas>\r\n            </div>\r\n        </tri-widget>\r\n        <tri-widget chartjs-pie-widget title="{{invoice.subPieChart3.heading}}" subtitle="" content-padding>\r\n            <div style="width:100% !important; margin:0 auto;" align="center">\r\n                <canvas class="chart-doughnut" chart-data="invoice.subPieChart3.data" chart-legend="true" chart-labels="invoice.subPieChart3.labels" chart-options="vm.options"></canvas>\r\n            </div>\r\n        </tri-widget>\r\n    </div>\r\n</div>'),
e.put("app/modules/dashboards/widgets/widget-load-data-dialog.tmpl.html",'<md-dialog>\r\n    <md-toolbar md-theme="{{triSkin.elements.toolbar}}">\r\n        <div class="md-toolbar-tools">\r\n            <h2 flex>\r\n                <span translate>Full Data</span>\r\n            </h2>\r\n            <md-button class="md-icon-button" aria-label="Settings">\r\n                <md-icon md-font-icon="zmdi zmdi-close" ng-click="closeDialog()"></md-icon>\r\n            </md-button>\r\n        </div>\r\n    </md-toolbar>\r\n    <md-dialog-content class="md-dialog-content">\r\n        <table class="table">\r\n            <thead>\r\n                <tr>\r\n                    <th ng-repeat="header in data.header">{{header}}</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr ng-repeat="referral in data.data">\r\n                    <td ng-repeat="data in referral">{{data}}</td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </md-dialog-content>\r\n</md-dialog>'),e.put("app/modules/invoice/createnew/customer.addnew.html",'<md-dialog aria-label="Add New Customer">\r\n<md-progress-linear class="md-primary" md-mode="indeterminate" ng-show="showProgress"></md-progress-linear>\r\n<md-dialog-content class="addnewcustomer">\r\n      <md-progress-linear md-mode="indeterminate" ng-show="showProgress"></md-progress-linear>\r\n      \r\n      <form class="md-padding" name="customerForm">\r\n        <h4 class="md-title">Customer Information</h4>\r\n        <div layout="row">\r\n            <div flex>\r\n                <md-input-container>\r\n                    <label>Customer Name</label>\r\n                    <input \r\n                    type="text" \r\n                    name="display_name"\r\n                    ng-model="customer.DisplayName" \r\n                    md-autofocus\r\n                    ng-maxlength="100" \r\n                    ng-pattern="/^[a-zA-Z\\s]*$/" \r\n                    required\r\n                    >\r\n                     <div ng-messages="customerForm.display_name.$error" md-auto-hide="false" >\r\n                        <p ng-message when="required">Please enter your first name</p>\r\n                        <p ng-message when="maxlength">Text should not be greater then 100 characters</p>\r\n                        <p ng-message when="pattern">Only alphabets are allowed</p>\r\n                    </div>\r\n                </md-input-container>\r\n                <md-input-container >\r\n                    <label>Email</label>\r\n                    <input \r\n                    name="email" \r\n                    type="email" \r\n                    ng-model="customer.PrimaryEmailAddr.Address"\r\n                    >\r\n                     <div ng-messages="customerForm.email.$error" md-auto-hide="false" >\r\n                        <div ng-message when="required">\r\n                            <span translate>Please enter your email address</span>\r\n                        </div>\r\n                        <div ng-message when="email">\r\n                            <span translate>Please enter a valid email address</span>\r\n                        </div>\r\n                    </div>\r\n                </md-input-container>\r\n                  <md-input-container >\r\n                    <label>Company</label>\r\n                    <input \r\n                    name="company_name"\r\n                    type="text" \r\n                    ng-model="customer.CompanyName"\r\n                    ng-maxlength="100" \r\n                    >\r\n                     <div ng-messages="customerForm.company_name.$error" md-auto-hide="false">\r\n                        <p ng-message when="maxlength">Text should not be greater then 100 characters</p>\r\n                    </div>\r\n                </md-input-container>\r\n                 <md-input-container>\r\n                    <label>PrimaryPhone</label>\r\n                    <input \r\n                    name="PrimaryPhone" \r\n                    type="text" \r\n                    ng-model="customer.PrimaryPhone.FreeFormNumber"\r\n                    >\r\n                   \r\n                </md-input-container>\r\n                <md-input-container>\r\n                    <label>Fax</label>\r\n                    <input \r\n                    name="Fax" \r\n                    type="text" \r\n                    ng-model="customer.Fax.FreeFormNumber"\r\n                    >\r\n                   \r\n                </md-input-container>\r\n                <md-input-container>\r\n                    <label>Website</label>\r\n                    <!--//ng-pattern="/^https?://.+$/"-->\r\n                    <input \r\n                    name="WebAddr" \r\n                    \r\n                    ng-pattern="/^(https?:\\/\\/)+[a-z0-9-]+(\\.[a-z0-9-]+)+(\\/[a-z0-9-]+)*\\/?$/"\r\n                    type="text" \r\n                    ng-model="customer.WebAddr.URI"\r\n                    ng-maxlength="100" \r\n                    >\r\n                    <div ng-messages="customerForm.WebAddr.$error" md-auto-hide="false">\r\n                        <p ng-message when="pattern">Invalid web address </p>\r\n                        <p ng-message when="maxlength">Webaddress should not be greater then 100 characters</p>\r\n                    </div>\r\n              \r\n                </md-input-container>\r\n                  <md-input-container>\r\n                    <label>Note</label>\r\n                    <input \r\n                    name="Notes" \r\n                    type="text" \r\n                    ng-model="customer.Notes"\r\n                    md-maxlength="100" \r\n                    >\r\n                      <div ng-messages="customerForm.Notes.$error" md-auto-hide="false">\r\n                        <p ng-message when="md-maxlength">Maximum 100 characters allowed</p>\r\n                    </div>\r\n              \r\n                </md-input-container>\r\n            </div>\r\n        </div>\r\n       \r\n        <div layout="row" layout-wrap>\r\n            <div>\r\n                <h4 class="md-body-1">Billing Address</h4>\r\n                <md-input-container class="md-block-md">\r\n                    <label>Street</label>\r\n                    <input \r\n                    name="BillAddr_Line1"\r\n                    type="text" \r\n                    ng-model="customer.BillAddr.Line1"\r\n                    >\r\n                   \r\n                </md-input-container>\r\n                <md-input-container class="md-block-md">\r\n                    <label>City/Town</label>\r\n                    <input \r\n                    name="BillAddr_City"\r\n                    type="text" \r\n                    ng-model="customer.BillAddr.City"\r\n                    >\r\n                 \r\n                </md-input-container>\r\n                <md-input-container class="md-block-sm">\r\n                    <label>State/Province</label>\r\n                    <input \r\n                    name="BillAddr_CountrySubDivisionCode"\r\n                    type="text" \r\n                    ng-model="customer.BillAddr.CountrySubDivisionCode"\r\n                    >\r\n                </md-input-container>\r\n                <md-input-container class="md-block-sm">\r\n                    <label>Zip code</label>\r\n                    <input \r\n                    name="BillAddr_PostalCode" \r\n                    type="text" \r\n                    ng-model="customer.BillAddr.PostalCode" \r\n                    >\r\n                \r\n                </md-input-container>\r\n                <md-select class="md-block-sm" placeholder="Country" ng-model="customer.BillAddr.Country" md-on-open="loadCountries()" style="min-width: 200px;">\r\n                  <md-option ng-value="country.name" ng-repeat="country in countries.data">{{country.name}}</md-option>\r\n                </md-select>\r\n \r\n            </div>\r\n        </div>\r\n        <div layout="row" layout-wrap>\r\n            <div ng-init="sameAsBilling=true">\r\n            <h4 class="md-body-1">Shipping Address <md-checkbox ng-model="sameAsBilling" ng-change="setCustomerShipping();"></md-chekcbox> <span class="md-caption">Same as billing address</span></h4>\r\n                <div ng-hide="sameAsBilling">\r\n                         <md-input-container class="md-block-md">\r\n                            <label>Street</label>\r\n                            <input \r\n                            name="ShipAddr_Line1"\r\n                            type="text" \r\n                            ng-model="customer.ShipAddr.Line1"\r\n                            >\r\n                        </md-input-container>\r\n                        <md-input-container class="md-block-md">\r\n                            <label>City/Town</label>\r\n                            <input \r\n                            name="ShipAddr_City"\r\n                            type="text" \r\n                            ng-model="customer.ShipAddr.City"\r\n                            >\r\n                        </md-input-container>\r\n                        <md-input-container class="md-block-sm">\r\n                            <label>State/Province</label>\r\n                            <input \r\n                            name="ShipAddr_CountrySubDivisionCode"\r\n                            type="text" \r\n                            ng-model="customer.ShipAddr.CountrySubDivisionCode"\r\n                            >\r\n                        </md-input-container>\r\n                        <md-input-container class="md-block-sm">\r\n                            <label>Zip code</label>\r\n                            <input \r\n                            name="ShipAddr_PostalCode" \r\n                            type="text" \r\n                            ng-model="customer.ShipAddr.PostalCode" \r\n                            >\r\n                        </md-input-container>\r\n                        <md-select class="md-block-sm" placeholder="Country" ng-model="customer.ShipAddr.Country" md-on-open="loadCountries()" style="min-width: 200px;">\r\n                          <md-option ng-value="country.name" ng-repeat="country in countries.data">{{country.name}}</md-option>\r\n                        </md-select>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div layout="row" layout-align="end center" ng-hide="hideDialogActions">\r\n            <md-button \r\n            class="md-primary md-raised" \r\n            ng-click="addNewCustomer();"\r\n            ng-disabled="customerForm.$invalid"\r\n            >Save</md-button>\r\n        </div>\r\n        </form>\r\n</md-dialog-content>\r\n</md-dialog>'),e.put("app/modules/invoice/createnew/invoice.create.tmpl.html",'<!--<tri-loader ng-show="true"></tri-loader>-->\r\n\r\n<div  ng-show="showApiProgress" class="loader padding-100" layout="column" layout-fill="" layout-align="center center">\r\n    <md-progress-linear md-mode="determinate" value="{{apiProgressValue}}"></md-progress-linear>\r\n</div>\r\n\r\n<form name="createnew"  ng-submit="createnew.$valid && createInvoice();">\r\n<md-progress-linear class="md-primary" md-mode="indeterminate" ng-show="showProgress"></md-progress-linear>\r\n<md-content flex layout-padding class="invoice createinvoice" ng-show="showInvoiceContent">\r\n\r\n    <div class="md-whiteframe-8dp-">\r\n        <div id="recurring" ng-init="disableRecurring()">\r\n        </div>\r\n            <div class="recurring md-padding" ng-show="showRecurringOptions">\r\n            <!--Type-->\r\n            <div layout="row">\r\n                <div flex="50"><h4 class="md-title">Recurring Invoice</h4></div>\r\n                <div flex="50" align="right">\r\n                     <md-button\r\n                        class="md-mini md-fab md-rasied md-primary md-hue-2"\r\n                        ng-click="disableRecurring();"\r\n                        aria-label="Not Mark">\r\n                        <md-icon md-font-icon="fa fa fa-times"></md-icon>\r\n                    </md-button>\r\n\r\n                </div>\r\n            </div>\r\n\r\n\r\n            <div layout="row" layout-xs="column" layout-align="start start" >\r\n                <div flex="40">\r\n\r\n                    <md-input-container class="md-block">\r\n                    <label>Template Name</label>\r\n                    <input\r\n                    name="recurring_name"\r\n                    type="text"\r\n                    ng-model="Recurring.Name"\r\n                    ng-required="showRecurringOptions"\r\n                    >\r\n                     <div ng-messages="createnew.recurring_name.$error" >\r\n                        <div ng-message="required">You <b>must</b> have a template name.</div>\r\n                    </div>\r\n                    </md-input-container>\r\n\r\n                </div>\r\n\r\n                <!--<div flex="15">\r\n                    <md-input-container class="md-block">\r\n                        <label>Type</label>\r\n                        <md-select\r\n                        name="recurring_type"\r\n                        placeholder="Type"\r\n                        ng-model="Recurring.Type"\r\n                        >\r\n                        <md-option ng-value="type" ng-repeat="(key,type) in [\'Scheduled\',\'Reminder\']">{{type}}</md-option>\r\n                        </md-select>\r\n                    </md-input-container>\r\n                </div>\r\n                <div flex="20">\r\n                    <md-input-container ng-show="Recurring.Type==\'Scheduled\'" class="md-block">\r\n                        <label>Create</label>\r\n                        <input\r\n                        name="create_days"\r\n                        ng-model="Recurring.Days"\r\n                        type="number"\r\n                        min="0"\r\n                        max="100"\r\n\r\n                        >\r\n                        <div class="hint">days in advance.</div>\r\n                         <div ng-messages="createnew.create_days.$error" >\r\n                            <div ng-message="max">Maximum <b>100</b> days</div>\r\n                        </div>\r\n                    </md-input-container>\r\n\r\n                    <md-input-container ng-show="Recurring.Type==\'Reminder\'" class="md-block">\r\n                        <label>Remind</label>\r\n                        <input\r\n\r\n                        name="reminder_days"\r\n                        ng-model="Recurring.Days"\r\n                        type="number"\r\n                        min="0"\r\n                         >\r\n                        <div class="hint"> days before the transaction date.</div>\r\n                    </md-input-container>\r\n                </div>-->\r\n\r\n            </div>\r\n            <!--Type-->\r\n\r\n\r\n            <!--Recurring Paramter-->\r\n            <!--ng-click="restValue()" -->\r\n            <div layout="row">\r\n                <md-input-container flex="50">\r\n                    <label>Interval</label>\r\n                    <md-select\r\n                    name="recurring_interval"\r\n                    placeholder="Interval"\r\n                    ng-model="Recurring.Interval.Mode"\r\n\t\t\t\t\tng-change="validateRecurringInterval();"\r\n\r\n                    >\r\n                    <md-option\r\n                    ng-value="interval.value"\r\n                    ng-repeat="interval in intervals">{{interval.name}}\r\n                    </md-option>\r\n\r\n                    </md-select>\r\n                </md-input-container>\r\n\r\n                <!-- Daily Drop Down Vales-->\r\n                <!--<md-input-container flex="5" ng-show="Recurring.Interval.Mode==\'D\'">\r\n                    <label>Every</label>\r\n                    <input\r\n                    name="every_days"\r\n                    type="number"\r\n                    ng-model="Recurring.Interval.Every"\r\n                    min="0"\r\n                    >\r\n                    <div class="hint">day(s).</div>\r\n                </md-input-container>-->\r\n\r\n\r\n                <!-- WEEKLY Drop Down Vales-->\r\n                <!--<md-input-container flex="5" ng-show="Recurring.Interval.Mode==\'W\'">\r\n                    <label>Every</label>\r\n                    <input\r\n                    name="every_week"\r\n                    type="number"\r\n                    ng-model="Recurring.Interval.Every"\r\n                    min="0"\r\n                     >\r\n                    <div class="hint">week(s).</div>\r\n                </md-input-container>-->\r\n\r\n                <!--<md-input-container flex="15" ng-show="Recurring.Interval.Mode==\'W\'">\r\n                    <label>Week(s) on</label>\r\n                    <md-select\r\n\r\n                    placeholder="Week(s) on"\r\n                    ng-model="Recurring.Interval.On"\r\n\r\n                    >\r\n                        <md-option\r\n                        ng-value="week.value"\r\n                        ng-repeat="week in weeks"\r\n                        >{{week.name}}</md-option>\r\n                    </md-select>\r\n                </md-input-container>-->\r\n\r\n                <!-- Month Drop Down Vales-->\r\n\r\n                <!--<md-input-container flex="10" ng-show="Recurring.Interval.Mode==\'M\'">\r\n                    <label>On</label>\r\n                    <md-select\r\n                    placeholder="On"\r\n                    ng-model="Recurring.Interval.On"\r\n\r\n                    >\r\n                        <md-option ng-value="monthoption.value" ng-repeat="monthoption in monthoptions">{{monthoption.name}}</md-option>\r\n                    </md-select>\r\n                </md-input-container>-->\r\n\r\n\r\n                <!--<md-input-container\r\n                    flex="10"\r\n                    ng-show="\r\n                    Recurring.Interval.Mode==\'M\' &&\r\n                    Recurring.Interval.On!=\'day\'\r\n                    ">\r\n                    <md-select\r\n                    ng-model="Recurring.Interval.Of"\r\n                    >\r\n                        <md-option ng-value="week.value" ng-repeat="week in weeks">{{week.name}}</md-option>\r\n                    </md-select>\r\n                </md-input-container>-->\r\n\r\n\r\n                <!--<md-input-container\r\n                    flex="10"\r\n                    ng-show="\r\n                    Recurring.Interval.Mode==\'M\' &&\r\n                    Recurring.Interval.On==\'day\'\r\n                    "\r\n                    >\r\n\r\n                    <md-select\r\n                    ng-model="Recurring.Interval.Of"\r\n                    >\r\n                        <md-option ng-value="month" ng-repeat="month in months">{{month | ordinal}}</md-option>\r\n                    </md-select>\r\n                </md-input-container>-->\r\n\r\n                <!--<md-input-container flex="5" ng-show="Recurring.Interval.Mode==\'M\'">\r\n                    <label>Every</label>\r\n                    <input\r\n                    name="every_week"\r\n                    ng-model="Recurring.Interval.Every"\r\n                    type="number"\r\n                    min="0"\r\n\r\n                    >\r\n                    <div class="hint">month(s)</div>\r\n                </md-input-container>-->\r\n\r\n\r\n                <!-- Yearly Drop Down Vales-->\r\n                <md-input-container flex="10" ng-show="Recurring.Interval.Mode==\'Y\'">\r\n                    <label>Every</label>\r\n                    <md-select\r\n                    placeholder="Every"\r\n                    ng-model="Recurring.Interval.Every"\r\n                    md-on-open="loadingProgress()"\r\n                    >\r\n                        <md-option\r\n                        ng-value="monthdropdownlist.value"\r\n                        ng-repeat="monthdropdownlist in monthdropdownlists">{{monthdropdownlist.name}}</md-option>\r\n                    </md-select>\r\n                </md-input-container>\r\n\r\n                <md-input-container flex="10" ng-show="Recurring.Interval.Mode==\'Y\'">\r\n                    <md-select\r\n                    ng-model="Recurring.Interval.On" >\r\n                        <md-option\r\n                        ng-value="month" ng-repeat="month in months">{{month}}th</md-option>\r\n                    </md-select>\r\n                </md-input-container>\r\n\r\n                <!-- Recurring  End Parameter-->\r\n                <md-input-container flex="20" >\r\n                    <label>Start Date</label>\r\n                    <md-datepicker\r\n                    name="startDate"\r\n                    ng-model="Recurring.StartDate"\r\n                    md-placeholder=""\r\n                    ng-required="showRecurringOptions"\r\n\t\t\t\t\tng-change="validateRecurringInterval();"\r\n\r\n                    >\r\n                    </md-datepicker>\r\n                     <div ng-messages="createnew.startDate.$error" >\r\n                        <div ng-message="required">You <b>must</b> have a start date.</div>\r\n                    </div>\r\n                </md-input-container>\r\n                <md-input-container flex="10" >\r\n                    <label>End</label>\r\n                    <md-select\r\n                        placeholder="End"\r\n                        ng-model="Recurring.End"\r\n                        >\r\n                        <md-option\r\n                        ng-value="dailyend.value"\r\n                        ng-repeat="dailyend in dailyends"\r\n                        >{{dailyend.name}}\r\n                        </md-option>\r\n                    </md-select>\r\n                </md-input-container>\r\n\r\n\r\n\r\n                <md-input-container flex="20" ng-show="Recurring.End==\'by\'">\r\n                    <label>End Date</label>\r\n                    <md-datepicker\r\n                    name="endDate"\r\n                    ng-model="Recurring.EndDate"\r\n                    md-placeholder=""\r\n\t\t\t\t\tmd-min-date="Recurring.StartDate"\r\n                    ng-required="requiredRecurringEndDate"\r\n\t\t\t\t\tng-change="validateRecuringEndDate();"\r\n                    >\r\n\r\n                </md-datepicker>\r\n                 <div ng-messages="createnew.endDate.$error" >\r\n                        <div ng-message="required">You <b>must</b> have a end date.</div>\r\n                    </div>\r\n\t\t\t\t<div ng-show="showRecEndDateError" style="color:#FF0000; font-size:12px;">End date should be according to the selected interval</div>\r\n                </md-input-container>\r\n\r\n                <md-input-container flex="10" ng-show="Recurring.End==\'after\'">\r\n                    <label>occurrences</label>\r\n                    <input\r\n                    type="number"\r\n                    name="occurrences"\r\n                    ng-model="Recurring.Occurrence"\r\n                    min="1"\r\n                    max="100"\r\n                    ng-required="requiredRecurringOccurences"\r\n                    >\r\n                    <div class="hint"></div>\r\n                     <div ng-messages="createnew.occurrences.$error" >\r\n                        <div ng-message="required">You <b>must</b> have a recurring occurrences.</div>\r\n                    </div>\r\n                    <div ng-messages="createnew.occurrences.$error" >\r\n                        <div ng-message="min">Minimum <b>100</b> occurrences</div>\r\n                        <div ng-message="max">Maximum <b>100</b> occurrences</div>\r\n                    </div>\r\n                </md-input-container>\r\n\r\n            </div>\r\n            <!--Recurring Paramter-->\r\n\r\n            <!--Payment Setup-->\r\n\r\n            <div layout="row" layout-xs="column" layout-align="start start" ng-show="vm.selectedCustomer.DisplayName!=null">\r\n                <div flex="30">\r\n                     <div id="payment_error" ></div>\r\n\r\n                     <!---palette-background="light-green:700"-->\r\n                     <md-button class="md-raised"  ng-click="setupPayment()" aria-label="Customer Payment">\r\n                       <md-progress-linear class="md-primary" md-mode="indeterminate" style="height:1px;" ng-show="showProfileGetProgress"></md-progress-linear>\r\n\r\n                        <img align="right" src="assets/images/cardicons/visa.png" flex="10">\r\n                        <img align="right" src="assets/images/cardicons/mastercard.png" flex="10">\r\n                        <img align="right" src="assets/images/cardicons/discover.png" flex="10">\r\n                        <img align="right" src="assets/images/cardicons/amex.png" flex="10">\r\n                        &nbsp;\r\n                        <span class="md-subtitle" ng-if="CCProfileResponse.profile_id==null">Setup Customer Payment\r\n\r\n                        </span>\r\n                        <span class="md-subtitle" ng-if="CCProfileResponse.profile_id > 0">\r\n                            <i class="fa fa-check-circle" aria-hidden="true" style="color:#2ABBD7;"></i>&nbsp;Edit Profile</span>\r\n\r\n                    </md-button>\r\n                    <div class="md-padding md-whiteframe-1dp" ng-show="isCCProfileCreated==true">\r\n                        <h4 class="md-subtitle">Customer Profile Info</h4>\r\n                        <p class="md-caption">\r\n                            <b>{{CCProfileResponse.card_type}}</b>, xxxx-xxxx-xxxx-{{CCProfileResponse.last_digits}}<br>\r\n                            {{CCProfileResponse.create_date}}\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div layout="row" layout-xs="column" layout-align="start start" class="md-padding">\r\n            <div flex>\r\n                  <md-autocomplete\r\n                      md-input-name="searchCustomerField"\r\n                      md-selected-item="vm.selectedCustomer"\r\n                      md-search-text="vm.searchCustomer"\r\n                      md-selected-item-change="vm.selectedCustomerChange(item)"\r\n                      md-items="item in vm.customerSearch(vm.searchCustomer)"\r\n                      md-item-text="item.DisplayName"\r\n\r\n                      md-no-cache="true"\r\n                      md-min-length="0"\r\n                      required\r\n                      md-require-match\r\n                      placeholder="Customer"\r\n                      md-floating-label="Select a customer"\r\n                      >\r\n\r\n                     <md-item-template>\r\n                        <span md-highlight-text="vm.searchCustomer" md-highlight-flags="^i">{{item.DisplayName}}</span>\r\n                    </md-item-template>\r\n                     <md-not-found  >\r\n                        <a ng-click="addNewCustomer(vm.searchCustomer)" class="md-primary md-raised md-subtitle addnew_link" permission permission-only="\'customer-addnew\'">\r\n                            <md-icon md-font-icon="fa fa-plus" class="md-primary" style="font-size:14px;"></md-icon>&nbsp; Add {{vm.searchCustomer}}</a>\r\n                    </md-not-found>\r\n                     <div ng-messages="createnew.searchCustomerField.$error" >\r\n                        <div ng-message="required">You <b>must</b> have a customer.</div>\r\n                        <div ng-message="md-require-match">Please select an existing customer.</div>\r\n                        <div ng-message="minlength">Your entry is not long enough.</div>\r\n                        <div ng-message="maxlength">Your entry is too long.</div>\r\n                    </div>\r\n                  </md-autocomplete>\r\n                <!--Customer Search-->\r\n\r\n            </div>\r\n            <div flex>\r\n                <md-input-container class="md-block">\r\n                    <label>Email Address</label>\r\n                    <input\r\n                    name="BillEmail"\r\n                    type="email"\r\n                    ng-model="invoice.BillEmail.Address"\r\n                    >\r\n                     <div ng-messages="createnew.BillEmail.$error" md-auto-hide="false" >\r\n                        <div ng-message when="email">\r\n                            <span translate>Please enter a valid email address</span>\r\n                        </div>\r\n                    </div>\r\n                </md-input-container>\r\n\r\n                <!--Customer Search-->\r\n            </div>\r\n             <div flex>\r\n                &nbsp;\r\n             </div>\r\n            <div flex>\r\n                <md-input-container ng-show="preferences.SalesFormsPrefs.CustomTxnNumbers">\r\n                    <label>Invoice no.</label>\r\n                    <input\r\n                    name="DocNumber"\r\n                    type="text"\r\n                    ng-model="invoice.DocNumber"\r\n                    ng-maxlength="1000"\r\n                    ng-required="preferences.SalesFormsPrefs.CustomTxnNumbers"\r\n                    >\r\n                    <div ng-messages="createnew.DocNumber.$error" ng-if="createnew.DocNumber.$touched" md-auto-hide="false">\r\n                        <div ng-message="required">You <b>must</b> have a Invoice number.</div>\r\n                        <p ng-message when="maxlength">Invoice number should not be greater than 1000 characters</p>\r\n                    </div>\r\n                </md-input-container>\r\n            </div>\r\n        </div>\r\n        <!--Row 1-->\r\n        <div layout="row" layout-xs="column" layout-align="center stretch" class="debug-border">\r\n            <div flex class="md-padding" style="padding-bottom:0px !important;">\r\n               <div class="address" ng-show="vm.customerInfo.billing.line1!=\'\'">\r\n                    <h4 class="md-subtitle">Billing Address</h4>\r\n                    <p class="md-caption">\r\n                        <b>{{vm.customerInfo.company_name | customInfo:\'\'}}</b><br>\r\n                        {{vm.customerInfo.billing.line1 | customInfo:\',\'}}<br>\r\n                        {{vm.customerInfo.billing.city | customInfo:\',\'}}\r\n                        {{vm.customerInfo.billing.countryCode | customInfo:\',\'}}\r\n                        {{vm.customerInfo.billing.country | customInfo:\',\'}}\r\n                        {{vm.customerInfo.billing.postal_code | customInfo:\'\'}}\r\n                    </p>\r\n                </div>\r\n            </div>\r\n            <div flex class="debug-border">\r\n                <md-input-container>\r\n                    <label>Terms</label>\r\n                    <md-select placeholder="Term" ng-model="invoice.SalesTermRef.value" md-on-open="loadingProgress()" style="width:100px;" ng-change="setTerm();">\r\n                        <md-option ng-value="term.Id" ng-repeat="term in invoiceTerm">{{term.Name}}</md-option>\r\n                    </md-select>\r\n                </md-input-container>\r\n            </div>\r\n            <div flex class="debug-border">\r\n\r\n                <md-input-container ng-hide="showRecurringOptions">\r\n                <label>Invoice Date</label>\r\n                <md-datepicker\r\n                ng-model="invoice.TxnDate"\r\n                md-placeholder="Invoice Date"\r\n                aria-label="Invoice Date"\r\n                ng-change="setTerm();"\r\n\r\n                ></md-datepicker>\r\n                </md-input-container>\r\n            </div>\r\n            <div flex >\r\n                <md-input-container ng-hide="showRecurringOptions">\r\n                <label>Due Date</label>\r\n                <md-datepicker\r\n                ng-model="invoice.DueDate"\r\n                md-placeholder="Due Date"\r\n                aria-label="DueDate"\r\n\r\n                ></md-datepicker>\r\n                </md-input-container>\r\n            </div>\r\n        </div>\r\n\r\n        <div layout="row" layout-xs="column" layout-align="center start">\r\n\r\n            <div flex="100" class="md-padding">\r\n\r\n                <tri-widget flex title="" content-layout="column" content-layout-align="center">\r\n\r\n                    <md-table-container id="addnew-invoice-listing">\r\n                        <table md-table class="md-data-table">\r\n                            <thead md-head>\r\n                                <tr md-row>\r\n                                    <th md-column width="10%" style="text-align:center !important;">S #.</th>\r\n                                    <th md-column width="25%">PRODUCT/SERVICES</th>\r\n                                    <th md-column class="col5" width="25%">DESCRIPTION</th>\r\n                                    <th md-column class="col4" width="10%">QTY</th>\r\n                                    <th md-column class="col4" width="10%">RATE/PRICE</th>\r\n                                    <th md-column class="" width="10%">AMOUNT</th>\r\n                                    <th md-column class="" width="10%">TAX</th>\r\n                                    <th md-column  ng-show="HavingClassObj" >Class</th>\r\n                                    <th md-column class="" width="10%"></th>\r\n\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody md-body ng-model="invoice.items" ng-init="current=1">\r\n                                <tr\r\n                                md-row\r\n                                ui-sortable="sortableOptions"\r\n                                ng-repeat="(key,item) in invoice.Line"\r\n                                ng-if="item.DetailType==\'SalesItemLineDetail\'"\r\n\r\n                                >\r\n                                    <td md-cell ng-init="current=getId()"  align="center" style="text-align:center !important;">\r\n                                        {{$index+1}}\r\n                                        <!--{{vm.sno}}-->\r\n                                        <!--\r\n                                        <i class="fa fa-bars fa-1x tDrag">&nbsp;</i>\r\n                                           -->\r\n                                    </td>\r\n                                    <td md-cell>\r\n                                        <md-autocomplete\r\n\r\n                                        md-input-name="searchProductField{{$index}}"\r\n                                        md-selected-item="vm.selectedProduct[$index]"\r\n                                        md-search-text="vm.searchProduct[$index]"\r\n                                        md-items="item in vm.itemSearch(vm.searchProduct[$index])"\r\n                                        md-selected-item-change="vm.selectedItemChange(item,key)"\r\n                                        md-item-text="item.Name"\r\n                                        md-no-cache="true"\r\n                                        md-min-length="0"\r\n                                        required\r\n                                        md-require-match\r\n                                        placeholder="Customer"\r\n                                        md-floating-label="Select a product/service"\r\n                                        >\r\n                                            <md-item-template>\r\n                                                <span md-highlight-text="vm.searchProduct">{{item.Name}}</span>\r\n                                            </md-item-template>\r\n                                            <md-not-found>\r\n                                                <a ng-click="addNewItem(vm.searchProduct[key],key)" class="md-primary md-raised md-subtitle addnew_link"\r\n                                                permission permission-only="\'item-addnew\'">\r\n                                                    <md-icon md-font-icon="fa fa-plus" class="md-primary" style="font-size:14px;"></md-icon>&nbsp; Add {{vm.searchProduct[key]}}</a>\r\n                                            </md-not-found>\r\n\r\n                                            <div ng-messages="true" >\r\n                                            <div ng-message="required">You <b>must</b> have a item selected.</div>\r\n                                            <div ng-message="md-require-match">Please select an existing Item.</div>\r\n                                            <div ng-message="minlength">Your entry is not long enough.</div>\r\n                                            <div ng-message="maxlength">Your entry is too long.</div>\r\n                                          </div>\r\n                                        </md-autocomplete>\r\n\r\n\r\n                                    </td>\r\n                                    <td md-cell class="col5">\r\n\r\n                                        <md-input-container  class="md-block">\r\n                                            <input\r\n                                            name="Description{{$index}}"\r\n                                            type="text"\r\n                                            placeholder="Description"\r\n                                            ng-model="item.Description"\r\n                                            ng-maxlength="1000"\r\n                                            >\r\n                                            <div ng-messages="createnew[\'Description\'+$index].$error">\r\n                                            <p ng-message when="maxlength">Description cannot be greater than 1000 characters</p>\r\n                                        </div>\r\n                                        </md-input-container>\r\n                                    </td>\r\n\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t<td md-cell class="text-right">\r\n                                        <md-input-container>\r\n                                            <input\r\n                                            name="QTY{{$index}}"\r\n                                            type="number"\r\n                                            placeholder="QTY"\r\n                                            ng-model="item.SalesItemLineDetail.Qty"\r\n                                            ng-change="calculateTotal();"\r\n                                            min="1"\r\n                                            >\r\n                                            <div ng-messages="createnew[\'QTY\'+$index].$error" md-auto-hide="false">\r\n\r\n                                                <p ng-message when="min">Should be greater than 0</p>\r\n                                            </div>\r\n                                        </md-input-container>\r\n\r\n\r\n                                    </td>\r\n                                    <td md-cell class="text-right col4">\r\n                                        <md-input-container>\r\n                                            <input\r\n                                            name="UnitPrice{{$index}}"\r\n                                            type="text"\r\n                                            placeholder="RATE/PRICE"\r\n                                            ng-model="item.SalesItemLineDetail.UnitPrice"\r\n                                            ng-change="calculateTotal();"\r\n                                            number-formatter\r\n                                            ng-pattern="/^[0-9.,]+$/"\r\n                                            min="1"\r\n                                            step="any"\r\n                                            >\r\n                                            <div ng-messages="createnew[\'UnitPrice\'+$index].$error" md-auto-hide="false">\r\n                                            <p ng-message when="number">Provide a valid rate / price</p>\r\n                                            <p ng-message when="min">Should be greater than 0</p>\r\n                                            <p ng-message when="pattern">Invalid input</p>\r\n                                        </div>\r\n                                        </md-input-container>\r\n\r\n                                    </td>\r\n\r\n                                    <td md-cell class="text-right">\r\n                                        <md-input-container>\r\n                                            {{item.Amount=item.SalesItemLineDetail.UnitPrice*item.SalesItemLineDetail.Qty | currency}}\r\n                                        </md-input-container>\r\n                                    </td>\r\n                                    <td\r\n\r\n                                    md-cell\r\n                                    class="text-right"\r\n                                    ng-mouseenter="showTaxable=true;showCheck=false"\r\n                                    ng-mouseleave="showTaxable=false;showCheck=true"\r\n\r\n                                    >\r\n\r\n                                        <md-checkbox\r\n\r\n                                        ng-model="item.SalesItemLineDetail.TaxCodeRef.value"\r\n\r\n                                        ng-true-value="\'TAX\'"\r\n                                        ng-false-value="\'NON\'"\r\n                                        ng-change="calculateTotal();"\r\n                                        >\r\n                                        </md-checkbox>\r\n\r\n                                        <!-- ng-show="showTaxable" <i class="fa fa-check"\r\n                                        aria-hidden="true"\r\n                                        ng-show="item.SalesItemLineDetail.TaxCodeRef.value==\'TAX\' && showCheck"\r\n                                        ></i>-->\r\n                                    </td>\r\n                                    <td md-cell class="text-right"  ng-show="HavingClassObj">\r\n\r\n\r\n\r\n                                        <md-input-container >\r\n\r\n                                            <md-select ng-model="item.SalesItemLineDetail.ClassRef.value" ng-model-options="{trackBy: \'$value.Id\'}"\r\n                                            style="\r\n                                          margin-top: -21px;\r\n                                          font-size: 16px;\r\n                                          min-width: 0;\r\n                                          min-height: 24px;\r\n                                          /* border-bottom: 1px !important; */\r\n                                          border-bottom-color: gray !important;border-bottom: 1 !important;"\r\n                                         >\r\n                                              <md-option ng-repeat="Class in ClassesItems" value="{{Class.Id}}"\r\n                                              ng-click="ClassDataGet(Class,$index)">{{Class.Name}}\r\n                                            <input type="hidden" ng-model="item.SalesItemLineDetail.ClassRef.Value" ng-value="{{Class.Id}}"/>\r\n                                              </md-option>\r\n                                            </md-select>\r\n                                          </md-input-container>\r\n\r\n                                  </td>\r\n\r\n\r\n                                    <td md-cell>\r\n\r\n                                        <md-button class="md-mini md-fab md-small" ng-click="removeItem(item,$index)" aria-label="Remove Item">\r\n\r\n                                            <md-icon md-font-icon="fa fa-trash-o"></md-icon>\r\n                                        </md-button>\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                            <tbody md-body>\r\n                                <!-- SUB TOTAL -->\r\n                                <tr\r\n                                md-row\r\n                                ng-repeat="(key,item) in invoice.Line"\r\n                                ng-if="item.DetailType==\'SubTotalLineDetail\' && item.Amount > 0"\r\n                                >\r\n                                    <td md-cell colspan="5" style="text-align:right !important">\r\n\r\n                                        <h4 class="md-body-2">Subtotal</h4>\r\n                                    </td>\r\n                                    <td md-cell>\r\n                                        <h4 class="md-body-2">{{item.Amount | currency}}</h4>\r\n                                    </td>\r\n                                    <td md-cell colspan="2"></td>\r\n                                </tr>\r\n                                <!-- TAX -->\r\n                                <tr md-row ng-show="preferences.TaxPrefs.UsingSalesTax && invoice.TotalAmt > 0">\r\n                                    <td md-cell colspan="4"></td>\r\n                                    <td md-cell style="text-align:right !important">\r\n\r\n                                        <md-select\r\n                                        placeholder="Select a sales tax rate"\r\n                                        ng-model="invoice.TxnTaxDetail.TaxLine[0].TaxLineDetail.TaxRateRef.value"\r\n\r\n                                        md-on-open="loadingProgress()"\r\n                                        ng-change="calculateTotal()"\r\n                                        align="right"\r\n\r\n                                        >\r\n                                        <md-option ng-value="tax.Id" ng-repeat="tax in taxRateDetail">{{tax.Name}} ({{tax.RateValue | number : 2}} %)</md-option>\r\n                                        </md-select>\r\n\r\n                                    </td>\r\n                                    <td md-cell>\r\n\r\n                                        <h4 class="md-body-2">{{invoice.TxnTaxDetail.TotalTax | currency}}</h4>\r\n                                    </td>\r\n                                    <td md-cell></td>\r\n                                </tr>\r\n                                <!-- DISCOUNT -->\r\n                                <tr\r\n                                md-row\r\n                                ng-repeat="(key,item) in invoice.Line"\r\n                                ng-if="item.DetailType==\'DiscountLineDetail\'"\r\n                                ng-show="preferences.SalesFormsPrefs.AllowDiscount && invoice.TotalAmt > 0"\r\n                                >\r\n\r\n                                    <td md-cell colspan="4" style="text-align:right !important"></td>\r\n                                    <td md-cell style="text-align:right !important">\r\n                                        <md-select\r\n                                            placeholder="Discount"\r\n                                            ng-model="item.DiscountLineDetail.PercentBased"\r\n                                            style="width:100px;"\r\n                                            ng-change="calculateTotal()"\r\n                                            >\r\n                                            <md-option\r\n                                            ng-value="discountType.value"\r\n                                            ng-repeat="discountType in discountTypes"\r\n                                            >{{discountType.text}}</md-option>\r\n                                        </md-select>\r\n                                    </td>\r\n                                    <td md-cell>\r\n\r\n                                        <md-input-container ng-if="item.DiscountLineDetail.PercentBased==true">\r\n                                            <input\r\n\r\n                                            type="number"\r\n                                            placeholder="Discount"\r\n                                            ng-model="item.DiscountLineDetail.DiscountPercent"\r\n                                            ng-change="calculateTotal();"\r\n                                            min="0"\r\n                                            >\r\n                                        </md-input-container>\r\n                                         <md-input-container ng-if="item.DiscountLineDetail.PercentBased==false">\r\n                                            <input\r\n                                            type="number"\r\n                                            placeholder="Discount"\r\n                                            ng-model="item.Amount"\r\n                                            ng-change="calculateTotal();"\r\n                                            min="0"\r\n                                            >\r\n                                        </md-input-container>\r\n\r\n                                    </td>\r\n                                    <td md-cell>\r\n                                        <h4 class="md-body-2">{{item.Amount | currency}}</h4>\r\n                                    </td>\r\n                                    <td md-cell></td>\r\n                                </tr>\r\n                                <!-- TOTAL -->\r\n                                <tr md-row ng-show="invoice.TotalAmt > 0">\r\n                                    <td md-cell colspan="5" style="text-align:right !important">\r\n                                        <h4 class="md-body-2">Total</h4>\r\n                                    </td>\r\n                                    <td md-cell>\r\n                                        <h4 class="md-body-2">{{invoice.TotalAmt | currency}}</h4>\r\n                                    </td>\r\n                                    <td md-cell colspan="2"></td>\r\n                                </tr>\r\n\r\n                                <!-- Add Lines -->\r\n                                <tr md-row>\r\n                                    <td md-cell colspan="7" class="add-new-item">\r\n\r\n                                        <md-button class="md-primary md-raised md-add-new" ng-click="addItem()">\r\n                                            <md-icon md-font-icon="fa fa-plus" style="font-size:14px;"></md-icon>&nbsp;Add Lines\r\n                                        </md-button>\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </md-table-container>\r\n                </tri-widget>\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div layout="row">\r\n            <div flex="100" class="md-padding">\r\n                <md-input-container class="md-block">\r\n                    <label>Message displayed on invoice</label>\r\n\r\n                    <input\r\n                    name="CustomerMemo"\r\n                    md-maxlength="150"\r\n                    md-no-asterisk\r\n                    name="description"\r\n                    ng-model="invoice.CustomerMemo.value"\r\n                    >\r\n                    <div ng-messages="createnew.CustomerMemo.$error">\r\n                      <div ng-message="md-maxlength">The Message must be less than 60 characters long.</div>\r\n                    </div>\r\n\r\n                </md-input-container>\r\n            </div>\r\n        </div>\r\n        <div style="width:90%;border:0px solid; position:fixed;bottom:5px;">\r\n            <div layout="row" layout-xs="column" layout-align="end end" >\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n</md-content>\r\n<div style="border:1px solid #000; bottom:0px; width:95% !important; height:50px; position:fixed;" palette-background="blue-grey:500">\r\n <div layout="row">\r\n        <div flex="33">\r\n             <md-button class="md-warn md-hue-2 md-raised md-add-new" ng-click="cancelInvoice()" >\r\n                <md-icon md-font-icon="fa fa-times " style="font-size:14px;"></md-icon>&nbsp;Cancel\r\n            </md-button>\r\n        </div>\r\n        <div flex="33" align="center" ng-init="spin=\'\';">\r\n                <md-button\r\n                class="md-primary md-raised md-add-new"\r\n                ng-click="enableRecurring();"\r\n                ng-mouseenter="spin=\'fa-spin fa-fw\';"\r\n                ng-mouseleave="spin=\'\';"\r\n\r\n                permission permission-only="\'recurring-addnew\'"\r\n                >\r\n                    <md-icon md-font-icon="fa fa-refresh {{spin}}" style="font-size:14px;"></md-icon>&nbsp;Make Recurring\r\n                </md-button>\r\n        </div>\r\n        <div flex="33" align="right">\r\n                <md-button\r\n                    class="md-add-new"\r\n                    type="submit"\r\n                    ng-class="{ \'md-primary md-raised\': createnew.$valid}"\r\n                    ng-disabled="disabledSubmitButton"\r\n\r\n                    >\r\n                    <md-icon md-font-icon="fa fa-plus" style="font-size:14px;"></md-icon>&nbsp;{{createInvoiceBtnTitle}}\r\n                </md-button>\r\n        </div>\r\n </dvv>\r\n</div>\r\n</form>\r\n'),
e.put("app/modules/invoice/createnew/item.addnew.html",'<md-dialog aria-label="Add New Product/Services">\r\n    <md-progress-linear class="md-primary" md-mode="indeterminate" ng-show="showProgress"></md-progress-linear>\r\n\r\n    <md-dialog-content class="addnewitem" style="min-width:700px;">\r\n\r\n        <md-progress-linear md-mode="indeterminate" ng-show="showProgress"></md-progress-linear>\r\n        <form class="md-padding" name="itemForm">\r\n            <h4 class="md-title">Product/Service information</h4>\r\n            <div layout="row">\r\n\r\n                <md-input-container flex="33">\r\n                    <label>Name</label>\r\n                    <input name="Name" type="text" md-autofocus ng-model="item.Name" required ng-maxlength="100">\r\n                    <div ng-messages="itemForm.Name.$error" md-auto-hide="false">\r\n                        <p ng-message when="required">Required field</p>\r\n                        <p ng-message when="maxlength">Maximum 100 characters allowed</p>\r\n                    </div>\r\n                </md-input-container>\r\n                <md-input-container flex="33">\r\n                    <label>SKU</label>\r\n                    <input name="Sku" type="text" ng-model="item.Sku" ng-maxlength="20">\r\n                    <div ng-messages="itemForm.Sku.$error" md-auto-hide="false">\r\n                        <p ng-message when="maxlength">Maximum 20 characters allowed</p>\r\n                    </div>\r\n                </md-input-container>\r\n                <md-input-container flex="33">\r\n                    <label>Sales price/rate</label>\r\n                    <input name="UnitPrice" type="number" ng-model="item.UnitPrice" ng-maxlength="10">\r\n                    <div ng-messages="itemForm.UnitPrice.$error" md-auto-hide="false">\r\n                        <p ng-message when="maxlength">Maximum 10 digits allowed</p>\r\n                    </div>\r\n                </md-input-container>\r\n\r\n            </div>\r\n            <div layout="row" layout-wrap>\r\n\r\n                <md-input-container flex="50">\r\n                    <label>Item Type </label>\r\n                    <md-select ng-model="item.Type" name="Type" ng-change="" required>\r\n                        <md-option ng-value="type" ng-repeat="type in [\'Service\',\'NonInventory\',\'Inventory\']">{{ type }}</md-option>\r\n                    </md-select>\r\n\r\n                    <div ng-messages="itemForm.Type.$error" md-auto-hide="false">\r\n                        <p ng-message when="required">Required field</p>\r\n                    </div>\r\n\r\n                </md-input-container>\r\n                <md-input-container flex="50">\r\n                    <label>Category</label>\r\n                    <md-select name="Category" ng-model="item.ParentRef.value" style="min-width:170px;">\r\n                        <md-option ng-value="">None</md-option>\r\n                        <md-option ng-value="category.Id" ng-repeat="category in categories">{{category.Name}}</md-option>\r\n                    </md-select>\r\n\r\n                    <div ng-messages="itemForm.Category.$error" md-auto-hide="false">\r\n                        <p ng-message when="required">Required field</p>\r\n                    </div>\r\n                </md-input-container>\r\n\r\n            </div>\r\n            <div layout="row" layout-wrap ng-show="enableMoreInventoryFields">\r\n\r\n                <md-input-container flex="33">\r\n                    <label>Initial quantity on hand</label>\r\n                    <input name="QtyOnHand" type="number" ng-model="item.QtyOnHand" ng-maxlength="10" ng-required="enableMoreInventoryFields">\r\n                    <div ng-messages="itemForm.QtyOnHand.$error" md-auto-hide="false">\r\n                        <p ng-message when="required">Required field</p>\r\n                        <p ng-message when="maxlength">Maximum 10 digits allowed</p>\r\n                    </div>\r\n                </md-input-container>\r\n\r\n                <md-input-container flex="33">\r\n                    <label>As of date</label>\r\n                    <md-datepicker name="InvStartDate" ng-model="item.InvStartDate" md-placeholder="" ng-required="enableMoreInventoryFields">\r\n                    </md-datepicker>\r\n                    <div ng-messages="itemForm.InvStartDate.$error" md-auto-hide="false">\r\n                        <p ng-message when="required">Required field</p>\r\n                    </div>\r\n                </md-input-container>\r\n\r\n                <md-input-container flex="33">\r\n                    <label>Inventory asset account</label>\r\n                    <md-select ng-model="item.AssetAccountRef.value" name="AssetAccountRef" ng-change="" ng-required="enableMoreInventoryFields">\r\n                        <md-option ng-value="account_name.Id" ng-repeat="account_name in account_asset">{{ account_name.Name}}&nbsp;&nbsp;&nbsp;{{ account_name.AccountType}}</md-option>\r\n                    </md-select>\r\n\r\n                    <div ng-messages="itemForm.AssetAccountRef.$error" md-auto-hide="false">\r\n                        <p ng-message when="required">Required field</p>\r\n                    </div>\r\n\r\n                </md-input-container>\r\n            </div>\r\n            <div layout="row" layout-wrap>\r\n                <md-input-container flex="33">\r\n                    <label>Expense account</label>\r\n                    <md-select name="ExpenseAccountRef" ng-model="item.ExpenseAccountRef.value" style="min-width:170px;max-width:170px;" required>\r\n                        <md-option ng-value="account_name.Id" ng-repeat="account_name in account_expense">{{ account_name.Name}}&nbsp;&nbsp;&nbsp;{{ account_name.AccountType}}</md-option>\r\n                    </md-select>\r\n                    <div ng-messages="itemForm.ExpenseAccountRef.$error" md-auto-hide="false">\r\n                        <p ng-message when="required">Required field</p>\r\n                    </div>\r\n                </md-input-container>\r\n                <md-input-container flex="33">\r\n                    <label>Income account</label>\r\n                    <md-select name="IncomeAccountRef" ng-model="item.IncomeAccountRef.value" style="min-width:170px;max-width:170px;" required>\r\n                        <md-option ng-value="account_name.Id" ng-repeat="account_name in account_income">{{ account_name.Name}}&nbsp;&nbsp;&nbsp;{{ account_name.AccountType}}</md-option>\r\n                    </md-select>\r\n                    <div ng-messages="itemForm.IncomeAccountRef.$error" md-auto-hide="false">\r\n                        <p ng-message when="required">Required field</p>\r\n                    </div>\r\n                </md-input-container>\r\n\r\n                <md-input-container flex="33">\r\n                    <label>Sales Information</label>\r\n                    <textarea name="Description" ng-model="item.Description" md-maxlength="1000"></textarea>\r\n                    <div ng-messages="itemForm.Description.$error" md-auto-hide="false">\r\n                        <p ng-message when="md-maxlength">Maximum 1000 characters allowed</p>\r\n                    </div>\r\n                </md-input-container>\r\n\r\n            </div>\r\n            <div layout="row" layout-align="end center" ng-hide="hideDialogActions">\r\n                <md-button class="md-primary md-raised" ng-click="addNew();" ng-disabled="itemForm.$invalid">Save</md-button>\r\n            </div>\r\n        </form>\r\n    </md-dialog-content>\r\n</md-dialog>'),e.put("app/modules/invoice/detail/bottom-sheet-grid-template.html",'\r\n<md-bottom-sheet class="bottomSheetdemoBasicUsage md-grid" layout="column">\r\n<md-toolbar class="toolbar-default margin-bottom-30 margin-top-0" palette-background="green:A700" style="margin-top:-1px !important; ">\r\n\r\n    <div class="md-toolbar-tools ">\r\n        <h2>\r\n          <span style="color:#fff !important;">Choose Invoice Template</span>\r\n        </h2>\r\n        <span flex></span>\r\n         <md-button palette-background="red:500" class="md-scale md-fab md-mini" style="margin-top:-50px;" ng-click="closeBottomSheet()" aria-label="Close">\r\n            <md-icon  md-font-icon="zmdi zmdi-close" style="color:#fff !important;"></md-icon>\r\n        </md-button>\r\n    </div>\r\n</md-toolbar>\r\n  <div ng-cloak style="height:260px;">\r\n    <md-list flex layout="row" layout-align="start center">\r\n     <md-virtual-repeat-container id="horizontal-container" md-orient-horizontal>\r\n      <div md-virtual-repeat="item in invoice_templates"\r\n          class="repeated-item" flex>\r\n          <img ng-src="{{item.small_image}}" ng-click="listItemClick(item)" ng-class="{\'md-whiteframe-9dp default_invoice_template\': item.id == invoice_template_id}" class="normal_invoice_template"  width="140" alt="{{item.name}}" style="cursor:pointer;z-index:-1; ">\r\n          <div class="md-grid-text " style="text-align:center"> {{ item.name }} </div>\r\n      </div>\r\n    </md-virtual-repeat-container>\r\n    </md-list>\r\n  </div>\r\n</md-bottom-sheet>\r\n\r\n'),e.put("app/modules/invoice/detail/invoice.detail.tmpl.html",'<style>\r\n    div#toolbarContainer {\r\n        display: none !important;\r\n    }\r\n\r\n    .parent-wapper {\r\n        margin-top: 5px;\r\n        margin-left: 20px;\r\n        margin-right: 10px;\r\n        margin-bottom: 18px;\r\n        width: 97%;\r\n        height: 150%;\r\n        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\r\n        transition: all 0.3s cubic-bezier(.25, .8, .25, 1);\r\n    }\r\n\r\n    div#errorWrapper {\r\n        display: none !important;\r\n    }\r\n\r\n    .pdfjs #viewerContainer {\r\n        overflow: inherit;\r\n\r\n    }\r\n\r\n    .pdf-container {\r\n        width: 100%;\r\n        height: 100%;\r\n    }\r\n\r\n    .pdfjs .pdfViewer .page {\r\n        width: 97%;\r\n        border: none !important;\r\n        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\r\n        margin-bottom: 50px;\r\n\r\n    }\r\n\r\n\r\n    .pdfjs #mainContainer {\r\n        margin-top: 10px;\r\n        margin-bottom: 100px;\r\n    }\r\n\r\n</style>\r\n\r\n\r\n<div ng-show="showProgress" class="loader padding-100" layout="column" layout-fill="" layout-align="center center">\r\n    <md-progress-linear md-mode="indeterminate"></md-progress-linear>\r\n</div>\r\n\r\n<div class="invoice_container" ng-show=\'!IsDefaultTemplate\'>\r\n\r\n    <div flex layout="row" id="invoice_detail_layout">\r\n        <md-content style="overflow: hidden; height: 100%;" flex="100" flex-gt-xs="100" flex-gt-lg="40" layout-padding>\r\n\r\n            <div flex layout="row" layout-align="end end" ng-show="fabMenu">\r\n\r\n                <md-button aria-label="Send Email" class="md-fab md-primary md-mini" ng-click="vm.subMenu(\'email\', $event)"\r\n                    permission="" permission-only="\'invoice-send\'">\r\n                    <md-icon md-font-icon="fa fa-paper-plane-o"></md-icon>\r\n                    <md-tooltip>Send Invoice</md-tooltip>\r\n                </md-button>\r\n                <md-button aria-label="Invoice Template" class="md-fab md-raised md-mini md-primary" ng-click="vm.subMenu(\'invoice_template\', $event)"\r\n                    permission="" permission-only="\'invoice-templates\'">\r\n                    <md-icon md-font-icon="fa fa-file-text"></md-icon>\r\n                    <md-tooltip>Invoice Template</md-tooltip>\r\n                </md-button>\r\n\r\n                <md-button aria-label="Invoice Print" class="md-fab md-raised md-mini md-primary" ng-click="vm.subMenu(\'invoice_print\', $event)"\r\n                    permission="" permission-only="\'invoice-print\'" ng-disabled="printProcess">\r\n                    <md-icon md-font-icon="{{printProcess==true ? \'fa fa-refresh fa-spin fa-3x\' : \'fa fa-print\'}}"></md-icon>\r\n                    <md-tooltip>Invoice Print</md-tooltip>\r\n                </md-button>\r\n\r\n                <md-button aria-label="Payment Method" class="md-fab md-raised md-mini md-primary" ng-click="vm.subMenu(\'payment_methods\', $event)"\r\n                    permission="" permission-only="\'invoice-paymentmethod\'">\r\n                    <md-icon md-font-icon="fa fa-list-alt"></md-icon>\r\n                    <md-tooltip>Payment Method</md-tooltip>\r\n                </md-button>\r\n\r\n                <md-button aria-label="Collect Payment" class="md-fab md-raised md-mini md-primary" ng-click="vm.subMenu(\'collect_payment\', $event)"\r\n                    permission="" permission-only="\'invoice-paymentmethod\'">\r\n                    <md-icon md-font-icon="fa fa-credit-card"></md-icon>\r\n                    <md-tooltip>Collect Payment</md-tooltip>\r\n                </md-button>\r\n\r\n                <md-button aria-label="Invoice Statistic" class="md-fab md-raised md-mini md-primary" ng-click="vm.subMenu(\'invoice_stats\', $event)"\r\n                    permission="" permission-only="\'invoice-statistics\'">\r\n                    <md-icon md-font-icon="fa fa-bar-chart"></md-icon>\r\n                    <md-tooltip>Invoice Statistics</md-tooltip>\r\n                </md-button>\r\n\r\n                <md-fab-speed-dial md-direction="up" md-open="vm.fabStatus" ng-class="vm.fabAnimation" permission=""\r\n                    permission-only="\'invoice-color\'">\r\n                    <md-fab-trigger>\r\n\r\n                        <md-button aria-label="share this post" class="md-fab md-mini md-primary" palette-background="{{vm.template_color}}:500"\r\n                            id="templateButton" ng-style="myClassObj.style">\r\n                            <md-icon md-font-icon="fa fa-paint-brush"></md-icon>\r\n                        </md-button>\r\n                    </md-fab-trigger>\r\n                    <md-fab-actions style="position:absolute;top:50px;right:10px;border:0px solid;width:300px;">\r\n\r\n                        <md-button aria-label="Twitter" class="md-fab md-raised md-mini" palette-background="red:500"\r\n                            ng-click="setTemplateTheme(\'#F44336\')" ng-hide="true">\r\n                        </md-button>\r\n\r\n                        <md-button aria-label="Twitter" class="md-fab md-raised md-mini" ng-repeat="(name,palette) in vm.palettes"\r\n                            palette-background="{{name}}:500" ng-click="setTemplateTheme(name,palette)">\r\n                        </md-button>\r\n                    </md-fab-actions>\r\n                </md-fab-speed-dial>\r\n            </div>\r\n\r\n            <div ng-show="isInvoicePaid" style="position:absolute; top:130px; right:100px;z-index:9999;opacity:0.4"\r\n                align="center">\r\n                <img src="assets/images/elements/paid.png" width="500" ng-show="displayPaidStamp">\r\n            </div>\r\n            <md-card class="page" layout-padding id="invoice_template" style="width: 98%; height: 100%;">\r\n                <div flex layout="row" layout-align="center center" id="invoice_template" style="width: 100%; height: 100%;">\r\n                    <div layout="row" layout-sm="column" layout-align="space-around">\r\n                        <md-progress-circular md-mode="indeterminate"></md-progress-circular>\r\n\r\n                    </div>\r\n\r\n                </div>\r\n            </md-card>\r\n        </md-content>\r\n    </div>\r\n    <md-sidenav class="md-sidenav-left md-whiteframe-z4 stat" md-component-id="statistics" style="min-width:490px !important;">\r\n\r\n        <md-toolbar class="md-theme-light">\r\n            <h1 class="md-toolbar-tools">Statistics</h1>\r\n            <md-progress-linear class="md-primary" md-mode="indeterminate" ng-show="vm.showInvoiceStatsProgress"></md-progress-linear>\r\n        </md-toolbar>\r\n        <md-content class="md-padding" ng-hide="vm.showInvoiceStatsProgress">\r\n            <div layout="row">\r\n                <div flex class="md-whiteframe-z1" style="padding:5px !important;">\r\n                    <div ng-repeat="group in vm.statisticsGroups">\r\n                        <span class="md-title">Invoice Email Statistics</span><br>\r\n                        <span class="md-subhead">Total Invoice Request : {{totalRequest}}</span>\r\n                        <md-list-item ng-init="stat" ng-repeat="stat in group.stats" layout="column" layout-align="space-around start">\r\n                            <md-tooltip md-direction="left">\r\n                                {{::stat.value}} / {{totalRequest}}\r\n                            </md-tooltip>\r\n                            <md-progress-linear class="request" md-mode="determinate" ng-value="::stat.value"\r\n                                md-buffer-value="60"></md-progress-linear>\r\n                            <p translate style="font-size:80%">{{stat.title}}</p>\r\n                        </md-list-item>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div layout="row">&nbsp;</div>\r\n            <div layout="row">\r\n                <div flex class="md-whiteframe-z1" style="padding:5px !important; ">\r\n                    <span class="md-title">Invoice Event Comparison</span>\r\n                    <span class="md-subhead">&nbsp;</span>\r\n                    <div style="width:60% !important; margin:0 auto;" align="center">\r\n                        <canvas class="chart-doughnut" chart-data="vm.pieData" chart-labels="vm.pieLabels" chart-legend="true"\r\n                            chart-options="vm.pieOptions"></canvas>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n            <div layout="row">&nbsp;</div>\r\n\r\n            <div layout="row">\r\n                <div flex-gt-sm="100" flex="100" class="md-whiteframe-z1" style="padding:5px !important;">\r\n                    <tri-table class="table" columns="vm.InvoiceStatsColumns" contents="vm.InvoiceStatsData" page-size="5"></tri-table>\r\n                </div>\r\n            </div>\r\n        </md-content>\r\n    </md-sidenav>\r\n</div>\r\n\r\n<div class="pdf-container" ng-show=\'IsDefaultTemplate\'>\r\n    <div flex layout="row" layout-align="end end" ng-show="fabMenu">\r\n\r\n        <md-button aria-label="Send Email" class="md-fab md-primary md-mini" ng-click="vm.subMenu(\'email\', $event)"\r\n            permission="" permission-only="\'invoice-send\'">\r\n            <md-icon md-font-icon="fa fa-paper-plane-o"></md-icon>\r\n            <md-tooltip>Send Invoice</md-tooltip>\r\n        </md-button>\r\n\r\n        <!-- <md-button ng-show=\'!IsDefaultTemplate\' aria-label="Invoice Template" class="md-fab md-raised md-mini md-primary" ng-click="vm.subMenu(\'invoice_template\', $event)"\r\n            permission="" permission-only="\'invoice-templates\'">\r\n            <md-icon md-font-icon="fa fa-file-text"></md-icon>\r\n            <md-tooltip>Invoice Template</md-tooltip>\r\n        </md-button> -->\r\n\r\n        <md-button aria-label="Invoice Print" class="md-fab md-raised md-mini md-primary" ng-click="vm.subMenu(\'invoice_print\', $event)"\r\n            permission="" permission-only="\'invoice-print\'" ng-disabled="printProcess">\r\n            <md-icon md-font-icon="{{printProcess==true ? \'fa fa-refresh fa-spin fa-3x\' : \'fa fa-print\'}}"></md-icon>\r\n            <md-tooltip>Invoice Print</md-tooltip>\r\n        </md-button>\r\n\r\n        <md-button aria-label="Payment Method" class="md-fab md-raised md-mini md-primary" ng-click="vm.subMenu(\'payment_methods\', $event)"\r\n            permission="" permission-only="\'invoice-paymentmethod\'">\r\n            <md-icon md-font-icon="fa fa-list-alt"></md-icon>\r\n            <md-tooltip>Payment Method</md-tooltip>\r\n        </md-button>\r\n\r\n        <md-button aria-label="Collect Payment" class="md-fab md-raised md-mini md-primary" ng-click="vm.subMenu(\'collect_payment\', $event)"\r\n            permission="" permission-only="\'invoice-paymentmethod\'">\r\n            <md-icon md-font-icon="fa fa-credit-card"></md-icon>\r\n            <md-tooltip>Collect Payment</md-tooltip>\r\n        </md-button>\r\n\r\n        <md-button aria-label="Invoice Statistic" class="md-fab md-raised md-mini md-primary" ng-click="vm.subMenu(\'invoice_stats\', $event)"\r\n            permission="" permission-only="\'invoice-statistics\'">\r\n            <md-icon md-font-icon="fa fa-bar-chart"></md-icon>\r\n            <md-tooltip>Invoice Statistics</md-tooltip>\r\n        </md-button>\r\n\r\n        <md-fab-speed-dial md-direction="up" md-open="vm.fabStatus" ng-class="vm.fabAnimation" permission=""\r\n            permission-only="\'invoice-color\'">\r\n            <!-- <md-fab-trigger>\r\n\r\n                <md-button ng-show=\'!IsDefaultTemplate\' aria-label="share this post" class="md-fab md-mini md-primary" palette-background="{{vm.template_color}}:500"\r\n                    id="templateButton">\r\n                    <md-icon md-font-icon="fa fa-paint-brush"></md-icon>\r\n                </md-button>\r\n        \r\n            </md-fab-trigger> -->\r\n            <md-fab-actions style="position:absolute;top:50px;right:10px;border:0px solid;width:300px;">\r\n\r\n                <md-button aria-label="Twitter" class="md-fab md-raised md-mini" palette-background="red:500" ng-click="setTemplateTheme(\'#F44336\')"\r\n                    ng-hide="true">\r\n                </md-button>\r\n\r\n                <md-button aria-label="Twitter" class="md-fab md-raised md-mini" ng-repeat="(name,palette) in vm.palettes"\r\n                    palette-background="{{name}}:500" ng-click="setTemplateTheme(name,palette)">\r\n                </md-button>\r\n            </md-fab-actions>\r\n        </md-fab-speed-dial>\r\n    </div>\r\n    <!-- <div class="parent-wapper"> -->\r\n    <pdfjs-viewer data=\'src\'></pdfjs-viewer>\r\n    <!-- </div> -->\r\n</div>\r\n'),e.put("app/modules/invoice/detail/payment_method_dialog.html",'\r\n<md-dialog aria-label="Payment Methdods" >\r\n<md-toolbar class="toolbar-default" md-theme="default">\r\n      <div class="md-toolbar-tools">\r\n        <h2>Choose Payment Method</h2>\r\n        <span flex></span>\r\n         <md-button class="md-icon-button" ng-click="cancel()">\r\n          <md-icon md-font-icon="zmdi zmdi-close"></md-icon>\r\n        </md-button>\r\n      </div>\r\n    </md-toolbar>\r\n  <md-dialog-content >\r\n      <div ng-cloak>\r\n\r\n        <div layout="column" layout-align="center center" layout-margin>\r\n            <div flex ng-repeat="item in payment_methods" ng-click="listItemClick(item)">\r\n               <img \r\n                ng-src="{{item.logo}}"   \r\n                class="normal_invoice_template" \r\n                width="140" alt="{{item.name}}" \r\n                style="cursor:pointer;z-index:-1; opacity:0.1" \r\n                ng-style="{ \'opacity\' : item.id == payment_default_id ? \'1.0\' : \'0.4\'}"\r\n                align="center"\r\n                ng-show="!isObjectEmpty(item.configuration)"\r\n                >\r\n                <i \r\n\r\n                class="zmdi zmdi-check-all zmdi-hc-2x" \r\n                ng-if="item.id == payment_default_id" \r\n                style="color:#2FC65A"\r\n\r\n                >\r\n                </i>\r\n                <i ng-if="item.id != payment_default_id">&nbsp;&nbsp;&nbsp;</i>\r\n            </div>\r\n        </div>\r\n    </div>\r\n  </md-dialog-content>\r\n</md-dialog>'),e.put("app/modules/invoice/detail/sendConfirmationDialog.html",'<style>\n    .edit-button-group.pull-right {\n    padding: 20px 2px 0px 0px !important;\n}\n</style>\n<md-dialog class="mobile-fullwidth-dialog">\n    <md-progress-linear class="md-primary" md-mode="indeterminate" ng-show="showProgress"></md-progress-linear>\n        <form name="emailForm" novalidate ng-submit="submit()">\n            <md-toolbar class="toolbar-default" md-theme="default">\n\n                <div class="md-toolbar-tools">\n                    <h2>\n                        <span>{{settings.title}}</span>\n                    </h2>\n                    <span flex></span>\n                    <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                        <md-icon md-font-icon="zmdi zmdi-close"></md-icon>\n                    </md-button>\n                </div>\n            </md-toolbar>\n\n            <md-divider></md-divider>\n\n            <md-dialog-content class="email-dialog md-padding">\n\n                <div layout="row">\n                    <div layout="column" flex>\n                        <span class="md-caption">To: </span>\n                        <md-chips ng-model="settings.InvoiceContacts.to_email" readonly="false" md-removable="true" md-enable-chip-edit="true" name="to_email" md-on-add="validateChip($chip,\'to\')" md-on-remove="validateChip($chip,\'to\')" placeholder="{{\'TO\' | triTranslate}}" secondary-placeholder="">\n                        </md-chips>\n\n                        <div class="email-dialog-ccs ng-hide" layout="column" ng-show="showCCS">\n                            <span class="md-caption">CC: </span>\n                            <md-chips style="padding-bottom:4px;" ng-model="settings.InvoiceContacts.cc_email" readonly="false" md-removable="true" md-enable-chip-edit="false" md-max-chips="3" name="bcc_email" md-on-add="validateChip($chip,\'cc\')" placeholder="{{\'CC\' | triTranslate}}" secondary-placeholder="">\n                            </md-chips>\n                            <span class="md-caption">BCC: </span>\n                            <md-chips style="padding-bottom: 52px;"\n                            ng-model="settings.InvoiceContacts.bcc_email" readonly="false" md-removable="true" md-enable-chip-edit="false" md-max-chips="3" name="bcc_email" md-on-add="validateChip($chip,\'bcc\')" placeholder="{{\'BCC\' | triTranslate}}" secondary-placeholder="">\n                            </md-chips>\n                        </div>\n                        <span class="md-caption">From: </span>\n                        <md-chips secondary-placeholder="{{\'From\' | triTranslate}}">\n                            <md-chip secondary-placeholder="{{\'From\' | triTranslate}}">{{settings.InvoiceContacts.sender_name}}\n                                <{{settings.InvoiceContacts.sender_email}}>\n                            </md-chip>\n\n                        </md-chips>\n                        <md-input-container flex="30" style="width:50%">\n                                <label>Template:</label>\n                                <md-select ng-model="selectedTemplate"  name="type" >\n                                <md-option ng-click="SelectedTemplateValue(template)" ng-repeat="template in settings.InvoiceContacts.template_email track by $index"\n                                ng-value="{{template}}" ng-selected="template.isSelected == true">{{template.name}}</md-option>\n\n                                </md-select>\n                              </md-input-container>\n\n                    </div>\n                    <md-button class="md-icon-button md-raised" ng-click="toggleCCS($event)" aria-label="toggle ccs">\n                        <md-icon md-font-icon ng-class="showCCSIcon"></md-icon>\n                    </md-button>\n                </div>\n            </md-dialog-content>\n            <md-dialog-actions layout="row">\n                <span flex></span>\n                <md-button class="md-primary md-raised" type=\'submit\' ng-disabled="disabledSubmitButton" aria-label="send" translate="Send" >Send</md-button>\n            </md-dialog-actions>\n        </form>\n    </md-dialog>\n'),e.put("app/modules/invoice/legaldocument/legaldocument.html",'            \r\n<md-dialog aria-label="Legal Document">\r\n    <md-dialog-content style="min-width:850px !important;">\r\n      <div class="md-dialog-content" id="legal_document">\r\n        \r\n      </div>\r\n    </md-dialog-content>\r\n\r\n    <md-dialog-actions layout="row" ng-hide="hideDialogActions2" >\r\n      <md-progress-linear md-mode="indeterminate" ng-show="showProgress"></md-progress-linear>\r\n      \r\n      <md-button  ng-click="print()" class="md-primary md-raised">\r\n         <md-icon md-font-icon="fa fa-print" style="font-size:14px;"></md-icon></md-icon>&nbsp;Print\r\n      </md-button>\r\n  \r\n      <md-button  ng-click="cancel()" class="md-primary md-raised">\r\n         <md-icon md-font-icon="fa fa-process"></md-icon></md-icon>&nbsp;Continue\r\n      </md-button>\r\n\r\n    </md-dialog-actions>\r\n\r\n</md-dialog>\r\n'),e.put("app/modules/invoice/linking/link.invoice.html",'            \r\n<md-dialog aria-label="Invoice Link">\r\n    <md-dialog-content class="md-padding" style="width:400px !important; max-width:400px;">\r\n        <h3>Copy Invoice link</h3>\r\n        \r\n        <p ng-repeat="(key,value) in textToCopy" >\r\n            <a href="{{value}}"  style="text-overflow: ellipsis; word-wrap:break-word !important;" target="_blank">{{stripText(value)}}</a>   \r\n            <br>\r\n        </p>\r\n    \r\n    </md-dialog-content>\r\n    \r\n    <md-dialog-actions layout="row" class="invoice_action" >\r\n      \r\n      <md-button clipboard supported="supported" text="allLinks" on-copied="success()" on-error="fail(err)"  class="md-raised md-primary" aria-label="Copy" >Copy</md-button>\r\n\r\n    </md-dialog-actions>\r\n\r\n</md-dialog>\r\n\r\n'),e.put("app/modules/invoice/listing/invoice-listing.tmpl.html",'<style>\r\n    .notification md-list-item p span{\r\nbackground:transparent !important;\r\nfont-weight: bold;\r\n}\r\n</style>\r\n<div ng-show="vm.isInvoiceLoaded" class="loader padding-100" layout="column" layout-fill="" layout-align="center center">\r\n    <md-progress-linear class="margin-bottom-20" md-mode="indeterminate" ng-show="vm.isInvoiceLoaded"></md-progress-linear>\r\n</div>\r\n\r\n\r\n<div ng-show="!vm.isInvoiceLoaded">\r\n    <!--<md-sidenav class="md-sidenav-right md-whiteframe-z4" md-component-id="gateway_sync" style="min-width:280px !important;">\r\n    <md-toolbar class="md-theme-light">\r\n    <div layout="row" layout-align="center center">\r\n        <div flex="70">\r\n            <h1 class="md-toolbar-tools">Gateway Sync</h1>\r\n        </div>\r\n        <div flex="30">\r\n            <md-button class="md-fab md-mini" aria-label="Sync" >\r\n                <md-icon md-font-icon="fa fa-refresh" style="color: rgb(255, 152, 0)"></md-icon>\r\n            </md-button>\r\n        </div>\r\n    </div>\r\n    </md-toolbar>\r\n    <md-content>\r\n        <md-list class="md-dense notification" flex style="min-height:500px;">\r\n            <md-subheader class="md-no-sticky">{{vm.notifications.length}} transactions (QuickBooks)</md-subheader>\r\n            <md-list-item class="md-3-line" ng-repeat="notification in vm.notifications">\r\n              <md-icon md-font-icon="zmdi zmdi-alert-triangle" style="color: rgb(255, 152, 0)"></md-icon>\r\n              <div class="md-list-item-text" layout="column">\r\n                <h3 style="padding-top:5px;">Invoice #{{notification.invoice_no}} {{notification.customer_name}}</h3>\r\n                <h4>ID:{{notification.transaction_id}} | <span class="badge {{notification.status}} mp-caption" style="font-size:10px;">{{notification.status}}</span></h4>\r\n                <h4 style="font-size:16px;">{{notification.amount | currency}}</h4>\r\n                <p style="height:20px;"><span class="md-caption" am-time-ago="{{notification.date}}"></span></p>\r\n              </div>\r\n               <md-divider ></md-divider>\r\n        </md-list-item>\r\n\r\n    </md-content>\r\n</md-sidenav>-->\r\n\r\n\r\n    <md-sidenav class="md-sidenav-left md-whiteframe-z4" md-component-id="filter" style="min-width:280px !important;">\r\n        <md-toolbar class="md-theme-light">\r\n            <h1 class="md-toolbar-tools">Search</h1>\r\n        </md-toolbar>\r\n        <form flex="" name="vm.filter.form">\r\n            <md-content class="md-padding">\r\n                <div class="margin-bottom-20" layout="row" layout-align="space-around center">\r\n                    <label>From</label>\r\n                    <md-datepicker ng-model="from" md-placeholder=""></md-datepicker>\r\n                </div>\r\n                <div class="margin-bottom-20" layout="row" layout-align="space-around center">\r\n                    <label>To &nbsp;</label>\r\n                    <md-datepicker ng-model="to" md-placeholder=""></md-datepicker>\r\n                </div>\r\n                <md-input-container class="md-block"></md-input-container>\r\n                <md-input-container class="md-block">\r\n                    <label>Status</label>\r\n                    <md-select placeholder="Status" ng-model="vm.query.status">\r\n                        <md-option value="all">ALL</md-option>\r\n                        <md-option value="paid">PAID</md-option>\r\n                        <md-option value="dues">DUE</md-option>\r\n                        <md-option value="overdues">OVERDUE</md-option>\r\n                    </md-select>\r\n                </md-input-container>\r\n                <md-input-container class="md-block"></md-input-container>\r\n                <md-input-container class="md-block">\r\n                    <label>Invoice No.</label>\r\n                    <input name="Invoice No." name="Docnumber" type="text" ng-model="vm.query.docnumber">\r\n                </md-input-container>\r\n                <md-input-container class="md-block"></md-input-container>\r\n                <md-autocomplete md-selected-item="vm.selectedItem" md-search-text="vm.searchText" md-items="item in vm.querySearch(vm.searchText)"\r\n                    md-item-text="item.display" md-min-length="1" placeholder="Search Customer" md-autofocus>\r\n                    <md-item-template>\r\n                        <span md-highlight-text="vm.searchText" md-highlight-flags="^i">{{item.display}}</span>\r\n                    </md-item-template>\r\n                    <md-not-found>\r\n                        No customer matching.\r\n                    </md-not-found>\r\n                </md-autocomplete>\r\n\r\n                <md-button class="md-primary md-raised width-100" ng-click="vm.getInvoices(); vm.openSidebar(\'filter\')">\r\n                    Search\r\n                    <md-icon md-font-icon="zmdi zmdi-search"></md-icon>\r\n\r\n                </md-button>\r\n                <md-button class="md-primary md-raised width-100" ng-click="resetForm()">\r\n                    Clear\r\n                    <md-icon md-font-icon="zmdi zmdi-delete"></md-icon>\r\n                </md-button>\r\n\r\n            </md-content>\r\n        </form>\r\n    </md-sidenav>\r\n\r\n\r\n\r\n    <div layout="row" flex layout-align="start start" class="" style="padding:10px 0px 0px 10px !important;">\r\n        <div flex="90">\r\n            <md-button aria-label="search" class="md-primary md-raised md-small" ng-click="vm.createInvoice()" ng-if="buttonPermissions.invoice_addnew">\r\n                <md-icon md-font-icon="fa fa-plus" style="font-size:14px;"></md-icon>\r\n                <md-tooltip>Create Invoice</md-tooltip>\r\n            </md-button>\r\n            <md-button aria-label="search" class="md-primary md-raised md-small" ng-click="vm.openSidebar(\'filter\')"\r\n                ng-if="buttonPermissions.invoice_search">\r\n                <md-icon md-font-icon="fa fa-search" style="font-size:14px;"></md-icon>\r\n                <md-tooltip>Search Invoice</md-tooltip>\r\n            </md-button>\r\n            <md-button aria-label="print" class="md-primary md-raised md-small" ng-click="vm.printBulkInvoice();"\r\n                ng-show="showInvoiceToolBar" ng-if="buttonPermissions.invoice_print" ng-disabled="printProcess">\r\n                <md-icon md-font-icon="{{printProcess==true ? \'fa fa-refresh fa-spin fa-3x\' : \'fa fa-print\'}}" style="font-size:14px;"></md-icon>\r\n                <md-tooltip>Print Invoice</md-tooltip>\r\n            </md-button>\r\n            <md-button aria-label="send" class="md-primary md-raised md-small" ng-click="vm.sendBulkInvoice();" ng-show="showInvoiceEmailToolBar"\r\n                ng-if="buttonPermissions.invoice_send">\r\n                <md-icon md-font-icon="{{sendProcess==true ? \'fa fa-refresh fa-spin fa-3x\' : \'fa fa-paper-plane\'}}"\r\n                    style="font-size:14px;"></md-icon>\r\n                <md-tooltip>Send Invoice</md-tooltip>\r\n            </md-button>\r\n            <md-button aria-label="comment" class="md-primary md-raised md-small" ng-click="vm.paymentInvoice();"\r\n                ng-show="showInvoicePaymentButton" ng-if="buttonPermissions.invoice_payment">\r\n                <md-icon md-font-icon="fa fa-credit-card" style="font-size:14px;"></md-icon>\r\n                <md-tooltip>Collect Payment</md-tooltip>\r\n            </md-button>\r\n\r\n            <md-button aria-label="send" class="md-primary md-raised md-small" ng-click="vm.copyCustomerPortalLink()"\r\n                ng-show="showInvoiceToolBar" ng-if="buttonPermissions.invoice_link">\r\n                <md-icon md-font-icon="fa fa-link" style="font-size:14px;"></md-icon>\r\n                <md-tooltip>Invoice Link</md-tooltip>\r\n            </md-button>\r\n\r\n            <!--<md-button aria-label="send" class="md-primary md-raised md-small" ng-click="vm.openRecuringDialog();" ng-show="showBatchInvoices" >\r\n                  <md-icon md-font-icon="fa fa-envelope" style="font-size:14px;"></md-icon>\r\n                  <md-tooltip>Send Betch Invoices</md-tooltip>\r\n            </md-button>-->\r\n\r\n\r\n            <md-button aria-label="send" class="md-primary md-raised md-small" ng-click="vm.openRecuringDialog();"\r\n                ng-show="showRecurringToolBar" ng-if="buttonPermissions.invoice_recurring">\r\n                <md-icon md-font-icon="fa fa-refresh" style="font-size:14px;"></md-icon>\r\n                <md-tooltip>Make Recurring</md-tooltip>\r\n            </md-button>\r\n\r\n        </div>\r\n        <div flex="10" ng-show="false">\r\n            <div class="md-toolbar-tools-">\r\n                <md-button class="md-icon-button toolbar-button animated" ng-click="vm.openSidebar(\'gateway_sync\')"\r\n                    aria-label="side navigation">\r\n                    <md-icon md-font-icon="fa fa-bell-o"></md-icon>\r\n                    <span class="toolbar-button-badge ng-scope md-cyan-white-theme" theme-background="warn" style="background-color: red; color:white">{{vm.notifications.length}}</span>\r\n                </md-button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div layout="row" layout-xs="column" layout-margin ng-hide="">\r\n\r\n        <tri-widget flex title="" content-layout="column" content-layout-align="center">\r\n            <md-table-container id="invoice_listing">\r\n                <table md-table class="md-data-table2" md-row-select multiple ng-model="invoiceSelection" md-progress="vm.promise">\r\n                    <thead md-head md-order="vm.query.order" md-on-reorder="vm.InvoiceData">\r\n                        <tr md-row>\r\n                            <th md-column md-order-by="DocNumber"><span translate>{{vm.columns.invoiceNo}}</span></th>\r\n                            <th md-column md-order-by="CustomerRef.name"><span translate>{{vm.columns.customerName}}</span></th>\r\n                            <th md-column md-order-by="TxnDate" decend-first class="col5"> <span translate>{{vm.columns.invoiceDate}}</span></th>\r\n\r\n                            <th md-column md-order-by="DueDate" class="col5"> <span translate>{{vm.columns.dueDate}}</span></th>\r\n                            <th md-column md-order-by="Balance" class="col4"><span translate>{{vm.columns.balance}}</span></th>\r\n                            <th md-column md-numberic md-order-by="TotalAmt" class="col3"><span translate>{{vm.columns.total}}</span></th>\r\n                            <th md-column md-order-by="IsPaid" class="col2"><span translate>{{vm.columns.status}}</span></th>\r\n                            <th md-column md-order-by="SendGridEvent" class="col1"><span translate>EMAIL STATUS</span></th>\r\n                            <th md-column><span translate>{{vm.columns.action}}</span></th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody md-body>\r\n                        <!-- ng-disabled="invoice.IsPaid==1" -->\r\n                        <tr md-row md-on-select="vm.toolBarProcess()"\r\n                         md-select="invoice.Id"\r\n                            md-select-id="invoice.Id" md-auto-select ng-repeat="invoice in vm.InvoiceData | orderBy: vm.query.order | limitTo: vm.query.limit : (vm.query.page -1) * vm.query.limit">\r\n                            <td md-cell>{{invoice.DocNumber}}</td>\r\n                            <td md-cell>{{::invoice.CustomerRef.name}}</td>\r\n\r\n                            <td md-cell class="col5">{{::invoice.TxnDate | date:\'MM/dd/yyyy\'}}</td>\r\n                            <td md-cell class="col5">{{::invoice.DueDate | date:\'MM/dd/yyyy\'}}</td>\r\n                            <td md-cell class="col4">${{::invoice.Balance | number:2}}</td>\r\n                            <td md-cell class="col3">${{::invoice.TotalAmt | number:2}}</td>\r\n                            <td md-cell class="col2">\r\n                                <span ng-if="invoice.IsPaid==0">Unpaid</span>\r\n                                <span ng-if="invoice.IsPaid==1">Paid</span>\r\n                            </td>\r\n                            <td md-cell class="col1">\r\n                                <md-chips class="status">\r\n                                    <md-chip class="status {{invoice.SendGridEvent==\'\' ? \'notsent\' : invoice.SendGridEvent}}">{{invoice.SendGridEvent==\'\'\r\n                                        ? \'not sent\' : invoice.SendGridEvent}}</md-chip>\r\n                                </md-chips>\r\n                            </td>\r\n                            <td md-cell>\r\n                                <md-button class="md-primary md-fab md-mini" ng-class="[vm.buttonClass, vm.buttonHue]"\r\n                                    aria-label="fab button" ng-click=vm.openInvoiceDetail(invoice) permission=""\r\n                                    permission-only="\'invoice-detail\'">\r\n                                    <md-icon md-font-icon="zmdi zmdi-mail-send"></md-icon>\r\n                                </md-button>\r\n                            </td>\r\n                        </tr>\r\n                        <tr md-row ng-show="vm.InvoiceData.length == 0">\r\n                            <td md-cell colspan="10" style="text-align:center !important;text-transform:none;">There is\r\n                                no data to display</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </md-table-container>\r\n            <md-table-pagination md-limit="vm.query.limit" md-page="vm.query.page" md-total="{{vm.InvoiceData.length}}"\r\n                md-page-select md-on-paginate="logPagination"></md-table-pagination>\r\n        </tri-widget>\r\n    </div>\r\n    <div flex>\r\n        <md-fab-toolbar md-open="false" count="2" md-direction="right">\r\n            <md-fab-trigger class="align-with-text">\r\n                <md-button aria-label="menu" class="md-fab md-raised md-mini">\r\n                    <md-icon md-font-icon="fa fa-info-circle"></md-icon>\r\n                </md-button>\r\n            </md-fab-trigger>\r\n\r\n            <md-toolbar>\r\n                <md-fab-actions class="md-toolbar-tools">\r\n                    <md-chips class="status">\r\n                        <md-chip class="status delivered">delivered</md-chip>\r\n                        <md-chip class="status processed">processed</md-chip>\r\n                        <md-chip class="status open">opens</md-chip>\r\n                        <md-chip class="status click">clicks</md-chip>\r\n                        <md-chip class="status spam_report">spam report</md-chip>\r\n                        <md-chip class="status dropped">dropped</md-chip>\r\n                        <md-chip class="status notsent">not sent</md-chip>\r\n                    </md-chips>\r\n                </md-fab-actions>\r\n            </md-toolbar>\r\n        </md-fab-toolbar>\r\n    </div>\r\n</div>\r\n'),
e.put("app/modules/invoice/payment/profile_creditcard.html",'<form name="checkoutForm" novalidate autocomplete="on|off">\r\n    <md-progress-linear class="md-primary" md-mode="indeterminate" ng-show="showProgress"></md-progress-linear>\r\n    <div flex layout="row" class="md-padding-">\r\n        <md-content flex="100" flex-gt-xs="50" flex-gt-lg="40">\r\n            <md-list class="inbox-list" style="min-height:590px; !important; margin-top:1px; border:0px solid;">\r\n                <div>\r\n\r\n                    <md-subheader class="" palette-background="grey:300">\r\n\r\n                        <div layout="row">\r\n                            <div flex="80">\r\n                                <h3>Total {{totalAmount | currency}}</h3>\r\n                                <h4 ng-show="convfee == true">Convenience fee {{convfeeamount}}{{convfeetype}}</h4>\r\n                            </div>\r\n                            <div flex="20">\r\n                            </div>\r\n                        </div>\r\n                    </md-subheader>\r\n                    <md-list-item class="inbox-list__email inbox-list__email--animated md-3-line md-long-text"\r\n                        ng-repeat="invoice in selectedInvoiceData" palette-background="{{(($index+1)%2)==0 ? \'grey:100\' : \'\'}}">\r\n                        <span class="md-avatar invoice-circle" ng-init="initRand(0,18)" palette-background="{{getRandomSpan()}}:200">{{$index+1}}</span>\r\n                        <div class="md-list-item-text" layout="column">\r\n                            <div layout="row" layout-align="center center">\r\n                                <div flex="70">\r\n\r\n                                    <h3><span class="md-caption" am-time-ago="email.date"></span>Invoice\r\n                                        #{{invoice.DocNumber}}.</h3>\r\n                                    <h4>Invoice Date: {{invoice.TxnDate | date:\'MM/dd/yyyy\'}}</h4>\r\n                                    <p>Balance Due: {{invoice.Balance | currency}}</p>\r\n                                </div>\r\n                                <div flex="30" align="right" ng-init="invoice.ChargeAmount=invoice.Balance">\r\n\r\n                                    <input type="text" name="ChargeAmount{{$index}}" ng-model="invoice.ChargeAmount"\r\n                                        class="md-padding" number-formatter ng-keyup="calculateTotalAmount();"\r\n                                        ng-pattern="/^[0-9.,]+$/" step="0.01" style="width:55px;height:15px;" ng-max="invoice.Balance"\r\n                                        ng-disabled="disableinpt" required>\r\n\r\n                                    <div ng-messages="true" role="alert" class="custom-validation" ng-show="invoice.ChargeAmount > invoice.Balance">\r\n                                        <div>\r\n                                            <span>Amount exceeds</span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div ng-messages="checkoutForm[\'ChargeAmount\'+$index].$error" role="alert" class="custom-validation">\r\n                                        <div ng-message="required">\r\n                                            <span>Amount is required</span>\r\n                                        </div>\r\n                                        <div ng-message="pattern">\r\n                                            <span>Invalid Amount</span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <!--</md-input-container>-->\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <md-divider ng-if="!$last"></md-divider>\r\n                    </md-list-item>\r\n\r\n                </div>\r\n            </md-list>\r\n        </md-content>\r\n        <div class="animate-wrapper" layout="column" layout-align="start center" flex>\r\n\r\n            <div flex id="ui-admin-email" ui-view layout="column" layout-align="start start" class="overflow-auto full-width"\r\n                style="border:0px solid #ccc">\r\n                <div flex class="inbox-email-selected" layout="column" layout-align="start" style="min-width:100%;border:0px solid;">\r\n\r\n                    <md-content class="mpaymentModed-padding- full-width ccfields" style="margin-top:0px;">\r\n                        <md-card>\r\n                            <md-card-header ng-show="true">\r\n                                <md-card-avatar>\r\n                                    <img class="2md-user-avatar" style="margin-top:5px;" src="{{paymentDescription[paymentMode].icon}}" />\r\n                                </md-card-avatar>\r\n                                <md-card-header-text>\r\n\r\n                                    <span class="md-headline" style="margin-top:8px;">{{paymentDescription[paymentMode].title}}</span>\r\n                                    <md-fab-speed-dial md-direction="{{vm.fabDirection}}" md-open="vm.fabStatus"\r\n                                        ng-class="vm.fabAnimation" style="position:absolute;top:20px;right:20px;">\r\n                                        <md-fab-trigger>\r\n                                            <md-button aria-label="share this post" class="md-fab md-raised md-mini md-primary">\r\n\r\n                                                <md-icon md-font-icon="zmdi zmdi-more-vert"></md-icon>\r\n                                                <md-tooltip>Choose payment method</md-tooltip>\r\n\r\n                                            </md-button>\r\n                                        </md-fab-trigger>\r\n                                        <md-fab-actions>\r\n                                            <md-button aria-label="Ach" class="md-fab md-raised md-mini md-primary"\r\n                                                ng-click="changePaymentMode(\'ach\')" ng-if="activePaymentMethods.ach">\r\n                                                <md-icon md-font-icon="zmdi zmdi-file-text"></md-icon>\r\n                                                <md-tooltip>eCheck (ACH)</md-tooltip>\r\n                                            </md-button>\r\n                                            <md-button aria-label="Cash" class="md-fab md-raised md-mini md-primary"\r\n                                                ng-click="changePaymentMode(\'cash\')" ng-if="activePaymentMethods.cash">\r\n                                                <md-icon md-font-icon="zmdi zmdi-money-box"></md-icon>\r\n                                                <md-tooltip>Cash</md-tooltip>\r\n                                            </md-button>\r\n                                            <md-button aria-label="CreditCard" class="md-fab md-raised md-mini md-primary md-hue-2"\r\n                                                ng-if="activePaymentMethods.creditcard" ng-click="changePaymentMode(\'creditcard\')">\r\n                                                <md-icon md-font-icon="zmdi zmdi-card"></md-icon>\r\n                                                <md-tooltip>Credit Card</md-tooltip>\r\n                                            </md-button>\r\n                                            <md-button aria-label="Bolt P2PE" class="md-fab md-raised md-mini md-primary md-hue-2"\r\n                                                ng-click="changePaymentMode(\'bolt\')" ng-if="activePaymentMethods.bolt">\r\n                                                <img src="assets/images/icons/bolt.png">\r\n                                                <md-tooltip>Bolt P2PE</md-tooltip>\r\n                                            </md-button>\r\n                                            <!--\r\n                                        <md-button aria-label="triPOS" class="md-fab md-raised md-mini md-primary md-hue-2" ng-click="changePaymentMode(\'tripos_ipp350\')" ng-if="activePaymentMethods.tripos_ipp350">\r\n                                            <md-icon md-font-icon="zmdi zmdi-keyboard zmdi-hc-fw zmdi-hc-rotate-270"></md-icon>\r\n                                            <md-tooltip>triPOS iPP350</md-tooltip>\r\n                                        </md-button>-->\r\n                                        </md-fab-actions>\r\n                                    </md-fab-speed-dial>\r\n                                </md-card-header-text>\r\n\r\n                            </md-card-header>\r\n                            <md-divider></md-divider>\r\n\r\n                            <!-- Cash-->\r\n                            <md-card-content ng-show="paymentMode==\'cash\'">\r\n                                <div layout="column" layout-gt-xs="row">\r\n                                    <div flex="50">\r\n                                        <md-button type="submit" class="md-raised md-primary green-A700" aria-label="PROCESS"\r\n                                            ng-click="submit(\'cash\');" ng-disabled="isAmountInvalid || disabledChargeButton"\r\n                                            style="background:#2FC65A;width:90%">CHARGE {{totalAmount | currency}}</md-button>\r\n                                    </div>\r\n                                    <div flex="50" align="right">\r\n                                        <md-button type="submit" class="md-warn" aria-label="PROCESS" ng-click="cancel();"\r\n                                            style="color:grey;width:90%">DON\'T CHARGE</md-button>\r\n                                    </div>\r\n                                </div>\r\n                            </md-card-content>\r\n\r\n                            <!-- Ach-->\r\n                            <md-card-content ng-show="paymentMode==\'ach\'">\r\n                                <!--| filter:{ card_type: \'ECHK\' }-->\r\n                                <div layout="row" layout-padding layout-gt-xs="row">\r\n                                    <div flex="100">\r\n\r\n                                        <md-input-container class="md-block" md-no-float ng-show="ccprofiles.length > 0">\r\n                                            <md-select ng-model="ccprofile.profile_id" placeholder="Ach Profile"\r\n                                                ng-change="UpdateCCFields()">\r\n                                                <md-optgroup label="Ach Profile">\r\n                                                    <md-option value="{{profile.profile_id}}" ng-repeat="(key,profile) in ccprofiles "\r\n                                                        ng-if="profile.card_type === \'ECHK\' || profile.profile_id==0">\r\n                                                        {{profile.last_digits==="0" ? "None" :\r\n                                                        "xxxx-xxxx-xxxx"+profile.last_digits}}\r\n                                                    </md-option>\r\n                                                </md-optgroup>\r\n                                            </md-select>\r\n                                        </md-input-container>\r\n                                        <md-input-container class="md-block" md-no-float>\r\n                                            <input type="text" id="bankaba" name="bankaba" ng-model="payform.bankaba"\r\n                                                class="md-padding" placeholder="Rounting #" ng-required="requiredAccountNo"\r\n                                                autocomplete="on|off" ng-disabled="usedCardProfile">\r\n\r\n                                            <div ng-messages="checkoutForm.bankaba.$error" role="alert" multiple>\r\n                                                <div ng-message="required" ng-show="IsSubmit">\r\n                                                    <span>Rounting Number is required</span>\r\n                                                </div>\r\n                                            </div>\r\n                                        </md-input-container>\r\n                                        <md-input-container class="md-block" md-no-float>\r\n                                            <input type="text" id="account" name="account" ng-model="payform.account"\r\n                                                class="md-padding" placeholder="Account #" ng-required="requiredBankaba"\r\n                                                ng-disabled="usedCardProfile" autocomplete="on|off">\r\n\r\n                                            <div ng-messages="checkoutForm.account.$error" role="alert" multiple>\r\n                                                <div ng-message="required" ng-show="IsSubmit">\r\n                                                    <span>Account Number is required</span>\r\n                                                </div>\r\n                                            </div>\r\n                                        </md-input-container>\r\n                                        <md-input-container class="md-block" md-no-float>\r\n                                            <input type="text" id="name" name="name" ng-model="payform.name" class="md-padding"\r\n                                                placeholder="Name on Account" ng-disabled="usedCardProfile"\r\n                                                autocomplete="on|off">\r\n\r\n                                            <div ng-messages="checkoutForm.name.$error" role="alert" multiple>\r\n                                                <div ng-message="required" ng-show="IsSubmit">\r\n                                                    <span>Name on Account is required</span>\r\n                                                </div>\r\n                                            </div>\r\n                                        </md-input-container>\r\n                                    </div>\r\n                                </div>\r\n                                <div layout="row" layout-padding layout-gt-xs="row" layout-align="center center">\r\n                                    <div flex="60">\r\n                                        <md-checkbox aria-label="Create Profile" ng-model="payform.card_profile"\r\n                                            ng-hide="usedCardProfile">\r\n                                            Save eCheck Info for future use\r\n                                        </md-checkbox>\r\n                                    </div>\r\n                                    <div flex="40" align="right">\r\n                                        <md-button ng-click="ProfileDelete()" class="md-warn" ng-show="usedCardProfile">\r\n                                            <md-icon md-font-icon="fa fa-trash" style="font-size:14px;"></md-icon>&nbsp;\r\n                                            Delete Profile\r\n                                        </md-button>\r\n                                    </div>\r\n                                </div>\r\n                                <div layout="column" layout-gt-xs="row">\r\n                                    <!--{{disabledChargeButton}}\r\n                                {{isAmountInvalid}}\r\n                                {{checkoutForm.$invalid}}-->\r\n                                    <div flex="50">\r\n                                        <md-button type="submit" class="md-raised md-primary" aria-label="PROCESS"\r\n                                            ng-click="submit(\'ach\');" ng-disabled="checkoutForm.$invalid || isAmountInvalid || disabledChargeButton"\r\n                                            style="background:#2FC65A;width:90%">CHARGE {{totalAmount | currency}}</md-button>\r\n                                    </div>\r\n                                    <div flex="50" align="right">\r\n                                        <md-button type="submit" class="md-warn" aria-label="PROCESS" ng-click="cancel();"\r\n                                            style="color:grey;width:90%">DON\'T CHARGE</md-button>\r\n                                    </div>\r\n                                </div>\r\n                            </md-card-content>\r\n\r\n                            <!-- CreditCard-->\r\n\r\n                            <md-card-content ng-show="paymentMode==\'creditcard\'">\r\n\r\n                                <!--cc fields start-->\r\n                                <div class="md-padding-" style="padding:6px 10px 0px 10px;">\r\n                                    <md-input-container class="md-block" ng-show="ccprofiles.length > 0">\r\n                                        <md-select ng-model="ccprofile.profile_id" ng-change="UpdateCCFields()"\r\n                                            placeholder="Card Profile">\r\n                                            <md-optgroup label="Card Profile" layout-padding>\r\n\r\n                                                <md-option value="{{profile.profile_id}}" ng-repeat="(key,profile) in ccprofiles"\r\n                                                    ng-if="profile.card_type !== \'ECHK\'">\r\n                                                    <div layout="row" layout-align="space-between center">\r\n                                                        {{profile.last_digits==="0" ? "None" :\r\n                                                        "xxxx-xxxx-xxxx"+profile.last_digits}}\r\n                                                        <span flex></span>                                      \r\n                                                        <!-- Delete icon -->\r\n                                                        <md-icon ng-if=\'profile.profile_id !== 0\' ng-click="ProfileDeleteWithId(profile.profile_id)"\r\n                                                            class="md-warn" md-font-icon="fa fa-trash" style="font-size:14px;margin-left:80px; "></md-icon>\r\n                                                    </div>\r\n                                                </md-option>\r\n\r\n                                            </md-optgroup>\r\n                                        </md-select>\r\n                                    </md-input-container>\r\n                                    <md-input-container class="md-block" md-no-float>\r\n                                        <input type="text" id="FirstName" name="cardholder" ng-model="payform.cardholder"\r\n                                            class="md-padding" placeholder="CardHolder Name" ng-required="requiredCardHolderName"\r\n                                            ng-disabled="usedCardProfile">\r\n\r\n                                        <div ng-messages="checkoutForm.cardholder.$error" role="alert" multiple>\r\n                                            <div ng-message="required" ng-show="IsSubmit">\r\n                                                <span>CardHolder Name is required</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </md-input-container>\r\n\r\n                                    <md-input-container class="md-block" md-no-float>\r\n                                        <!--data-credit-card-type data-ng-pattern="ccPattern"  -->\r\n\r\n                                        <input type="text" id="CardNumber" name="cardnumber" ng-model="payform.cardnumber"\r\n                                            data-ng-pattern="ccPattern" placeholder="CreditCard Number"\r\n                                            data-ng-minlength="14" maxlength="16" ng-required="requiredCreditCardNumber"\r\n                                            data-credit-card-type ng-disabled="usedCardProfile" autocomplete="on|off">\r\n\r\n\r\n                                        <div ng-messages="checkoutForm.cardnumber.$error" role="alert" multiple>\r\n                                            <div ng-message="required" ng-show="IsSubmit">\r\n                                                <span>CreditCard Number is required</span>\r\n                                            </div>\r\n                                            <div ng-message="minlength">\r\n                                                <span>Credit card must be 14-16 digits</span>\r\n                                            </div>\r\n\r\n                                            <div ng-message="pattern">\r\n                                                <span>Credit card must consist of only numbers</span>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div>\r\n                                            <img ng-show="true" ng-repeat="card in cardlogos" align="right" ng-src="assets/images/cardicons/{{card.src}}"\r\n                                                style="opacity:{{ccinfo.type==card.id ? 1 : 0.4}}; margin-right:2px;width:38px">\r\n                                        </div>\r\n                                    </md-input-container>\r\n\r\n                                    <div layout="column" layout-gt-xs="row">\r\n                                        <md-input-container flex="100" flex-gt-xs="33" md-no-float ng-hide="usedCardProfile">\r\n                                            <label>Exp Month</label>\r\n                                            <md-select id="months" name="months" ng-model="payform.months" ng-required="requiredMonthField">\r\n                                                <md-option ng-repeat="(key, month) in [\'01\',\'02\',\'03\',\'04\',\'05\',\'06\',\'07\',\'08\',\'09\',\'10\',\'11\',\'12\']"\r\n                                                    value="{{month}}">\r\n                                                    {{month}}\r\n                                                </md-option>\r\n                                            </md-select>\r\n                                            <div ng-messages="checkoutForm.months.$error" role="alert">\r\n                                                <div ng-message="required" ng-show="IsSubmit">\r\n                                                    <span>CreditCard exp month is required.</span>\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                        </md-input-container>\r\n                                        <md-input-container flex="100" flex-gt-xs="33" ng-show="usedCardProfile">\r\n                                            <label>Exp Month</label>\r\n                                            <input type="text" id="CVV" name="cc2" ng-model="payform.months"\r\n                                                placeholder="XXXX" ng-disabled="true">\r\n                                        </md-input-container>\r\n\r\n                                        <md-input-container flex="100" flex-gt-xs="33" md-no-float ng-hide="usedCardProfile">\r\n                                            <label>Exp Year</label>\r\n                                            <md-select id="years" name="years" ng-model="payform.years" ng-required="requiredYearField">\r\n                                                <md-option ng-repeat="year in [] | range:currentYear:currentYear+13"\r\n                                                    value="{{year}}">\r\n                                                    {{year}}\r\n                                                </md-option>\r\n                                            </md-select>\r\n                                            <div ng-messages="checkoutForm.years.$error" role="alert">\r\n                                                <div ng-message="required" ng-show="IsSubmit">\r\n                                                    <span>CreditCard exp year is required.</span>\r\n                                                </div>\r\n                                            </div>\r\n                                        </md-input-container>\r\n                                        <md-input-container flex="100" flex-gt-xs="33" ng-show="usedCardProfile">\r\n                                            <label>Exp Year</label>\r\n                                            <input type="text" id="CVV" name="cc2" ng-model="payform.years" placeholder="XXXX"\r\n                                                ng-disabled="true">\r\n                                        </md-input-container>\r\n                                        <md-input-container class="md-block" md-no-float flex-gt-xs="33" ng-hide="usedCardProfile">\r\n                                            <input type="text" id="CVV" name="cc2" ng-model="payform.cc2" placeholder="CVC2/CVV2/CID"\r\n                                                md-maxlength="4" maxlength="4" ng-pattern="/^[0-9]+$/">\r\n                                            <div ng-messages="checkoutForm.cc2.$error" role="alert" multipl>\r\n                                                <div ng-message="required" ng-show="IsSubmit">\r\n                                                    <span>CCV2 field is required.</span>\r\n                                                </div>\r\n                                                <div ng-message="md-maxlength">\r\n                                                    <span>CCV2 can\'t be longer than 4 characters.</span>\r\n                                                </div>\r\n                                            </div>\r\n                                        </md-input-container>\r\n                                        <md-input-container flex="100" flex-gt-xs="33" ng-show="usedCardProfile">\r\n                                            <label>CVC2/CVV2/CID</label>\r\n                                            <input type="text" id="CVV" name="cc2" ng-model="payform.cc2" placeholder="XXXX"\r\n                                                ng-disabled="true">\r\n                                        </md-input-container>\r\n                                    </div>\r\n                                    <span class="md-body-1">Additional Information</span>\r\n                                    <div layout="column" layout-gt-xs="row" style="border-top:0px solid #ddd">\r\n                                        <md-input-container flex="100" flex-gt-xs="75" md-no-float>\r\n                                            <input type="text" name="streetaddress" ng-model="payform.streetaddress"\r\n                                                class="md-padding" placeholder="Street Address" ng-disabled="usedCardProfile">\r\n                                        </md-input-container>\r\n                                        <md-input-container flex="100" flex-gt-xs="25" md-no-float>\r\n                                            <input type="text" name="zipcode" ng-model="payform.zipcode" class="md-padding"\r\n                                                placeholder="ZIP Code" ng-disabled="usedCardProfile">\r\n                                        </md-input-container>\r\n                                    </div>\r\n                                    <div layout="column" layout-gt-xs="row" layout-align="center center">\r\n                                        <div flex="30">\r\n                                            <md-checkbox aria-label="Create Profile" ng-model="payform.card_profile"\r\n                                                ng-hide="usedCardProfile">\r\n                                                Save card for future use\r\n                                            </md-checkbox>\r\n                                        </div>\r\n                                        <div flex="70" align="right">\r\n                                            <md-button ng-click="ProfileDelete()" class="md-warn" ng-show="usedCardProfile">\r\n                                                <md-icon md-font-icon="fa fa-trash" style="font-size:14px;"></md-icon>&nbsp;\r\n                                                Delete Profile\r\n                                            </md-button>\r\n                                            <md-button ng-click="showSwipe()" class="md-primary">\r\n                                                <md-icon md-font-icon="fa fa-credit-card-alt" style="font-size:12px;"></md-icon>&nbsp;\r\n                                                Swipe\r\n                                            </md-button>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div layout="column" layout-gt-xs="row">\r\n                                        <div flex="50">\r\n\r\n                                            <md-button type="submit" class="md-raised md-primary" aria-label="PROCESS"\r\n                                                ng-click="submit(\'creditcard\');" ng-disabled="checkoutForm.$invalid || isAmountInvalid || disabledChargeButton"\r\n                                                style="background:#2FC65A;width:90%">CHARGE {{totalAmount | currency}}</md-button>\r\n                                        </div>\r\n                                        <div flex="50" align="right">\r\n                                            <md-button type="submit" class="md-warn" aria-label="PROCESS" ng-click="cancel();"\r\n                                                style="color:grey;width:90%">DON\'T CHARGE</md-button>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <!-- cc fields end-->\r\n                            </md-card-content>\r\n\r\n                            <!-- Bolt-->\r\n\r\n                            <md-card-content ng-show="paymentMode==\'bolt\'">\r\n\r\n                                <div layout="column" layout-align="center center" style="min-height:400px !important; height:400px !important;">\r\n                                    <div flex align="center" class="margin-top-40">\r\n                                        <img src="assets/images/bolt.png" width="160">\r\n                                    </div>\r\n\r\n                                    <div flex align="center" ng-if="boltConfig.hsn!=\'\'" layout-padding style="    padding-top: 35px;">\r\n                                        <span class="md-subtitle" style="color:green">Terminal : {{boltConfig.hsn}}</span>\r\n                                    </div>\r\n                                    <div flex align="center" ng-if="boltConfig.hsn==\'\'">\r\n                                        <span class="md-subtitle" style="color:#ff0000;">No Terminal found on your\r\n                                            account!</span>\r\n                                        <br>\r\n                                        <span class="md-caption" style="color:#ff0000;">please ask your administrator\r\n                                            to assign you terminal id from Settings App</span>\r\n                                    </div>\r\n\r\n                                    <div flex align="center">\r\n                                        <md-button type="submit" class="md-raised md-primary" aria-label="PROCESS"\r\n                                            ng-click="processBolt(\'\');" ng-disabled="disabledChargeButton" style="background:#408F2B;width:100% !important;color:white"\r\n                                            ng-if="boltConfig.hsn!=\'\'">CHARGE {{totalAmount | currency}}</md-button>\r\n                                    </div>\r\n\r\n                                    <div flex align="center" class="" ng-if="boltProcessStatus!=\'\'" layout-padding>\r\n                                        <span class="md-subtitle">{{boltProcessStatus}}</span>\r\n                                    </div>\r\n                                    <div flex>\r\n\r\n                                    </div>\r\n                                </div>\r\n                            </md-card-content>\r\n\r\n                            <md-card-content ng-show="paymentMode==\'tripos_ipp350\'">\r\n                                <div layout="column" layout-align="center center" style="min-height:400px !important; height:auto !important;">\r\n\r\n                                    <div flex align="center" layout-padding>\r\n                                        <img src="assets/images/tripos.jpg" width="160">\r\n                                        <div ng-show="tripos_searchlane_progress">\r\n                                            <md-progress-linear class="md-primary" md-mode="indeterminate"></md-progress-linear>\r\n                                            <center class="md-caption">Getting Configuration</center>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <!-- Sale Error -->\r\n                                    <div flex align="center" layout-padding ng-show="triPOSSaleInfo._hasErrors">\r\n                                        <span class="md-subtitle" style="color:#ff0000;">\r\n                                            Error\r\n                                        </span>\r\n                                        <br>\r\n                                        <span class="md-caption" style="color:#ff0000;">\r\n                                            {{triPOSSaleInfo.errorMessage}}\r\n                                        </span>\r\n                                    </div>\r\n\r\n                                    <div flex align="center" layout-padding ng-hide="triPOSLaneInfo._hasErrors" ng-if="showtriPOSLaneInfo">\r\n                                        <span class="md-subtitle" style="color:green">{{triPOSLaneInfo.ipLanes[0].description}}</span>\r\n                                        <div ng-if="triPOSLaneInfo.ipLanes.length > 0">\r\n                                            <table class="md-table">\r\n                                                <tr>\r\n                                                    <td>Lane ID</td>\r\n                                                    <td>Terminal ID</td>\r\n                                                    <td>Driver</td>\r\n                                                    <td>Terminal Type</td>\r\n                                                </tr>\r\n                                                <tr>\r\n                                                    <td align="center">{{triPOSLaneInfo.ipLanes[0].laneId}}</td>\r\n                                                    <td>{{triPOSLaneInfo.ipLanes[0].terminalId}}</td>\r\n                                                    <td>{{triPOSLaneInfo.ipLanes[0].driver}}</td>\r\n                                                    <td>{{triPOSLaneInfo.ipLanes[0].terminalType}}</td>\r\n                                                </tr>\r\n                                                <tr>\r\n                                                    <td colspan="4"><span style="color:green">Device IPAddress:</span>\r\n                                                        {{triPOSLaneInfo.ipLanes[0].ip.address}}&nbsp;:&nbsp;{{triPOSLaneInfo.ipLanes[0].ip.port}}</td>\r\n                                                </tr>\r\n                                            </table>\r\n                                            <md-button type="submit" class="md-raised md-primary" aria-label="PROCESS"\r\n                                                ng-click="processTriPOSiPP350(\'\');" ng-disabled="disabledChargeButton"\r\n                                                style="background:#408F2B;width:100% !important">CHARGE {{totalAmount |\r\n                                                currency}}</md-button>\r\n\r\n                                        </div>\r\n\r\n                                        <span ng-if="triPOSLaneInfo.ipLanes.length==0" class="md-subtitle" style="color:#ff0000;">No\r\n                                            ipLanes define in config file</span>\r\n\r\n                                    </div>\r\n\r\n                                    <!-- Lane Error -->\r\n                                    <div flex align="center" layout-padding ng-show="triPOSLaneInfo._hasErrors">\r\n                                        <span class="md-subtitle" style="color:#ff0000;">\r\n                                            Error\r\n                                        </span>\r\n                                        <br>\r\n                                        <span class="md-caption" style="color:#ff0000;">\r\n                                            {{triPOSLaneInfo.errorMessage}}\r\n                                        </span>\r\n                                    </div>\r\n                                    <div flex>\r\n                                    </div>\r\n                                </div>\r\n                            </md-card-content>\r\n                        </md-card>\r\n                    </md-content>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>\r\n'),
e.put("app/modules/invoice/payment/recurring_profile.html",'<md-dialog aria-label="Select Profile">\r\n     <md-progress-linear class="md-primary" md-mode="indeterminate" ng-show="showProgress"></md-progress-linear>\r\n    <md-dialog-content>\r\n    <md-tabs md-dynamic-height md-border-bottom>\r\n      <md-tab label="Profile">\r\n         <md-content class="md-padding" style="min-width:400px;">\r\n\r\n            <md-list ng-cloak>\r\n                <md-list-item class="md-3-line" ng-repeat="(key,profile) in ccprofiles" ng-click="selectProfile(key)" >\r\n                    <div class="md-list-item-text" layout="column">\r\n                        <h3>{{profile.cardholder_name}}</h3>\r\n                        <h4>xxxx-xxxx-xxxx-{{profile.last_digits}}</h4>\r\n                        <p>{{profile.create_date}}</p>\r\n                        <div>\r\n                            <img ng-show="true" ng-repeat="card in cardlogos" align="right" ng-src="assets/images/cardicons/{{card.src}}" ng-init="card_type=profile.card_type | lowercase" style="opacity:{{card_type==card.id ? 1 : 0.4}}; margin-right:2px;width:38px" />\r\n                        </div>\r\n                    </div>\r\n                    <md-divider>\r\n                </md-list-item>\r\n                <md-list-item class="md-3-line" ng-show="ccprofiles.length==0">\r\n                    <div class="md-list-item-text" layout="column">\r\n                        <span >No CreditCard Profile found for this customer</span>\r\n                    </div>\r\n                </md-list-item>\r\n\r\n            </md-list>\r\n        </md-content>\r\n\r\n      </md-tab>\r\n      <md-tab label="Add New">\r\n      <form name="checkoutForm" novalidate>\r\n        <md-content class="md-padding">\r\n         <div class="md-padding-">\r\n                <md-input-container class="md-block" md-no-float>\r\n                    <input type="text" id="FirstName" name="cardholder" ng-model="payform.cardholder" class="md-padding" placeholder="CardHolder Name" ng-required="requiredCardHolderName" ng-disabled="usedCardProfile">\r\n\r\n                    <div ng-messages="checkoutForm.cardholder.$error" role="alert" multiple>\r\n                        <div ng-message="required" ng-show="IsSubmit">\r\n                            <span>CardHolder Name is required</span>\r\n                        </div>\r\n                    </div>\r\n                </md-input-container>\r\n                <md-input-container class="md-block" md-no-float>\r\n                    <input type="text" id="CardNumber" name="cardnumber" ng-model="payform.cardnumber" data-ng-pattern="ccPattern" placeholder="CreditCard Number" data-ng-minlength="14" maxlength="16" ng-required="requiredCreditCardNumber" data-credit-card-type>\r\n\r\n                    <div ng-messages="checkoutForm.cardnumber.$error" role="alert" multiple>\r\n                        <div ng-message="required">\r\n                            <span>CreditCard Number is required</span>\r\n                        </div>\r\n                        <div ng-message="minlength">\r\n                            <span>Credit card must be 14-16 digits</span>\r\n                        </div>\r\n\r\n                        <div ng-message="pattern">\r\n                            <span>Credit card must consist of only numbers</span>\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                        <img ng-show="true" ng-repeat="card in cardlogos" align="right" ng-src="assets/images/cardicons/{{card.src}}" style="opacity:{{ccinfo.type==card.id ? 1 : 0.4}}; margin-right:2px;width:38px">\r\n                    </div>\r\n                </md-input-container>\r\n\r\n                <div layout="column" layout-gt-xs="row">\r\n                    <md-input-container flex="100" flex-gt-xs="33" md-no-float ng-hide="usedCardProfile">\r\n                        <label>Exp Month</label>\r\n                        <md-select id="months" name="months" ng-model="payform.months" ng-required="requiredMonthField">\r\n                            <md-option ng-repeat="(key, month) in [\'01\',\'02\',\'03\',\'04\',\'05\',\'06\',\'07\',\'08\',\'09\',\'10\',\'11\',\'12\']" value="{{month}}">\r\n                                {{month}}\r\n                            </md-option>\r\n                        </md-select>\r\n                        <div ng-messages="checkoutForm.months.$error" role="alert">\r\n                            <div ng-message="required" ng-show="IsSubmit">\r\n                                <span>CreditCard exp month is required.</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </md-input-container>\r\n                    <md-input-container flex="100" flex-gt-xs="33" md-no-float ng-hide="usedCardProfile">\r\n                        <label>Exp Year</label>\r\n                        <md-select id="years" name="years" ng-model="payform.years" ng-required="requiredYearField">\r\n                            <md-option ng-repeat="year in [] | range:currentYear:currentYear+13" value="{{year}}">\r\n                                {{year}}\r\n                            </md-option>\r\n                        </md-select>\r\n                        <div ng-messages="checkoutForm.years.$error" role="alert">\r\n                            <div ng-message="required" ng-show="IsSubmit">\r\n                                <span>CreditCard exp year is required.</span>\r\n                            </div>\r\n                        </div>\r\n                    </md-input-container>\r\n                    <md-input-container class="md-block" md-no-float flex-gt-xs="33" ng-hide="usedCardProfile">\r\n                        <input type="text" id="CVV" name="cc2" ng-model="payform.cc2" placeholder="CVC2/CVV2/CID" md-maxlength="4" maxlength="4" ng-pattern="/^[0-9]+$/">\r\n                        <div ng-messages="checkoutForm.cc2.$error" role="alert" multipl>\r\n                            <div ng-message="required" ng-show="IsSubmit">\r\n                                <span>CCV2 field is required.</span>\r\n                            </div>\r\n                            <div ng-message="md-maxlength">\r\n                                <span>CCV2 can\'t be longer than 4 characters.</span>\r\n                            </div>\r\n                        </div>\r\n                    </md-input-container>\r\n                </div>\r\n                <span class="md-body-1">Additional Information</span>\r\n                <div layout="column" layout-gt-xs="row" style="border-top:0px solid #ddd">\r\n                    <md-input-container flex="100" flex-gt-xs="75" md-no-float>\r\n                        <input type="text" name="streetaddress" ng-model="payform.streetaddress" class="md-padding" placeholder="Street Address" ng-disabled="usedCardProfile">\r\n                    </md-input-container>\r\n                    <md-input-container flex="100" flex-gt-xs="25" md-no-float>\r\n                        <input type="text" name="zipcode" ng-model="payform.zipcode" class="md-padding" placeholder="ZIP Code" ng-disabled="usedCardProfile">\r\n                    </md-input-container>\r\n                </div>\r\n                <div layout="column" layout-gt-xs="row">\r\n                    <div flex="50">\r\n\r\n                        <md-button type="submit" class="md-raised md-primary" aria-label="PROCESS" ng-click="submit(\'profile_add\');" ng-disabled="checkoutForm.$invalid" style="background:#2FC65A;width:90%">Create Profile</md-button>\r\n                    </div>\r\n                    <div flex="50" align="right">\r\n                        <md-button type="submit" class="md-warn" aria-label="PROCESS" ng-click="cancel();" style="color:grey;width:90%">Cancel</md-button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </md-content>\r\n        </form>\r\n      </md-tab>\r\n    </md-tabs>\r\n    </md-dialog-content>\r\n</md-dialog>\r\n'),e.put("app/modules/invoice/payment/swipecard.tmpl.html",'            \r\n<md-dialog aria-label="Swipe Card" class="swiperDialog">\r\n<md-progress-linear md-mode="indeterminate" ng-show="showSwiperProgress"></md-progress-linear>\r\n  \r\n<md-dialog-content class="md-padding" >\r\n    <h3 class="md-padding">{{swipeText}}</h3>\r\n        <div layout="row" layout-align="end end"> \r\n            <div flex="100" style="text-align:center !important;">\r\n              <md-input-container class="md-block" md-no-float style="border:1px solid #ccc; position:absolute; top:-100px; width:100%; height:50px;">\r\n                  <input type="text" id="swipeInfo" name="swipeInfo" ng-model="swipeInfo" class="md-padding" placeholder="Swipe Data" md-autofocus ng-keyup="handle_swipe();">\r\n              </md-input-container>\r\n                  <img src="assets/images/icons/swiper-static.png" width="200" ng-show="showStatic">\r\n                  <img src="assets/images/icons/swiper-animated.gif" width="200" ng-show="showAnimation">\r\n            </div>\r\n            \r\n        </div>\r\n        <div layout="row" layout-align="center center"> \r\n          <div flex="100" align="center">\r\n              <span class="md-caption">press Ecs to manually enter card no .</span>\r\n          </div>\r\n        </div>\r\n    </md-dialog-content>\r\n</md-dialog>\r\n'),e.put("app/modules/invoice/sendbulk/send.bulk.invoice.html",'<md-dialog aria-label="Send Invoice" id="sendinvoice">\r\n    <form name="sendEmail">\r\n        <md-dialog-content class="md-padding2">\r\n            <h2 class="md-padding2" style="padding:16px 0px 0px 16px;">Send Invoice</h2>\r\n            <div class="md-dialog-content" style="min-width:400px !important; padding:0px;">\r\n                <md-content>\r\n                    <md-list>\r\n                        <md-list-item class="md-3-line" ng-repeat="invoice in selectedInvoiceData" style="border-bottom:1px solid #ccc;">\r\n                            <div class="md-list-item-text">\r\n\r\n                                <div id="anchor{{invoice.Id}}" class="anchor-">&nbsp;</div>\r\n                                <h2 style="margin-top:0px;">Invoice# {{invoice.DocNumber}}</h2>\r\n                                <h3>{{invoice.CustomerRef.name}}</h3>\r\n                                <div layout="row">\r\n                                    <div flex="80">\r\n                                        <h3 ng-if="invoice.BillEmail !=null" click-to-edit type="inputText" ng-model="customerEmail"\r\n                                            width="100%">{{customerEmail}}</h3>\r\n                                    </div>\r\n                                    <div flex="30">\r\n                                        <md-input-container>\r\n                                            <label>Template</label>\r\n                                            <md-select ng-model="selectedTemplate" name="type">\r\n                                                <md-option ng-click="SelectedTemplateValue(template)" ng-repeat="template in settings.InvoiceContacts.template_email track by $index"\r\n                                                    ng-value="{{template}}" ng-selected="template.isSelected == true">{{template.name}}</md-option>\r\n\r\n                                            </md-select>\r\n                                        </md-input-container>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <h2>{{invoice.TotalAmt | currency}}</h2>\r\n                                <p>\r\n                                    <md-chips class="status" ng-show="sentInvoice.indexOf(invoice.Id)!=-1">\r\n                                        <md-chip class="status {{(invoiceMessages | parseErrorMessage:invoice.Id).type}}">{{(invoiceMessages\r\n                                            | parseErrorMessage:invoice.Id).message}}</md-chip>\r\n                                    </md-chips>\r\n\r\n                                    <md-chips class="status" ng-show="sentInvoice.indexOf(invoice.Id)!=-1">\r\n                                        <md-chip class="status click" style="display:block;" ng-show="(invoiceMessages | parseErrorMessage:invoice.Id).type==\'processed\'">\r\n                                            Invoice<b style="text-transform:lowercase !important"> has been sent\r\n                                                successfully to {{viewCustomerEmail}}</b></md-chip>\r\n                                    </md-chips>\r\n\r\n                                </p>\r\n                            </div>\r\n                        </md-list-item>\r\n\r\n                    </md-list>\r\n\r\n                </md-content>\r\n            </div>\r\n        </md-dialog-content>\r\n        <md-dialog-actions layout="row" ng-hide="hideDialogActions" class="invoice_action" ng-init="isDisabledSentButton=false;"\r\n            style="height:100px !important;">\r\n            <md-progress-linear md-mode="determinate" value="{{progressValue}}" ng-show="showProgress"></md-progress-linear>\r\n            <md-button ng-click="send();isDisabledSentButton=true" ng-disabled="isDisabledSentButton || sendEmail.$invalid"\r\n                class="md-primary md-raised">\r\n                <md-icon md-font-icon="fa fa-paper-plane"></md-icon>\r\n                </md-icon>\r\n                <span ng-if="isDisabledSentButton==false">\r\n                    Send\r\n                </span>\r\n                <span ng-if="isDisabledSentButton==true">\r\n                    Sending..\r\n                </span>\r\n            </md-button>\r\n        </md-dialog-actions>\r\n    </form>\r\n</md-dialog>\r\n'),e.put("app/modules/salesreceipt/payment/payment.dialog.html",'\r\n<md-dialog aria-label="Send Invoice" id="paymentform" style="min-width:400px;">\r\n<md-progress-linear class="md-primary" md-mode="indeterminate" ng-show="showProgress"></md-progress-linear>\r\n<md-progress-linear class="md-primary" md-mode="indeterminate" ng-show="showSwiperProgress"></md-progress-linear>\r\n<form name="checkoutForm" novalidate autocomplete="on|off">\r\n    <md-dialog-content class="2md-padding" ng-hide="isPaymentSuccess" >\r\n    <md-content class="md-padding- full-width ccfields" style="margin-top:0px;max-width:400px;">\r\n\r\n\r\n                    <md-card style="box-shadow:none !important; background:none;" >\r\n\r\n                        <md-card-content >\r\n                           <md-card-header ng-show="true" style="padding:0px; margin:0px;">\r\n                            <md-card-header-text>\r\n                              <div layout="row" layout-align="start end" style="padding:0px; margin-bottom:10px;">\r\n                                   <div flex="100" align="right" style="padding:0px; margin:0px;">\r\n                                     <!--<md-button aria-label="Bolt P2PE" class="md-fab md-raised md-mini md-primary md-hue-2" ng-click="changePaymentMode(\'bolt\')" ng-if="activePaymentMethods.bolt">\r\n                                          <md-icon md-font-icon="fa fa-dot-circle-o"></md-icon>\r\n                                          <md-tooltip>Bolt P2PE</md-tooltip>\r\n                                      </md-button>-->\r\n                                      <md-button aria-label="Cash" class="md-fab md-raised md-mini md-primary" ng-click="changePaymentMode(\'cash\')" ng-if="activePaymentMethods.cash">\r\n                                          <md-icon md-font-icon="zmdi zmdi-money-box"></md-icon>\r\n                                          <md-tooltip>Cash</md-tooltip>\r\n                                      </md-button>\r\n                                      <md-button aria-label="CreditCard" class="md-fab md-raised md-mini md-primary md-hue-2" ng-click="changePaymentMode(\'creditcard\')" ng-if="activePaymentMethods.creditcard">\r\n                                          <md-icon md-font-icon="zmdi zmdi-card"></md-icon>\r\n                                          <md-tooltip>Credit Card</md-tooltip>\r\n                                      </md-button>\r\n                                      <md-button aria-label="Ach" class="md-fab md-raised md-mini md-primary" ng-click="changePaymentMode(\'ach\')" ng-if="activePaymentMethods.ach">\r\n                                            <md-icon md-font-icon="zmdi zmdi-file-text"></md-icon>\r\n                                            <md-tooltip>eCheck (ACH)</md-tooltip>\r\n                                      </md-button>\r\n                                      <!--<md-button aria-label="triPOS" class="md-fab md-raised md-mini md-primary md-hue-2" ng-click="changePaymentMode(\'tripos_ipp350\')" ng-if="activePaymentMethods.tripos_ipp350">\r\n                                            <md-icon md-font-icon="zmdi zmdi-keyboard zmdi-hc-fw zmdi-hc-rotate-270"></md-icon>\r\n                                            <md-tooltip>triPOS iPP350</md-tooltip>\r\n                                        </md-button>-->\r\n                                    </div>\r\n                              </div>\r\n                              <div layout="row" style="padding-left:10px; padding-right:10px;">\r\n                                <div flex="50" align="left">Total Amount</div>\r\n                                <div flex="50" align="right">{{totalAmount | currency}}</div>\r\n                               </div>\r\n\r\n                            </md-card-header-text>\r\n\r\n                        </md-card-header>\r\n\r\n                            <div ng-show="declined_message!=\'\'">\r\n                              <p class="md-subtitle" align="justify" style="width:80% !important; color:red;padding-left:25px; word-break: break-all;">\r\n                              Declined<br>\r\n                              {{declined_message}}\r\n                              </p>\r\n                            </div>\r\n\r\n                             <!-- Ach-->\r\n                             <div ng-show="paymentMode==\'ach\'">\r\n                             <div layout="row" layout-padding layout-gt-xs="row" >\r\n                                <div flex="100">\r\n                                  <md-input-container class="md-block" md-no-float ng-show="ccprofiles.length > 0">\r\n                                      <md-select ng-model="ccprofile.profile_id"  placeholder="Ach Profile" ng-change="UpdateCCFields()">\r\n                                          <md-optgroup label="Ach Profile">\r\n                                              <md-option\r\n                                              value="{{profile.profile_id}}"\r\n                                              ng-repeat="(key,profile) in ccprofiles "\r\n                                              ng-if="profile.card_type === \'ECHK\' || profile.profile_id==0"\r\n\r\n                                              >\r\n                                              {{profile.last_digits==="0" ? "None" : "xxxx-xxxx-xxxx"+profile.last_digits}}\r\n                                            </md-option>\r\n                                          </md-optgroup>\r\n                                      </md-select>\r\n                                    </md-input-container>\r\n\r\n                                    <md-input-container class="md-block" md-no-float>\r\n                                        <input type="text" id="bankaba" name="bankaba" ng-model="payform.bankaba" class="md-padding" placeholder="Rounting #" ng-required="requiredAccountNo" autocomplete="on|off" ng-disabled="usedCardProfile">\r\n\r\n                                        <div ng-messages="checkoutForm.bankaba.$error" role="alert" multiple>\r\n                                            <div ng-message="required" ng-show="IsSubmit">\r\n                                                <span>Rounting Number is required</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </md-input-container>\r\n                                    <md-input-container class="md-block" md-no-float>\r\n                                        <input type="text" id="account" name="account" ng-model="payform.account" class="md-padding" placeholder="Account #" ng-required="requiredBankaba" autocomplete="on|off" ng-disabled="usedCardProfile">\r\n\r\n                                        <div ng-messages="checkoutForm.account.$error" role="alert" multiple>\r\n                                            <div ng-message="required" ng-show="IsSubmit">\r\n                                                <span>Account Number is required</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </md-input-container>\r\n                                    <md-input-container class="md-block" md-no-float>\r\n                                        <input type="text" id="name" name="name" ng-model="payform.name" class="md-padding" placeholder="Name on Account" autocomplete="on|off" ng-disabled="usedCardProfile" ng-required="requiredAccountName">\r\n\r\n                                        <div ng-messages="checkoutForm.name.$error" role="alert" multiple>\r\n                                            <div ng-message="required" ng-show="IsSubmit">\r\n                                                <span>Name on Account is required</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </md-input-container>\r\n                                </div>\r\n\r\n                            </div>\r\n                            <div layout="row" layout-padding  layout-gt-xs="row" layout-align="center center">\r\n                                <div flex="60">\r\n                                  <md-checkbox aria-label="Create Profile" ng-model="payform.card_profile" ng-hide="usedCardProfile">\r\n                                      Save eCheck Info for future use\r\n                                  </md-checkbox>\r\n                                </div>\r\n                                <div flex="40" align="right">\r\n                                  <md-button ng-click="ProfileDelete()" class="md-warn" ng-show="usedCardProfile">\r\n                                  <md-icon md-font-icon="fa fa-trash" style="font-size:14px;"></md-icon>&nbsp;\r\n                                   Delete Profile\r\n                                  </md-button>\r\n                                </div>\r\n                              </div>\r\n                            <div layout="row" layout-padding layout-gt-xs="row" >\r\n                                  <div flex="100">\r\n                                      <md-button type="submit"\r\n                                      class="md-raised md-primary"\r\n                                      aria-label="PROCESS"\r\n                                      ng-click="submit(paymentMode);"\r\n                                      ng-disabled="checkoutForm.$invalid || isAmountInvalid || disabledChargeButton"\r\n                                      style="background:#408F2B;width:90%">CHARGE {{totalAmount | currency}}</md-button>\r\n                                  </div>\r\n                                  <div flex="50" align="right">\r\n                                     <md-button type="submit"\r\n                                      class="md-warn"\r\n                                      aria-label="PROCESS"\r\n                                      ng-click="cancel();"\r\n                                      style="color:grey;width:90%">DON\'T CHARGE</md-button>\r\n                                  </div>\r\n                              </div>\r\n                            </div>\r\n                            <!--Ach-->\r\n                            <div ng-show="paymentMode==\'creditcard\'">\r\n                            <!-- Swiper Code-->\r\n                             <md-input-container class="md-block" md-no-float style="border:1px solid #ccc; position:absolute; top:-550px; width:100%; height:50px;">\r\n                                          <input type="text" id="swipeInfo" name="swipeInfo" ng-model="swipeInfo" class="md-padding" placeholder="Swipe Data" auto-focus ng-keyup="handle_swipe();">\r\n                                      </md-input-container>\r\n\r\n                            <div class="demo-dialog-content" ng-show="showSwiperBox">\r\n\r\n\r\n                              <h3 class="md-padding" align="center">{{swipeText}} &nbsp;\r\n                                <md-button\r\n                                         title="Close card swiper"\r\n                                         target="_blank"\r\n                                         aria-label="Cancel"\r\n                                         class="md-icon-button launch"\r\n                                         ng-click="showSwiperBox=false"\r\n                                         style="text-align:right";\r\n                                         align="right"\r\n                                         >\r\n                                <md-icon md-font-icon="fa fa-times"></md-icon>\r\n                              </md-button></h3>\r\n                                <div layout="row" layout-align="end end">\r\n                                    <div flex="100" style="text-align:center !important;">\r\n\r\n                                          <img src="assets/images/icons/swiper-static.png" width="200" ng-show="showStatic">\r\n                                          <img src="assets/images/icons/swiper-animated.gif" width="200" ng-show="showAnimation">\r\n                                    </div>\r\n\r\n                                </div>\r\n                                <div layout="row" layout-align="center center">\r\n                                  <div flex="100" align="center">\r\n                                      <span class="md-caption">&nbsp;.</span>\r\n                                  </div>\r\n                                </div>\r\n                            </div>\r\n                            <!-- Swiper Code-->\r\n                            <!--cc fields start-->\r\n                            <div class="md-padding-" style="padding:6px 10px 0px 10px;" ng-hide="showSwiperBox">\r\n                              <md-input-container class="md-block" md-no-float ng-show="ccprofiles.length > 0">\r\n                                <!--<label>Card Profile</label>-->\r\n                                <md-select ng-model="ccprofile.profile_id" ng-change="UpdateCCFields()" placeholder="Card Profile">\r\n                                    <md-optgroup label="Card Profile">\r\n                                      <md-option\r\n                                      value="{{profile.profile_id}}"\r\n                                      ng-repeat="(key,profile) in ccprofiles"\r\n                                      ng-if="profile.card_type !== \'ECHK\'" >\r\n                                        {{profile.last_digits==="0" ? "None" : "xxxx-xxxx-xxxx"+profile.last_digits}}\r\n                                      </md-option>\r\n                                    </md-optgroup>\r\n                                </md-select>\r\n                              </md-input-container>\r\n                              <md-input-container class="md-block" md-no-float>\r\n                                  <input type="text" id="FirstName" name="cardholder" ng-model="payform.cardholder" class="md-padding" placeholder="CardHolder Name"  ng-disabled="usedCardProfile"  ng-required="requiredCreditCardNumber">\r\n\r\n                                  <div ng-messages="checkoutForm.cardholder.$error" role="alert" multiple>\r\n                                      <div ng-message="required" ng-show="IsSubmit">\r\n                                          <span>CardHolder Name is required</span>\r\n                                      </div>\r\n                                  </div>\r\n                              </md-input-container>\r\n                              <md-input-container class="md-block" md-no-float >\r\n                                  <input type="text" id="CardNumber" name="cardnumber" ng-model="payform.cardnumber" data-ng-pattern="ccPattern" placeholder="CreditCard Number" data-ng-minlength="14" maxlength="16"  data-credit-card-type ng-disabled="usedCardProfile"  ng-required="requiredCreditCardNumber" autocomplete="on|off">\r\n\r\n                                  <div ng-messages="checkoutForm.cardnumber.$error" role="alert" multiple>\r\n                                      <div ng-message="required" ng-show="IsSubmit">\r\n                                          <span>CreditCard Number is required</span>\r\n                                      </div>\r\n                                      <div ng-message="minlength">\r\n                                          <span>Credit card must be 14-16 digits</span>\r\n                                      </div>\r\n\r\n                                      <div ng-message="pattern">\r\n                                          <span>Credit card must consist of only numbers</span>\r\n                                      </div>\r\n                                  </div>\r\n                                  <div>\r\n                                      <img ng-show="true" ng-repeat="card in cardlogos" align="right" ng-src="assets/images/cardicons/{{card.src}}" style="opacity:{{ccinfo.type==card.id ? 1 : 0.4}}; margin-right:2px;width:38px">\r\n                                  </div>\r\n                              </md-input-container>\r\n\r\n                              <div layout="column" layout-gt-xs="row">\r\n                                  <md-input-container flex="100" flex-gt-xs="33" md-no-float ng-hide="usedCardProfile">\r\n                                      <label>Exp Month</label>\r\n                                      <md-select id="months" name="months" ng-model="payform.months" ng-required="requiredMonthField" >\r\n                                          <md-option ng-repeat="(key, month) in [\'01\',\'02\',\'03\',\'04\',\'05\',\'06\',\'07\',\'08\',\'09\',\'10\',\'11\',\'12\']" value="{{month}}">\r\n                                              {{month}}\r\n                                          </md-option>\r\n                                      </md-select>\r\n                                      <div ng-messages="checkoutForm.months.$error" role="alert">\r\n                                          <div ng-message="required" ng-show="IsSubmit">\r\n                                              <span>CreditCard exp month is required.</span>\r\n                                          </div>\r\n                                      </div>\r\n\r\n                                  </md-input-container>\r\n                                  <md-input-container flex="100" flex-gt-xs="33" ng-show="usedCardProfile">\r\n                                      <label>Exp Month</label>\r\n                                       <input type="text" id="CVV" name="cc2" ng-model="payform.months" placeholder="XXXX" ng-disabled="true">\r\n                                  </md-input-container>\r\n\r\n                                  <md-input-container flex="100" flex-gt-xs="33" md-no-float ng-hide="usedCardProfile">\r\n                                      <label>Exp Year</label>\r\n                                      <md-select id="years" name="years" ng-model="payform.years" ng-required="requiredYearField">\r\n                                          <md-option ng-repeat="year in [] | range:currentYear:currentYear+13" value="{{year}}">\r\n                                              {{year}}\r\n                                          </md-option>\r\n                                      </md-select>\r\n                                      <div ng-messages="checkoutForm.years.$error" role="alert">\r\n                                          <div ng-message="required" ng-show="IsSubmit">\r\n                                              <span>CreditCard exp year is required.</span>\r\n                                          </div>\r\n                                      </div>\r\n                                  </md-input-container>\r\n                                   <md-input-container flex="100" flex-gt-xs="33" ng-show="usedCardProfile">\r\n                                       <label>Exp Year</label>\r\n                                       <input type="text" id="CVV" name="cc2" ng-model="payform.years" placeholder="XXXX" ng-disabled="true">\r\n                                  </md-input-container>\r\n                                  <md-input-container class="md-block" md-no-float flex-gt-xs="33" ng-hide="usedCardProfile">\r\n                                      <input type="text" id="CVV" name="cc2" ng-model="payform.cc2" placeholder="CVC2/CVV2/CID" md-maxlength="4" maxlength="4" ng-pattern="/^[0-9]+$/">\r\n                                      <div ng-messages="checkoutForm.cc2.$error" role="alert" multipl>\r\n                                          <div ng-message="required" ng-show="IsSubmit">\r\n                                              <span>CCV2 field is required.</span>\r\n                                          </div>\r\n                                          <div ng-message="md-maxlength">\r\n                                              <span>CCV2 can\'t be longer than 4 characters.</span>\r\n                                          </div>\r\n                                      </div>\r\n                                  </md-input-container>\r\n                                  <md-input-container flex="100" flex-gt-xs="33" ng-show="usedCardProfile">\r\n                                       <label>CVC2/CVV2/CID</label>\r\n                                       <input type="text" id="CVV" name="cc2" ng-model="payform.cc2" placeholder="XXXX" ng-disabled="true">\r\n                                  </md-input-container>\r\n                              </div>\r\n                              <span class="md-body-1">Additional Information</span>\r\n                              <div layout="column" layout-gt-xs="row" style="border-top:0px solid #ddd">\r\n                                  <md-input-container flex="100" flex-gt-xs="75" md-no-float>\r\n                                      <input type="text" name="streetaddress" ng-model="payform.streetaddress" class="md-padding" placeholder="Street Address" ng-disabled="usedCardProfile">\r\n                                  </md-input-container>\r\n                                  <md-input-container flex="100" flex-gt-xs="25" md-no-float>\r\n                                      <input type="text" name="zipcode" ng-model="payform.zipcode" class="md-padding" placeholder="ZIP Code" ng-disabled="usedCardProfile">\r\n                                  </md-input-container>\r\n                              </div>\r\n                              <div layout="column" layout-gt-xs="row" layout-align="center center">\r\n                                  <div flex="40" ng-hide="usedCardProfile">\r\n                                  <md-checkbox aria-label="Create Profile" ng-model="payform.card_profile" ng-hide="usedCardProfile">\r\n                                      Save card for future use\r\n                                  </md-checkbox>\r\n                                </div>\r\n                                <div flex="60" align="right">\r\n                                  <!---->\r\n                                  <md-button ng-click="ProfileDelete()" class="md-warn" ng-show="usedCardProfile">\r\n                                  <md-icon md-font-icon="fa fa-trash" style="font-size:14px;"></md-icon>&nbsp;\r\n                                   Delete Profile\r\n                                  </md-button>\r\n\r\n                                  <md-button ng-click="showSwipe($event)" class="md-primary">\r\n                                  <md-icon md-font-icon="fa fa-credit-card-alt" style="font-size:12px;"></md-icon>&nbsp;\r\n                                   Swipe\r\n                                  </md-button>\r\n                                </div>\r\n                              </div>\r\n                              <div layout="column" layout-gt-xs="row">\r\n                                <div flex="50">\r\n\r\n                                    <md-button type="submit"\r\n                                    class="md-raised md-primary"\r\n                                    aria-label="PROCESS"\r\n                                    ng-click="submit(paymentMode);"\r\n                                    ng-disabled="checkoutForm.$invalid || isAmountInvalid || disabledChargeButton"\r\n                                    style="background:#408F2B;width:90%">CHARGE {{totalAmount | currency}}</md-button>\r\n                                </div>\r\n                                <div flex="50" align="right">\r\n                                   <md-button type="submit"\r\n                                    class="md-warn"\r\n                                    aria-label="PROCESS"\r\n                                    ng-click="cancel();"\r\n                                    style="color:grey;width:90%">DON\'T CHARGE</md-button>\r\n                                </div>\r\n                            </div>\r\n                            </div>\r\n                            <!-- cc fields end-->\r\n                          </div>\r\n                          <!-- Cash -->\r\n                            <div ng-show="paymentMode==\'cash\'">\r\n                                <div layout="column" layout-gt-xs="row">\r\n                                <div flex="50">\r\n                                    <md-button type="submit"\r\n                                    class="md-raised md-primary"\r\n                                    aria-label="PROCESS"\r\n                                    ng-click="submit(\'cash\');"\r\n                                    ng-disabled="isAmountInvalid || disabledChargeButton"\r\n                                    style="background:#408F2B;width:90%">CHARGE {{totalAmount | currency}}</md-button>\r\n                                </div>\r\n                                <div flex="50" align="right">\r\n                                   <md-button type="submit"\r\n                                    class="md-warn"\r\n                                    aria-label="PROCESS"\r\n                                    ng-click="cancel();"\r\n                                    style="color:grey;width:90%">DON\'T CHARGE</md-button>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n\r\n                           <!-- Bolt -->\r\n                             <div ng-show="paymentMode==\'bolt\'">\r\n\r\n                                  <div layout="column" layout-align="center center" style="min-height:400px !important; border:0px solid #ccc;">\r\n                                      <div flex align="center" class="margin-top-40" style="diplay:block">\r\n                                        <img src="assets/images/bolt.png" width="160">\r\n                                      </div>\r\n\r\n                                      <div flex align="center" ng-if="boltConfig.hsn!=\'\'" layout-padding style="diplay:block">\r\n                                          <span class="md-subtitle" style="color:green">Terminal : {{boltConfig.hsn}}</span>\r\n                                      </div>\r\n                                      <div flex align="center" ng-if="boltConfig.hsn==\'\'" style="diplay:block">\r\n                                          <span class="md-subtitle" style="color:#ff0000;">No Terminal found on your account!</span>\r\n                                          <br>\r\n                                          <span class="md-caption" style="color:#ff0000;">please ask your administrator to assign you terminal id from Settings App</span>\r\n                                      </div>\r\n\r\n                                      <div flex align="center">\r\n                                        <md-button type="submit"\r\n                                                  class="md-raised md-primary"\r\n                                                  aria-label="PROCESS"\r\n                                                  ng-click="processBolt(\'\');"\r\n                                                  ng-disabled="disabledChargeButton"\r\n                                                  style="background:#408F2B;width:100% !important"\r\n                                                  ng-if="boltConfig.hsn!=\'\'"\r\n                                                  >CHARGE {{totalAmount | currency}}</md-button>\r\n\r\n                                      </div>\r\n                                      <div flex align="right">\r\n                                         <md-button type="submit"\r\n                                          class="md-warn"\r\n                                          aria-label="PROCESS"\r\n                                          ng-click="cancel();"\r\n                                          style="color:grey;width:90%">DON\'T CHARGE</md-button>\r\n                                      </div>\r\n\r\n                                      <div flex align="center" class="info" ng-if="boltProcessStatus!=\'\'" layout-padding>\r\n                                          <span class="md-subtitle">{{boltProcessStatus}}</span>\r\n                                      </div>\r\n                                      <div flex>\r\n\r\n                                      </div>\r\n                                    </div>\r\n                             </div>\r\n                           <!-- Eof Bolt -->\r\n\r\n                           <!-- Tripos ipp350 -->\r\n                            <div ng-show="paymentMode==\'tripos_ipp350\'">\r\n                                 <div layout="column" layout-align="center center" style="min-height:400px !important; height:auto !important;">\r\n\r\n                                  <div flex align="center" layout-padding>\r\n                                    <img src="assets/images/tripos.jpg" width="160">\r\n                                    <div ng-show="tripos_searchlane_progress">\r\n                                      <md-progress-linear class="md-primary" md-mode="indeterminate" ></md-progress-linear>\r\n                                      <center class="md-caption">Getting Configuration</center>\r\n                                    </div>\r\n                                  </div>\r\n\r\n                                   <!-- Sale Error -->\r\n                                  <div flex align="center" layout-padding ng-show="triPOSSaleInfo._hasErrors">\r\n                                      <span class="md-subtitle" style="color:#ff0000;">\r\n                                       Error\r\n                                      </span>\r\n                                      <br>\r\n                                      <span class="md-caption" style="color:#ff0000;">\r\n                                        {{triPOSSaleInfo.errorMessage}}\r\n                                      </span>\r\n                                  </div>\r\n\r\n                                  <div flex align="center" layout-padding ng-hide="triPOSLaneInfo._hasErrors" ng-if="showtriPOSLaneInfo">\r\n                                      <span class="md-subtitle" style="color:green">{{triPOSLaneInfo.ipLanes[0].description}}</span>\r\n                                      <div ng-if="triPOSLaneInfo.ipLanes.length > 0">\r\n                                      <table class="md-table" >\r\n                                        <tr>\r\n                                            <td>Lane ID</td>\r\n                                            <td>Terminal ID</td>\r\n                                            <td>Driver</td>\r\n                                            <td>Terminal Type</td>\r\n                                        </tr>\r\n                                        <tr >\r\n                                            <td align="center">{{triPOSLaneInfo.ipLanes[0].laneId}}</td>\r\n                                            <td>{{triPOSLaneInfo.ipLanes[0].terminalId}}</td>\r\n                                            <td>{{triPOSLaneInfo.ipLanes[0].driver}}</td>\r\n                                            <td>{{triPOSLaneInfo.ipLanes[0].terminalType}}</td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <td colspan="4" ><span style="color:green" >Device IPAddress:</span> {{triPOSLaneInfo.ipLanes[0].ip.address}}&nbsp;:&nbsp;{{triPOSLaneInfo.ipLanes[0].ip.port}}</td>\r\n                                        </tr>\r\n                                      </table>\r\n                                      <md-button type="submit"\r\n                                              class="md-raised md-primary"\r\n                                              aria-label="PROCESS"\r\n                                              ng-click="processTriPOSiPP350(\'\');"\r\n                                              ng-disabled="disabledChargeButton"\r\n                                              style="background:#408F2B;width:100% !important"\r\n\r\n                                              >CHARGE {{totalAmount | currency}}</md-button>\r\n\r\n                                      </div>\r\n\r\n                                      <span ng-if="triPOSLaneInfo.ipLanes.length==0" class="md-subtitle" style="color:#ff0000;">No ipLanes define in config file</span>\r\n\r\n                                  </div>\r\n\r\n                                  <!-- Lane Error -->\r\n                                  <div flex align="center" layout-padding ng-show="triPOSLaneInfo._hasErrors">\r\n                                      <span class="md-subtitle" style="color:#ff0000;">\r\n                                       Error\r\n                                      </span>\r\n                                      <br>\r\n                                      <span class="md-caption" style="color:#ff0000;">\r\n                                        {{triPOSLaneInfo.errorMessage}}\r\n                                      </span>\r\n                                  </div>\r\n\r\n\r\n\r\n                                  <div flex>\r\n\r\n                                  </div>\r\n                              </div>\r\n                            </div>\r\n                        </md-card-content>\r\n                    </md-card>\r\n\r\n\r\n\r\n                </md-content>\r\n    </md-dialog-content>\r\n\r\n    <md-dialog-content style="min-width:350px !important; max-width:350px !important; overflow:hidden;" ng-show="isPaymentSuccess">\r\n      <div class="md-dialog-content print_receipt" >\r\n        <table id="print_receipt" width="350px">\r\n            <tr>\r\n                <td colspan="2" align="center"><img src="{{companyInfo.company.logo}}" height="80"></td>\r\n            </tr>\r\n            <tr>\r\n                <td colspan="2">\r\n                    <p align="center">\r\n                        <strong>{{companyInfo.company.name}}</strong><BR>\r\n                        {{companyInfo.company.address1}}<BR>\r\n                        {{companyInfo.company.state}}, {{companyInfo.company.city}}, {{companyInfo.company.zipcode}}<BR>\r\n                        Phone: {{companyInfo.company.phone}}\r\n                    </p>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td align="left" width="50%">Trans. Type:</td>\r\n                <td width="50%">{{transactionResponse.trans_type | uppercase}}</td>\r\n            </tr>\r\n            <tr>\r\n                <td align="left">Trans. Date:</td>\r\n                <td>{{transactionResponse.trans_date | uppercase}}</td>\r\n            </tr>\r\n            <tr>\r\n                <td align="left">Trans. Amount:</td>\r\n                <td>{{transactionResponse.trans_amount | currency}}</td>\r\n            </tr>\r\n\r\n            <tr >\r\n                <td align="left">Invoice #:</td>\r\n                <td>{{transactionResponse.invoice_no}}</td>\r\n            </tr>\r\n            <tr >\r\n                <td align="left">Trans. Status:</td>\r\n                <td>{{transactionResponse.status}}</td>\r\n            </tr>\r\n            <tr ng-show="transactionResponse.trans_type==\'sale\'">\r\n                <td align="left">Card #:</td>\r\n                <td>xxxxxxxxxxxx{{transactionResponse.last4digit}}</td>\r\n            </tr>\r\n            <tr ng-show="transactionResponse.trans_type==\'sale\'">\r\n                <td align="left">Card Type:</td>\r\n                <td>{{transactionResponse.cardtype}}</td>\r\n            </tr>\r\n            <tr ng-show="transactionResponse.trans_type==\'sale\'">\r\n                <td align="left">Card Holder:</td>\r\n                <td>{{transactionResponse.cardholder_name}}</td>\r\n            </tr>\r\n\r\n            <tr >\r\n                <td align="left">Ref ID:</td>\r\n                <td>{{transactionResponse.ref_id}}</td>\r\n            </tr>\r\n            <tr >\r\n                <td align="left">Auth Response:</td>\r\n                <td>{{transactionResponse.response_text}}</td>\r\n            </tr>\r\n             <tr>\r\n                <td colspan="2">\r\n                    <p align="center">\r\n                       Thank You<br>\r\n                       *****************************<br>\r\n                       Powered By<br>\r\n                       Clique Center<br>\r\n                       (www.clique.center)\r\n                    </p>\r\n                </td>\r\n            </tr>\r\n            </table>\r\n\r\n\r\n      </div>\r\n    </md-dialog-content>\r\n</form>\r\n</md-dialog>\r\n'),
e.put("app/modules/salesreceipt/payment/swiper.panel.tmpl.html",'<md-toast>\r\n<div role="dialog" aria-label="Eat me!" layout="column" layout-align="center center">\r\n  \r\n  <div class="demo-dialog-content">\r\n      <h3 class="md-padding">{{swipeText}}</h3>\r\n        <div layout="row" layout-align="end end"> \r\n            <div flex="100" style="text-align:center !important;">\r\n              <md-input-container class="md-block" md-no-float style="border:1px solid #ccc; position:absolute; top:-500px; width:100%; height:50px;">\r\n                  <input type="text" id="swipeInfo" name="swipeInfo" ng-model="swipeInfo" class="md-padding" placeholder="Swipe Data" md-autofocus ng-keyup="handle_swipe();">\r\n              </md-input-container>\r\n                  <img src="assets/images/icons/swiper-static.png" width="200" ng-show="showStatic">\r\n                  <img src="assets/images/icons/swiper-animated.gif" width="200" ng-show="showAnimation">\r\n            </div>\r\n            \r\n        </div>\r\n        <div layout="row" layout-align="center center"> \r\n          <div flex="100" align="center">\r\n              <span class="md-caption">press Ecs to manually enter card no .</span>\r\n          </div>\r\n        </div>\r\n\r\n  </div>\r\n  \r\n</div>\r\n</md-toast>'),e.put("app/triangular/components/footer/footer.tmpl.html",'<md-toolbar id="footer" md-theme="{{triSkin.elements.toolbar}}" ng-controller="FooterController as vm" ng-show="vm.layout.footer">\r\n    <div class="md-toolbar-tools md-body-1" layout="row" layout-align="space-between center">\r\n        <h2>{{vm.name}}</h2>\r\n        <h2 hide-xs ng-bind-html="vm.copyright"></h2>\r\n        <h2>v{{vm.version}}</h2>\r\n    </div>\r\n</md-toolbar>\r\n'),e.put("app/triangular/components/menu/menu-item-divider.tmpl.html","<md-divider></md-divider>"),e.put("app/triangular/components/menu/menu-item-dropdown.tmpl.html",'<md-button ng-click="triMenuItem.toggleDropdownMenu()" class="md-raised md-primary side-menu-link">\r\n    <md-icon ng-if="::(triMenuItem.item.icon !== undefined)" class="side-menu-icon" md-font-icon="{{::triMenuItem.item.icon}}"></md-icon>\r\n    <span translate>{{::triMenuItem.item.name}}</span>\r\n    <md-icon class="menu-toggle-icon" md-font-icon="zmdi zmdi-chevron-right" ng-class="{ open: triMenuItem.item.open }"></md-icon>\r\n</md-button>\r\n<ul class="drop-down-list" ng-show="triMenuItem.item.open">\r\n    <li ng-repeat="child in triMenuItem.item.children">\r\n        <tri-menu-item item="::child"></tri-menu-item>\r\n    </li>\r\n</ul>'),e.put("app/triangular/components/menu/menu-item-link.tmpl.html",'<md-button permission permission-only="triMenuItem.item.permission" ng-click="triMenuItem.openLink(triMenuItem.item)" class="md-primary md-raised side-menu-link" ng-class="{ \'md-hue-1\': triMenuItem.item.active }">\r\n    <md-icon ng-if="::(triMenuItem.item.icon !== undefined)" class="side-menu-icon" md-font-icon="{{::triMenuItem.item.icon}}"></md-icon>\r\n    <span translate>{{::triMenuItem.item.name}}</span>\r\n    <small ng-if="triMenuItem.item.badge" theme-background="accent" class="side-menu-badge">{{triMenuItem.item.badge}}</small>\r\n</md-button>'),e.put("app/triangular/components/notifications-panel/notifications-panel.tmpl.html",'<md-content flex layout class="admin-notifications">\r\n    <md-tabs flex md-stretch-tabs="always" md-selected="vm.currentTab">\r\n        <md-tab>\r\n            <md-tab-label>\r\n                <md-icon md-font-icon="zmdi zmdi-email"></md-icon>\r\n            </md-tab-label>\r\n            <md-tab-body>\r\n                <md-content>\r\n                    <md-list class="md-dense">\r\n                        <md-list-item class="md-2-line" ng-repeat="email in ::vm.emails" ng-click="vm.openMail(email)">\r\n                            <img class="md-avatar" ng-src="{{::email.from.image}}" alt="{{::email.from.name}}">\r\n                            <div class="md-list-item-text">\r\n                                <h3>{{::email.from.name}}</h3>\r\n                                <h4>{{::email.subject}}</h4>\r\n                                <p class="md-caption" am-time-ago="::email.date"></p>\r\n                            </div>\r\n                            <md-divider ng-hide="$last"></md-divider>\r\n                        </md-list-item>\r\n                    </md-list>\r\n                </md-content>\r\n            </md-tab-body>\r\n        </md-tab>\r\n        <md-tab>\r\n            <md-tab-label>\r\n                <md-icon md-font-icon="fa fa-bell-o"></md-icon>\r\n            </md-tab-label>\r\n            <md-tab-body>\r\n                <md-content>\r\n                    <md-list>\r\n                        <div ng-repeat="group in ::vm.notificationGroups">\r\n                            <md-subheader class="md-primary">{{::group.name}}</md-subheader>\r\n                            <md-list-item ng-repeat="notification in ::group.notifications" layout="row" layout-align="space-between center">\r\n                                <md-icon md-font-icon="{{::notification.icon}}" ng-style="{ color: notification.iconColor }"></md-icon>\r\n                                <p>{{::notification.title}}</p>\r\n                                <span class="md-caption" am-time-ago="::notification.date"></span>\r\n                            </md-list-item>\r\n                        </div>\r\n                    </md-list>\r\n                </md-content>\r\n            </md-tab-body>\r\n        </md-tab>\r\n        <md-tab>\r\n            <md-tab-label>\r\n                <md-icon md-font-icon="zmdi zmdi-account"></md-icon>\r\n            </md-tab-label>\r\n            <md-tab-body>\r\n                <md-content>\r\n                    <md-list>\r\n                        <div ng-repeat="group in ::vm.settingsGroups">\r\n                            <md-subheader class="md-primary"><span translate>{{::group.name}}</span></md-subheader>\r\n                            <md-list-item ng-repeat="setting in ::group.settings" layout="row" layout-align="space-around center">\r\n                                <md-icon md-font-icon="{{::setting.icon}}"></md-icon>\r\n                                <p translate>{{::setting.title}}</p>\r\n                                <md-switch class="md-secondary" ng-model="setting.enabled"></md-switch>\r\n                            </md-list-item>\r\n                        </div>\r\n                        <div ng-repeat="group in ::vm.statisticsGroups">\r\n                            <md-subheader class="md-primary"><span translate>{{::group.name}}</span></md-subheader>\r\n                            <md-list-item ng-repeat="stat in ::group.stats" layout="column" layout-align="space-around start">\r\n                                <md-progress-linear class="margin-top-20" ng-class="::stat.mdClass" md-mode="determinate" ng-value="::stat.value"></md-progress-linear>\r\n                                <p translate>{{::stat.title}}</p>\r\n                            </md-list-item>\r\n                        </div>\r\n                    </md-list>\r\n                </md-content>\r\n            </md-tab-body>\r\n        </md-tab>\r\n    </md-tabs>\r\n</md-content>\r\n'),e.put("app/triangular/components/table/table-directive.tmpl.html",'<table class="md-table">\r\n    <thead>\r\n        <tr>\r\n            <th ng-repeat="column in columns" ng-click="sortClick(column.field)" ng-class="headerClass(column.field)">\r\n                <md-icon ng-show="showSortOrder(column.field, true)" class="zmdi-hc-rotate-90" md-font-icon="zmdi zmdi-arrow-back"></md-icon>\r\n                <md-icon ng-show="showSortOrder(column.field, false)" class="zmdi-hc-rotate-270" md-font-icon="zmdi zmdi-arrow-back"></md-icon>\r\n                <span>\r\n                    {{column.title | triTranslate}}\r\n                </span>\r\n            </th>\r\n        </tr>\r\n    </thead>\r\n    <tbody>\r\n        <tr ng-repeat="content in contents | filter:filters | startFrom:page * pageSize | limitTo: pageSize">\r\n            <td ng-repeat="column in columns" ng-bind-html="cellContents(column, content)" ng-class="column.field + \'-cell\'"></td>\r\n        </tr>\r\n    </tbody>\r\n    <tfoot>\r\n        <tr>\r\n            <td colspan="{{columns.length}}">\r\n                <div class="md-table-footer" layout="row" layout-align="end center">\r\n                    <div class="md-table-page-select" layout="row" layout-align="center center">\r\n                        <span translate>Rows per page:</span>\r\n                        <md-select ng-model="pageSize" ng-change="refresh(true)">\r\n                            <md-option value="5">5</md-option>\r\n                            <md-option value="10">10</md-option>\r\n                            <md-option value="25">25</md-option>\r\n                            <md-option value="50">50</md-option>\r\n                            <md-option value="100">100</md-option>\r\n                        </md-select>\r\n                    </div>\r\n                    <span class="md-table-info">\r\n                        {{pageStart()}}\r\n                        -\r\n                        {{pageEnd()}}\r\n                        <span translate>of</span>\r\n                        {{totalItems()}}\r\n                    </span>\r\n                    <div class="md-table-page-nav">\r\n                        <md-button ng-disabled="page == 0" ng-click="page = page - 1" aria-label="{{\'Previous Page\' | triTranslate}}" class="md-primary md-icon-button">\r\n                            <md-icon md-font-icon="zmdi zmdi-chevron-left"></md-icon>\r\n                        </md-button>\r\n                        <md-button ng-disabled="page == numberOfPages() - 1" ng-click="page = page + 1" aria-label="{{\'Next Page\' | triTranslate}}" class="md-primary md-icon-button">\r\n                            <md-icon md-font-icon="zmdi zmdi-chevron-right"></md-icon>\r\n                        </md-button>\r\n                    </div>\r\n                </div>\r\n            </td>\r\n        </tr>\r\n    </tfoot>\r\n</table>\r\n'),e.put("app/triangular/components/toolbars/toolbar.tmpl.html",'<div class="md-toolbar-tools">\r\n    <md-button class="md-icon-button" ng-if="!vm.hideMenuButton()" ng-click="vm.openSideNav(\'left\')" aria-label="side navigation">\r\n        <md-icon md-font-icon="zmdi zmdi-menu"></md-icon>\r\n    </md-button>\r\n\r\n    <h2 hide-xs flex>\r\n        <span ng-repeat="crumb in vm.breadcrumbs.crumbs">\r\n            <span translate>{{crumb.name}}</span>\r\n            <md-icon md-font-icon="zmdi zmdi-chevron-right" ng-if="!$last"></md-icon>\r\n        </span>\r\n    </h2>\r\n\r\n    <md-button class="md-icon-button toolbar-button" ng-click="vm.toggleFullScreen()" aria-label="toggle fullscreen">\r\n        <md-icon md-font-icon ng-class="vm.fullScreenIcon"></md-icon>\r\n    </md-button>\r\n\r\n    <md-menu ng-show="vm.languages.length > 0">\r\n        <md-button class="md-icon-button" aria-label="language" ng-click="$mdOpenMenu()" aria-label="change language">\r\n            <md-icon md-font-icon="zmdi zmdi-globe-alt"></md-icon>\r\n        </md-button>\r\n        <md-menu-content width="3">\r\n            <md-menu-item ng-repeat="language in ::vm.languages">\r\n                <md-button ng-click="vm.switchLanguage(language.key)" translate="{{::language.name}}" aria-label="{{::language.name}}"></md-button>\r\n            </md-menu-item>\r\n        </md-menu-content>\r\n    </md-menu>\r\n\r\n    <md-button class="md-icon-button toolbar-button animated" ng-click="vm.toggleNotificationsTab(0)" aria-label="side navigation">\r\n        <md-icon md-font-icon="zmdi zmdi-email"></md-icon>\r\n        <span class="toolbar-button-badge animated" theme-background="accent" ng-class="{ \'toolbar-button-badge-new\' : vm.emailNew }">5</span>\r\n    </md-button>\r\n\r\n    <md-button class="md-icon-button toolbar-button" ng-click="vm.toggleNotificationsTab(1)">\r\n        <md-icon md-font-icon="fa fa-bell-o"></md-icon>\r\n        <span class="toolbar-button-badge" theme-background="accent">2</span>\r\n    </md-button>\r\n\r\n    <md-menu>\r\n        <md-button aria-label="Open user menu" ng-click="$mdOpenMenu()" aria-label="side navigation">\r\n            <img class="toolbar-user-avatar" src="assets/images/avatars/avatar-5.png">\r\n            Christos\r\n        </md-button>\r\n        <md-menu-content width="4">\r\n            <md-menu-item>\r\n                <md-button ng-click="vm.toggleNotificationsTab(2)" aria-label="side navigation">\r\n                    <md-icon md-font-icon="zmdi zmdi-settings"></md-icon>\r\n                    <span translate="Settings"></span>\r\n                </md-button>\r\n            </md-menu-item>\r\n            <md-menu-item>\r\n                <md-button href="#/profile" aria-label="side navigation">\r\n                    <md-icon md-font-icon="zmdi zmdi-account"></md-icon>\r\n                    <span translate="Profile"></span>\r\n                </md-button>\r\n            </md-menu-item>\r\n            <md-menu-divider></md-menu-divider>\r\n            <md-menu-item>\r\n                <md-button href="#/login" aria-label="side navigation">\r\n                    <md-icon md-font-icon="zmdi zmdi-sign-in"></md-icon>\r\n                    <span translate="Logout"></span>\r\n                </md-button>\r\n            </md-menu-item>\r\n        </md-menu-content>\r\n    </md-menu>\r\n</div>\r\n'),e.put("app/triangular/components/widget/widget.tmpl.html",'<div class="widget " ng-class="::{\'widget-overlay-title\': vm.overlayTitle}" flex layout="{{vm.widgetLayout}}">\r\n\r\n    <div class="widget-title" ng-if="::(vm.title || vm.subtitle)" layout="row" layout-padding layout-align="start center" flex-order="{{vm.titleOrder}}">\r\n        <div ng-if="::vm.avatar">\r\n            <img ng-src="{{::vm.avatar}}" class="widget-avatar"/>\r\n        </div>\r\n        <div flex layout="column">\r\n            <h3 class="md-subhead" ng-if="::vm.title" translate>{{vm.title}}</h3>\r\n            <p class="md-body-1" ng-if="::vm.subtitle" translate>{{vm.subtitle}}</p>\r\n        </div>\r\n        <md-menu ng-if="::vm.menu">\r\n            <md-button class="widget-button md-icon-button" ng-click="$mdOpenMenu()" aria-label="open menu">\r\n                <md-icon md-font-icon="{{::vm.menu.icon}}"></md-icon>\r\n            </md-button>\r\n            <md-menu-content>\r\n                <md-menu-item ng-repeat="item in ::vm.menu.items">\r\n                    <md-button ng-click="item.click($event)">\r\n                        <md-icon ng-if="::item.icon" md-font-icon="{{::item.icon}}"></md-icon>\r\n                        <span translate>{{::item.title}}</span>\r\n                    </md-button>\r\n                </md-menu-item>\r\n            </md-menu-content>\r\n        </md-menu>\r\n    </div>\r\n\r\n    <div class="widget-content" layout="{{vm.contentLayout}}" layout-align="{{vm.contentLayoutAlign}}" ng-class="{\'layout-padding\': vm.contentPadding}" ng-transclude flex-order="{{vm.contentOrder}}"></div>\r\n\r\n    <div class="widget-loading ng-hide" ng-show="vm.loading" layout layout-fill layout-align="center center">\r\n        <div class="widget-loading-inner" ng-show="vm.loading">\r\n            <md-progress-circular md-mode="indeterminate"></md-progress-circular>\r\n        </div>\r\n    </div>\r\n\r\n</div>'),e.put("app/triangular/layouts/default/default-content.tmpl.html",'<div id="admin-panel-content-view" class="{{layout.innerContentClass}}" flex ui-view></div>'),e.put("app/triangular/layouts/default/default-no-scroll.tmpl.html",'<div layout="row" class="full-height">\r\n    <!-- left sidebar -->\r\n\r\n    <md-sidenav class="admin-sidebar-left md-sidenav-left hide-scrollbars md-whiteframe-z2" md-component-id="left" md-is-locked-open="layout.sideMenuSize !== \'hidden\' && $mdMedia(\'gt-sm\')" ui-view="sidebarLeft" ng-class="{ \'admin-sidebar-collapsed\': layout.sideMenuSize == \'icon\' }" ng-mouseover="layoutController.activateHover()" ng-mouseleave="layoutController.removeHover()"></md-sidenav>\r\n\r\n    <!-- main content -->\r\n    <div id="admin-panel" layout="column" flex>\r\n        <!-- loading animation -->\r\n        <tri-loader></tri-loader>\r\n\r\n        <!-- top toolbar -->\r\n        <md-toolbar class="admin-toolbar" md-theme="{{triSkin.elements.toolbar}}" ui-view="toolbar" ng-class="[layout.toolbarSize,layout.toolbarClass]"></md-toolbar>\r\n\r\n        <!-- scrollable content -->\r\n        <div ui-view="content" layout="column" flex class="overflow-hidden"></div>\r\n\r\n        <div ui-view="belowContent"></div>\r\n    </div>\r\n\r\n    <!-- right sidebar -->\r\n    <md-sidenav layout layout-fill class="md-sidenav-right md-whiteframe-z2" md-component-id="notifications" ui-view="sidebarRight"></md-sidenav>\r\n</div>\r\n'),e.put("app/triangular/layouts/default/default.tmpl.html",'<div layout="row" class="full-height">\r\n    <!-- left sidebar -->\r\n\r\n    <md-sidenav class="admin-sidebar-left md-sidenav-left hide-scrollbars md-whiteframe-z2" md-component-id="left" md-is-locked-open="layout.sideMenuSize !== \'hidden\' && $mdMedia(\'gt-sm\')" ui-view="sidebarLeft" ng-class="{ \'admin-sidebar-collapsed\': layout.sideMenuSize == \'icon\' }" ng-mouseover="layoutController.activateHover()" ng-mouseleave="layoutController.removeHover()"></md-sidenav>\r\n\r\n    <!-- main content -->\r\n    <div id="admin-panel" layout="column" flex>\r\n        <!-- loading animation -->\r\n        <tri-loader></tri-loader>\r\n\r\n        <!-- top toolbar -->\r\n        <md-toolbar class="admin-toolbar" ng-if="layout.showToolbar" md-theme="{{triSkin.elements.toolbar}}" ui-view="toolbar" ng-class="[layout.toolbarSize,layout.toolbarClass]"></md-toolbar>\r\n\r\n        <!-- scrollable content -->\r\n        <md-content ng-class="layout.contentClass" flex tri-default-content ui-view="content"></md-content>\r\n\r\n        <div ui-view="belowContent"></div>\r\n    </div>\r\n\r\n    <!-- right sidebar -->\r\n    <md-sidenav layout layout-fill class="md-sidenav-right md-whiteframe-z2" md-component-id="notifications" ui-view="sidebarRight"></md-sidenav>\r\n</div>\r\n'),e.put("app/triangular/layouts/states/triangular/triangular.tmpl.html",'<!-- left sidebar -->\r\n<md-sidenav md-colors="{ background: \'primary\' }" class="triangular-sidenav-left md-sidenav-left hide-scrollbars md-whiteframe-z2" ng-if="layout.sideMenuSize !== \'off\'" md-component-id="left" md-is-locked-open="layout.sideMenuSize !== \'hidden\' && $mdMedia(\'gt-sm\')" ui-view="sidebarLeft" ng-class="{ \'admin-sidebar-collapsed\': layout.sideMenuSize == \'icon\' }" ng-mouseover="stateController.activateHover()" ng-mouseleave="stateController.removeHover()"></md-sidenav>\r\n\r\n<!-- main content -->\r\n<div class="triangular-toolbar-and-content" layout="column" flex>\r\n\r\n    <!-- top toolbar -->\r\n    <md-toolbar class="triangular-toolbar md-whiteframe-z1" ng-if="layout.showToolbar" ng-class="[layout.toolbarSize,layout.toolbarClass]" md-theme="{{triSkin.elements.toolbar}}" ui-view="toolbar"></md-toolbar>\r\n\r\n    <!-- scrollable content -->\r\n    <md-content class="triangular-content" ng-class="layout.contentClass2" flex ui-view></md-content>\r\n\r\n    <div ui-view="belowContent"></div>\r\n\r\n    <div class="triangular-loader" ng-show="stateController.showLoader" layout="column" ui-view="loader"></div>\r\n</div>\r\n\r\n')}]);